<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>simple&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.smart-lifestyle.cn/"/>
  <updated>2021-05-23T08:02:25.762Z</updated>
  <id>https://blog.smart-lifestyle.cn/</id>
  
  <author>
    <name>simple</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>dockerè¿è¡Œlinuxç»ˆç«¯æ˜¾ç¤ºbash-4.2#</title>
    <link href="https://blog.smart-lifestyle.cn/posts/f29/"/>
    <id>https://blog.smart-lifestyle.cn/posts/f29/</id>
    <published>2021-05-23T07:39:12.000Z</published>
    <updated>2021-05-23T08:02:25.762Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€æ¬¡åœ¨dockerä¸­è¿è¡Œcentosï¼Œä¸ºäº†çœäº‹ï¼Œå°†æ•°æ®å·æŒ‚è½½äº†æ•´ä¸ªç”¨æˆ·å·¥ä½œç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>docker run -it -v /Users/simple/workspace/tmp/data:/root python36:centos7 bash</code></p><p><img src="https://oss.smart-lifestyle.cn/file/k5nrn.png" alt="image-20210523154159576"></p><p>ç†è®ºä¸Šåº”è¯¥æŒ‰å¦‚ä¸‹æ˜¾ç¤ºï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/0vks3.png" alt="image-20210523155114587"></p><p>å‘ç°æ­¤æ—¶ç»ˆç«¯æ˜¾ç¤ºçš„bash-4.2ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºç”¨æˆ·å@ä¸»æœºï¼Œå¦å¤–ç»ˆç«¯æ–‡ä»¶å¤¹æ–‡ä»¶çš„é¢œè‰²ä¹Ÿæ²¡æœ‰æ˜¾ç¤ºï¼Œæœ€å¼€å§‹ä»¥ä¸ºæ²¡æœ‰è®¾ç½®termé¢œè‰²ï¼Œä½†ç»è¿‡å°è¯•ä¸æ˜¯è¿™ä¸ªé—®é¢˜ï¼ˆ<code>TERM=xterm-256color</code>ï¼‰ã€‚</p><p>çœ‹åˆ°è‡ªå·±è¿è¡Œçš„dockerå‘½ä»¤ï¼Œ-vå°†dataç›®å½•æŒ‚è½½äº†ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè¿™æ—¶å€™æƒ³èµ·é‡Œå•Šï¼Œdocker volumeç¬¬ä¸€æ¬¡æŒ‚è½½æ˜¯å•é¡¹çš„ï¼Œå³åŠæ—¶å®¹å™¨å†…ç›®å½•æœ‰å†…å®¹ï¼Œç¬¬ä¸€æ¬¡æŒ‚è½½æ—¶ï¼Œä¹Ÿä¼šè¢«ä¸»æœºç›®å½•è¦†ç›–æ‰ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨ä¸»æœºdataç›®å½•æ˜¯ç©ºçš„ï¼Œä¼šæŠŠdockerå†…ç”¨æˆ·ç›®å½•å†…æ–‡ä»¶å…¨éƒ¨æ¸…ç©º</p><p>â€‹è¿›è¡ŒæŒ‚è½½åï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/io22a.png" alt="image-20210523154824106"></p><p>â€‹æŒ‚è½½å‰ï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/gq6l8.png" alt="image-20210523155224464"></p><p>åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå­˜æ”¾ç€bashä»¥åŠç”¨æˆ·çš„å„ç§é…ç½®æ–‡ä»¶ï¼Œè€Œè¿›è¡ŒæŒ‚è½½åï¼Œå°†æ‰€æœ‰é…ç½®æ–‡ä»¶å…¨éƒ¨æ¸…é™¤äº†ã€‚</p><p>æ­£ç¡®åšæ³•ï¼Œä¸è¦ç›´æ¥æŒ‚è½½åˆ°ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè€Œåº”è¯¥æŒ‚è½½ç”¨æˆ·ç›®å½•ä¸‹çš„äºŒçº§ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">volume="/Users/simple/workspace/function_graph/data"</span><br><span class="line">docker run -it --rm --init  --name centos -v $volume:/root/data -w /root python36:centos7 bash</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] (<a href="https://blog.csdn.net/liulihui1988/article/details/52796395" target="_blank" rel="noopener">linux å‘½ä»¤ç»ˆç«¯æç¤ºç¬¦æ˜¾ç¤º-bash-4.2#è§£å†³æ–¹æ³•__kairuiçš„åšå®¢-CSDNåšå®¢_-bash-4.2#</a>)</p>]]></content>
    
    <summary type="html">
    
      dockerè¿è¡Œlinuxç»ˆç«¯æ˜¾ç¤ºbash-4.2#
    
    </summary>
    
    
    
      <category term="docker" scheme="https://blog.smart-lifestyle.cn/tags/docker/"/>
    
      <category term="linux" scheme="https://blog.smart-lifestyle.cn/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>pythoné€’å½’åˆ›å»ºç›®å½•(mkdir -p)</title>
    <link href="https://blog.smart-lifestyle.cn/posts/7376/"/>
    <id>https://blog.smart-lifestyle.cn/posts/7376/</id>
    <published>2021-05-22T08:15:50.000Z</published>
    <updated>2021-05-22T11:22:58.536Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸ºæ—¥å¿—æ–‡ä»¶è®¾ç½®å­˜æ”¾ä½ç½®æ—¶ï¼Œéœ€è¦åœ¨ç¨‹åºé‡Œåˆ¤æ–­æ–‡ä»¶å¤¹ï¼ˆä½ç½®ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œé€šå¸¸ä½¿ç”¨<code>os.mkdir</code>æ¥åˆ›å»ºç›®å½•ï¼Œä½†æ˜¯å¦‚æœç›®å½•ä¸ºå¤šå±‚æ¬¡ç›®å½•ï¼Œè€Œä¸”æŸä¸€å±‚ç›®å½•å­˜åœ¨ï¼Œåœ¨ä½¿ç”¨<code>os.mkdir</code>æ—¶ä¼šæŠ¥é”™ï¼šFileNotFoundError*</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.mkdir(<span class="string">'/tmp/logpath/path'</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">'/tmp/logpath/path'</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºos.mkdirä¸æ”¯æŒå¤šå±‚ç›®å½•é€’å½’åˆ›å»ºã€‚</p><p>åœ¨linux mkdirå‘½ä»¤ä¸­ï¼Œå®ƒæ”¯æŒå¦‚ä¸‹æ“ä½œï¼Œä½¿ç”¨-p å¯ä»¥å®ç°é€’å½’åˆ›å»ºç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tldr mkdir</span><br><span class="line">Cache is out of date. You should run <span class="string">"tldr --update"</span></span><br><span class="line"></span><br><span class="line">  mkdir</span><br><span class="line"></span><br><span class="line">  Creates a directory.</span><br><span class="line">  More information: https://www.gnu.org/software/coreutils/mkdir.</span><br><span class="line"></span><br><span class="line">  - Create a directory <span class="keyword">in</span> current directory or given path:</span><br><span class="line">    mkdir directory</span><br><span class="line"></span><br><span class="line">  - Create directories recursively (useful <span class="keyword">for</span> creating nested <span class="built_in">dirs</span>):</span><br><span class="line">    mkdir -p path/to/directory</span><br></pre></td></tr></table></figure><p>è€Œåœ¨pythonä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨pathlib.Path.mkdiræ¥å®ç°ï¼Œéœ€è¦è®©<code>exist_ok=True</code> ä»¥åŠ<code>parents=True</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Path.mkdir(mode=<span class="number">0o777</span>, parents=<span class="literal">False</span>, exist_ok=<span class="literal">False</span>)</span><br><span class="line">If exist_ok <span class="keyword">is</span> true, FileExistsError exceptions will be ignored (same behavior <span class="keyword">as</span> the POSIX mkdir -p command), but only <span class="keyword">if</span> the last path component <span class="keyword">is</span> <span class="keyword">not</span> an existing non-directory file.</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Path(<span class="string">'/tmp/logtmp/XMKDRL'</span>).mkdir(exist_ok=<span class="literal">True</span>, parents=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.exists(<span class="string">'/tmp/logtmp/XMKDRL'</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] [mkdir-p-functionality-in-python](<a href="https://stackoverflow.com/questions/600268/mkdir-p-functionality-in-python" target="_blank" rel="noopener">mkdir -p functionality in Python - Stack Overflow</a>)</p><p>[2] [Path.mkdir](<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.mkdir" target="_blank" rel="noopener">pathlib â€” Object-oriented filesystem paths â€” Python 3.9.5 documentation</a>)</p>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨pythoné€’å½’åˆ›å»ºç›®å½•ï¼ˆç±»ä¼¼äºmkdir -p)
    
    </summary>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/categories/python/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="pythonå°æŠ€å·§" scheme="https://blog.smart-lifestyle.cn/tags/python%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨crontabå®šæœŸåŒæ­¥NTPæ—¶é—´</title>
    <link href="https://blog.smart-lifestyle.cn/posts/c57a/"/>
    <id>https://blog.smart-lifestyle.cn/posts/c57a/</id>
    <published>2021-05-21T06:33:40.000Z</published>
    <updated>2021-05-23T07:11:37.510Z</updated>
    
    <content type="html"><![CDATA[<p>è´­ä¹°çš„é˜¿é‡Œäº‘é¦™æ¸¯è™šæœºï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œå®ƒçš„æ—¶é—´å°±è·Ÿå®é™…æ—¶é—´åç¦»è¶Šæ¥è¶Šè¿œï¼Œå¯¼è‡´HTTPSæ— æ³•æ­£å¸¸å·¥ä½œï¼Œ</p><p>æœ€å¼€å§‹æ˜¯æ‰‹åŠ¨çš„ç™»å½•çš„æœåŠ¡å™¨ï¼Œä½¿ç”¨<code>rdate -s time.nist.gov</code>è¿›è¡Œæ‰‹åŠ¨æ›´æ–°æ—¶é—´ï¼Œä½†åæ¥å‘ç°è‡ªå·±è¶Šæ¥è¶Šæ‡’ï¼Œè€Œä¸”æœ€è¿‘è¿™ä¸ªå‘½ä»¤ä¸€ç›´å‡ºé”™: <code>rdate: Could not read data: Cannot assign requested address</code>, å¯èƒ½æ˜¯åé¢çš„æ—¶é—´åŒæ­¥æœåŠ¡å™¨æŒ‚äº†ã€‚</p><p>å› æ­¤æ”¹ä¸ºä½¿ç”¨<code>ntpdate</code>æ¥åŒæ­¥æ—¶é—´ï¼Œ<a href="http://xn--ntpntp-9g8in7dm0mk7jex1c6m9akydt74je7n.cloud.aliyuncs.com" target="_blank" rel="noopener">ä½¿ç”¨é˜¿é‡Œäº‘çš„ntpæœåŠ¡å™¨ntp.cloud.aliyuncs.com</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ntpdate ntp.cloud.aliyuncs.com</span><br><span class="line">23 May 14:43:07 ntpdate[9801]: step time server 100.100.61.88 offset 3.848040 sec</span><br></pre></td></tr></table></figure><p>ç„¶åå°†æ”¹åäº†åŠ å…¥crontabä»»åŠ¡ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="comment"># å°†ä¸‹é¢å‘½ä»¤æ·»åŠ åˆ°æœ€å</span></span><br><span class="line">* * * * * ntpdate ntp.cloud.aliyuncs.com</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºï¼Œä½†æ˜¯å®é™…è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œå‘ç°æœåŠ¡çš„å®é™…è¿˜æ˜¯è·ç¦»çœŸå®æ—¶é—´è¶Šæ¥è¶Šè¿œï¼Œæ„Ÿè§‰æ˜¯ntpdateå‘½ä»¤æ²¡æœ‰å·¥ä½œï¼Œäºæ˜¯å°†å®šæ—¶ä»»åŠ¡æ”¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * ntpdate ntp.cloud.aliyuncs.com &gt;&gt; /var/<span class="built_in">log</span>/myntp.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>ä¿å­˜è¿è¡Œé€€å‡ºåï¼ŒæŸ¥çœ‹ntpdateè¿è¡Œæ—¥å¿—ï¼Œæœç„¶å­˜åœ¨é—®é¢˜<code>/bin/sh: 1: ntpdate: not found</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tail -f myntp.log</span><br><span class="line">&#x2F;bin&#x2F;sh: 1: ntpdate: not found</span><br><span class="line">&#x2F;bin&#x2F;sh: 1: ntpdate: not found</span><br><span class="line">&#x2F;bin&#x2F;sh: 1: ntpdate: not found</span><br></pre></td></tr></table></figure><p>cronåœ¨è¿è¡Œæ—¶ï¼Œæ‰¾ä¸åˆ°ntpdateå‘½ä»¤ï¼Œç»§ç»­æ’æŸ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># which ntpdate</span></span><br><span class="line">/usr/sbin/ntpdate</span><br></pre></td></tr></table></figure><p>åœ¨crontabä»»åŠ¡ä¸­å¢åŠ ä¸€è¡Œ<code>* * * * * env &gt;&gt; /var/log/env.log 2&gt;&amp;1</code></p><p>å¹¶æŸ¥çœ‹æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tail -f env.log</span></span><br><span class="line">PATH=/usr/bin:/bin</span><br><span class="line">LANG=en_US.UTF-8</span><br><span class="line">SHELL=/bin/sh</span><br><span class="line">PWD=/root</span><br></pre></td></tr></table></figure><p>ç»ˆäºå‘ç°é—®é¢˜äº†ï¼Œcrontabè¿è¡Œæ—¶æŸ¥æ‰¾å‘½ä»¤çš„è·¯å¾„ä¸º<code>/usr/bin</code> å’Œ<code>/bin</code>ç›®å½•ï¼Œè€Œä¸åŒ…å«<code>/usr/sbin/</code></p><p>æˆ‘ä»¬å¯ä»¥åœ¨crontabä¸­å¢åŠ <code>PATH=$PATH:/usr/sbin/</code>,ä¹Ÿå¯ä»¥ä½¿ç”¨ntpdateçš„ç»å¯¹è·¯å¾„ï¼Œå°†ä¹‹å‰ntpdateä»»åŠ¡æ”¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * &#x2F;usr&#x2F;sbin&#x2F;ntpdate ntp.cloud.aliyuncs.com</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºåï¼Œè§‚å¯ŸæœåŠ¡å™¨æ—¶é—´ï¼Œå‘ç°å·²ç»å˜ä¸ºæ­£å¸¸æ—¶é—´äº†ã€‚</p><h2 id="crontabè®¾ç½®">crontabè®¾ç½®</h2><p>æœ€å‰é¢5æ®µç”¨äºè®¾ç½®å‘¨æœŸæ—¶é—´</p><p><img src="https://oss.smart-lifestyle.cn/file/rdivm.png" alt="image-20210521150550791"></p><p>è¿™é‡Œä¸¾ä¸€äº›å¸¸ç”¨çš„ä¾‹å­ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ª<a href="https://crontab.guru/" target="_blank" rel="noopener">ç½‘ç«™</a>è¿›è¡Œæµ‹è¯•</p><ul><li><p>æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</p><p><code>* * * * *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/sgflk.png" alt="image-20210521145726370"></p></li><li><p>æ¯éš”ååˆ†é’Ÿè¿è¡Œä¸€æ¬¡(ğŸ“¢è¿™é‡Œçš„æ¯ä¸ª10åˆ†é’Ÿï¼Œä¸æ˜¯ä»ç°åœ¨æˆ–è€…ä»»åŠ¡å¼€å§‹ç®—èµ·ï¼Œè€Œæ˜¯æ¯å°æ—¶çš„ç¬¬ååˆ†é’Ÿï¼Œ10ï¼Œ20ï¼Œ 30â€¦)</p><p><code>*/10 * * * *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/qpet2.png" alt="image-20210521145941538"></p></li><li><p>æ¯å¤©æ™šä¸Š23ï¼š55æ‰§è¡Œä¸€æ¬¡</p><p><code>55 23 * * *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/udg1l.png" alt="image-20210521150051826"></p></li><li><p>æ¯éš”ä¸¤ä¸ªæœˆçš„ç¬¬ä¸€å¤©æ™šä¸Š23ï¼š55æ‰§è¡Œä¸€æ¬¡ï¼ˆæ¯”å¦‚ç”¨äºsslè¯ä¹¦çš„æ›´æ–°ï¼‰</p><p><code>55 23 1 */2 *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/w278h.png" alt="image-20210521150255631"></p></li><li><p>æ¯å‘¨äº”æ™šä¸Š23ï¼š55å‘é€æŠ¥è¡¨</p><p><code>55 23 * * 5</code></p><p><img src="https://oss.smart-lifestyle.cn/file/xlh36.png" alt="image-20210521150430138"></p></li></ul><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] <a href="https://crontab.guru/#*_*_*_*_*" target="_blank" rel="noopener">crontab tool</a></p><p>[2] <a href="https://stackoverflow.com/questions/4811738/how-to-log-cron-jobs" target="_blank" rel="noopener">log cron jobs</a></p><p>[3] <a href="https://www.cnblogs.com/centos2017/p/12963610.html" target="_blank" rel="noopener">ntpdate: command not found</a></p>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨crontabå®šæœŸåŒæ­¥NTPæ—¶é—´
    
    </summary>
    
    
      <category term="linux" scheme="https://blog.smart-lifestyle.cn/categories/linux/"/>
    
    
      <category term="linux" scheme="https://blog.smart-lifestyle.cn/tags/linux/"/>
    
      <category term="crontab" scheme="https://blog.smart-lifestyle.cn/tags/crontab/"/>
    
  </entry>
  
  <entry>
    <title>rancherandgithub</title>
    <link href="https://blog.smart-lifestyle.cn/posts/a8ad/"/>
    <id>https://blog.smart-lifestyle.cn/posts/a8ad/</id>
    <published>2021-05-12T15:55:56.000Z</published>
    <updated>2021-05-22T11:19:02.817Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>rancheréƒ¨ç½²</title>
    <link href="https://blog.smart-lifestyle.cn/posts/ee95/"/>
    <id>https://blog.smart-lifestyle.cn/posts/ee95/</id>
    <published>2021-05-11T15:17:39.000Z</published>
    <updated>2021-05-22T11:19:02.819Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>traefik</title>
    <link href="https://blog.smart-lifestyle.cn/posts/7112/"/>
    <id>https://blog.smart-lifestyle.cn/posts/7112/</id>
    <published>2021-05-10T15:36:49.000Z</published>
    <updated>2021-05-22T11:19:02.819Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>sentryåˆè¯•ç‰›åˆ€</title>
    <link href="https://blog.smart-lifestyle.cn/posts/a9f1/"/>
    <id>https://blog.smart-lifestyle.cn/posts/a9f1/</id>
    <published>2021-05-08T15:50:12.000Z</published>
    <updated>2021-05-22T11:19:02.816Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="è¿ç»´" scheme="https://blog.smart-lifestyle.cn/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="sentry" scheme="https://blog.smart-lifestyle.cn/tags/sentry/"/>
    
  </entry>
  
  <entry>
    <title>pythonå¤šçº¿ç¨‹</title>
    <link href="https://blog.smart-lifestyle.cn/posts/76d7/"/>
    <id>https://blog.smart-lifestyle.cn/posts/76d7/</id>
    <published>2021-04-26T15:58:09.000Z</published>
    <updated>2021-05-22T11:19:02.816Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>mongo</title>
    <link href="https://blog.smart-lifestyle.cn/posts/1cbb/"/>
    <id>https://blog.smart-lifestyle.cn/posts/1cbb/</id>
    <published>2021-04-23T14:53:55.000Z</published>
    <updated>2021-05-22T11:19:02.814Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>JavaScriptæ·±åº¦æ‹·è´</title>
    <link href="https://blog.smart-lifestyle.cn/posts/b60b/"/>
    <id>https://blog.smart-lifestyle.cn/posts/b60b/</id>
    <published>2021-04-21T13:26:53.000Z</published>
    <updated>2021-05-22T11:19:02.812Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://blog.smart-lifestyle.cn/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>python thread result</title>
    <link href="https://blog.smart-lifestyle.cn/posts/5f19/"/>
    <id>https://blog.smart-lifestyle.cn/posts/5f19/</id>
    <published>2021-04-19T15:26:02.000Z</published>
    <updated>2021-05-22T11:19:02.815Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="thread" scheme="https://blog.smart-lifestyle.cn/tags/thread/"/>
    
  </entry>
  
  <entry>
    <title>nvmç”¨æ³•</title>
    <link href="https://blog.smart-lifestyle.cn/posts/688d/"/>
    <id>https://blog.smart-lifestyle.cn/posts/688d/</id>
    <published>2021-04-18T13:32:22.000Z</published>
    <updated>2021-05-22T11:19:02.814Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>pythonè¿›é˜¶--é­”æ³•å‡½æ•°</title>
    <link href="https://blog.smart-lifestyle.cn/posts/4e20/"/>
    <id>https://blog.smart-lifestyle.cn/posts/4e20/</id>
    <published>2021-04-18T13:28:29.000Z</published>
    <updated>2021-05-22T11:19:02.818Z</updated>
    
    <summary type="html">
    
      pythoné­”æ³•å‡½æ•°çš„ç”¨æ³•
    
    </summary>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/categories/python/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>gitä»“åº“ç”¨æˆ·æƒé™é—®é¢˜</title>
    <link href="https://blog.smart-lifestyle.cn/posts/f5f9/"/>
    <id>https://blog.smart-lifestyle.cn/posts/f5f9/</id>
    <published>2021-04-15T12:44:59.000Z</published>
    <updated>2021-04-15T13:12:50.868Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªgithubè´¦å·è¿›è¡Œä»£ç çš„æ‹‰å»å’Œæ¨é€ï¼Œä½†å‡å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œè€Œä¸”éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªgithubè´¦å·ï¼Œå¯èƒ½ä¼šå‡ºç°authentication error</p></blockquote><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>git config user.email</code>æ˜¯æ²¡æœ‰åŠæ³•æ›´æ”¹è¿™ä¸ªä»“åº“çš„è®¤è¯ä¿¡æ¯çš„</p><p>è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬é€šè¿‡httpsæ“ä½œä»“åº“æ—¶ï¼Œä¼šä½¿ç”¨ç¼“å­˜åœ¨æœ¬æœºçš„æˆæƒè®¤è¯ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¼šä½¿ç”¨ä¹‹å‰è´¦æˆ·çš„ä¿¡æ¯ã€‚</p><p>æ›´æ”¹æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œç»™ä»“åº“åœ°å€ä¸ŠåŠ ä¸Šä½ æ‰€è¦ä½¿ç”¨çš„ç”¨æˆ·å(username2)å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> repo</span><br><span class="line">git remote <span class="built_in">set</span>-url origin https://username2@github.com/&lt;username&gt;/repo</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/65932601/how-to-change-user-for-git-repository" target="_blank" rel="noopener">How to change user for git repository</a></p>]]></content>
    
    <summary type="html">
    
      åœ¨ä»“åº“åœ°å€ä¸ŠåŠ ä¸Šç”¨æˆ·åï¼Œæ¥æ›´æ”¹å¯¹è¯¥ä»“åº“çš„æˆæƒè®¤è¯
    
    </summary>
    
    
      <category term="git" scheme="https://blog.smart-lifestyle.cn/categories/git/"/>
    
    
      <category term="git" scheme="https://blog.smart-lifestyle.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>git abc tutorial</title>
    <link href="https://blog.smart-lifestyle.cn/posts/de34/"/>
    <id>https://blog.smart-lifestyle.cn/posts/de34/</id>
    <published>2021-03-31T14:19:56.000Z</published>
    <updated>2021-03-31T16:27:40.000Z</updated>
    
    <content type="html"><![CDATA[<h1>git-abc</h1><p>ä¸‹é¢ä»‹ç»ç»å¸¸ç”¨åˆ°ä¸”æœ€åŸºæœ¬çš„git å‘½ä»¤</p><h2 id="ä»“åº“ç®¡ç†">ä»“åº“ç®¡ç†</h2><h3 id="åˆ›å»ºæœ¬åœ°ä»“åº“">åˆ›å»ºæœ¬åœ°ä»“åº“</h3><ul><li><code>git init</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir git-abc</span><br><span class="line"><span class="built_in">cd</span> git-abc</span><br><span class="line">git init</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/qm2vb.png" alt="image-20210331222402099"></p><h3 id="æ·»åŠ è¿œç¨‹åˆ†æ”¯">æ·»åŠ è¿œç¨‹åˆ†æ”¯</h3><ul><li><code>git remote add &lt;shortname&gt; &lt;url&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/simplezhao/git-abc.git</span><br></pre></td></tr></table></figure><h3 id="æŠ“å–è¿œç¨‹ä»£ç ">æŠ“å–è¿œç¨‹ä»£ç </h3><ul><li><code>git fetch &lt;remote&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/48gpy.png" alt="image-20210331223237496"></p><h3 id="æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“">æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“</h3><ul><li><code>git remote show &lt;remote&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/50dkt.png" alt="image-20210331223628444"></p><h3 id="åŒæ­¥è¿œç¨‹åˆ†æ”¯">åŒæ­¥è¿œç¨‹åˆ†æ”¯</h3><ul><li><code>git checkout -b &lt;branch&gt; &lt;remote&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b main origin/main</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/vkntn.png" alt="image-20210331224921389"></p><h2 id="ä»£ç ç®¡ç†">ä»£ç ç®¡ç†</h2><h3 id="æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€">æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€</h3><ul><li><code>git status</code></li></ul><ol><li>ä¿®æ”¹readme.mdæ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>æç¤ºæ–‡ä»¶è¢«ä¿®æ”¹</p><p><img src="https://oss.smart-lifestyle.cn/file/jjthz.png" alt="image-20210331225856222"></p><ol start="2"><li>æ–°å¢ä¸€ä¸ªreadme_en.mdæ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>æç¤ºæœ‰æœªè·Ÿè¸ªçš„æ–‡ä»¶</p><p><img src="https://oss.smart-lifestyle.cn/file/ttydm.png" alt="image-20210331230055526"></p><h3 id="æ·»åŠ æ–‡ä»¶">æ·»åŠ æ–‡ä»¶</h3><ul><li><p><code>git add .</code> æ·»åŠ æ‰€æœ‰æ–‡ä»¶</p></li><li><p><code>git add &lt;file&gt;</code>æ·»åŠ æŒ‡å®šæ–‡ä»¶</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">git add .</span><br></pre></td></tr></table></figure><p>æ·»åŠ æˆåŠŸåï¼Œæ˜¾ç¤ºå‡†å¤‡æäº¤çš„æ–‡ä»¶</p><p><img src="https://oss.smart-lifestyle.cn/file/2m0ge.png" alt="image-20210331230400289"></p><h3 id="æäº¤æ–‡ä»¶">æäº¤æ–‡ä»¶</h3><ul><li><code>git commit -a</code> åœ¨é»˜è®¤ç¼–è¾‘å™¨å†…å¢åŠ æœ¬æ¬¡æäº¤å†…å®¹</li><li><code>git commit -m &lt;message&gt;</code>ç®€çŸ­æäº¤</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">"update readme file and add new readme for english version"</span></span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/xkx4s.png" alt="image-20210331230900239"></p><h3 id="æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯">æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯</h3><ul><li><code>git push &lt;shortname&gt; &lt;branch&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin main</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/136q4.png" alt="image-20210331231029318"></p><h3 id="æŸ¥çœ‹æäº¤è®°å½•">æŸ¥çœ‹æäº¤è®°å½•</h3><ul><li><code>git log</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/wvarp.png" alt="image-20210331231130554"></p><h2 id="ä»£ç åˆå¹¶">ä»£ç åˆå¹¶</h2><p>å¤šäººå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œéœ€è¦å…±åŒç»´æŠ¤åŒä¸€ä¸ªä»£ç åº“ï¼Œå‡å¦‚æ¯ä¸ªäººè´Ÿè´£ç‹¬ç«‹çš„æ¨¡å—ï¼Œä¸ä¼šæ¶‰åŠåˆ°ä»£ç å†²çª</p><p>æŸæ¬¡æäº¤æ—¶ï¼Œæç¤ºå¦‚ä¸‹é—®é¢˜</p><p><img src="https://oss.smart-lifestyle.cn/file/d62zw.png" alt="image-20210331232246543"></p><p>è¿™æ˜¯å› ä¸ºè¿œç¨‹åˆ†æ”¯è¦ä¼˜å…ˆæœ¬åœ°çš„åˆ†æ”¯ï¼Œéœ€è¦å…ˆæ‰§è¡Œgit pullï¼Œç„¶ååœ¨æ‰§è¡Œgit pushå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull origin main</span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œpullæ—¶ä¼šæç¤ºMergeä¿¡æ¯</p><p><img src="https://oss.smart-lifestyle.cn/file/xq0ww.png" alt="image-20210331232418971"></p><p>å®Œæˆå¹¶é€€å‡ºç¼–è¾‘åï¼Œæç¤ºpullä¿¡æ¯</p><p><img src="https://oss.smart-lifestyle.cn/file/ct9wp.png" alt="image-20210331232514825"></p><p>å†æ¬¡æ‰§è¡Œgit push origin mainï¼Œæ˜¾ç¤ºæäº¤æˆåŠŸ</p><p><img src="https://oss.smart-lifestyle.cn/file/lwto3.png" alt="image-20210331232632195"></p><h2 id="åˆ†æ”¯ç®¡ç†">åˆ†æ”¯ç®¡ç†</h2><h3 id="åˆ›å»ºæ–°çš„åˆ†æ”¯">åˆ›å»ºæ–°çš„åˆ†æ”¯</h3><ul><li><code>git branch &lt;branch&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch hotfix</span><br><span class="line">git checkout hotfix</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ”¯åˆå¹¶">åˆ†æ”¯åˆå¹¶</h3><p>åœ¨ä¸Šä¸€æ­¥æ“ä½œï¼Œå› ä¸ºç³»ç»Ÿå‡ºç°bugï¼Œç´§æ€¥åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶ååœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œä¿®å¤ï¼Œä¿®æ”¹æµ‹è¯•éªŒè¯å®Œæ¯•åï¼Œä»hotfixåˆ†æ”¯åˆå¹¶åˆ°mainåˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git merge hotfix</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/8q60h.png" alt="image-20210331235235214"></p><h3 id="åˆ†æ”¯åˆ é™¤">åˆ†æ”¯åˆ é™¤</h3><ul><li><code>git branch -d &lt;branch&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d hotfix</span><br></pre></td></tr></table></figure><h3 id="æ‰“æ ‡ç­¾">æ‰“æ ‡ç­¾</h3><ul><li><p><code>git tag</code></p></li><li><p><code>git tag -a &lt;version&gt; -m &lt;message&gt;</code></p></li></ul><p>é€šè¿‡<code>git tag</code>æŸ¥çœ‹ä»“åº“å†…å·²ç»å­˜åœ¨çš„æ ‡ç­¾åˆ—è¡¨</p><h4 id="åˆ›å»ºæ ‡ç­¾">åˆ›å»ºæ ‡ç­¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a <span class="string">'1.0'</span> -m <span class="string">"first version"</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨è½»é‡çº§æ ‡ç­¾</p><p><code>git tag 1.0-a</code></p><h4 id="å…±äº«æ ‡ç­¾">å…±äº«æ ‡ç­¾</h4><p>é»˜è®¤æƒ…å†µä¸‹ git pushå‘½ä»¤ä¸ä¼šæŠŠæ ‡ç­¾ä¼ é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå¿…é¡»æ˜¾å¼åœ°æ¨é€æ ‡ç­¾åˆ°æœåŠ¡å™¨ï¼Œç±»ä¼¼äºæ¨é€ä»£ç </p><p><code>git push &lt;shortname&gt; &lt;tagname&gt;</code></p><p>å¦‚æœæƒ³ä¸€æ¬¡æ¨é€å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p><p><code>git push &lt;shortname&gt; --tags</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin 1.0</span><br><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><p>æ¨é€æŒ‡å®šæ ‡ç­¾</p><p><img src="https://oss.smart-lifestyle.cn/file/o6cju.png" alt="image-20210401001342160"></p><p>æ¨é€æ‰€æœ‰æ ‡ç­¾</p><p><img src="https://oss.smart-lifestyle.cn/file/fyqxl.png" alt="image-20210401001405265"></p><h2 id="git-é…ç½®">git é…ç½®</h2><p>ä½¿ç”¨<code>git config -l </code>æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®</p><h3 id="é…ç½®å…¨å±€ä¿¡æ¯">é…ç½®å…¨å±€ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"yourname"</span></span><br><span class="line">git config --global user.email <span class="string">"youremail"</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®å½“å‰ä»“åº“ä¿¡æ¯">é…ç½®å½“å‰ä»“åº“ä¿¡æ¯</h3><p>å’Œå…¨å±€åŒºåˆ«åœ¨äºå»æ‰â€“globalæ ‡è®°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name <span class="string">"yourname"</span></span><br><span class="line">git config user.email <span class="string">"youremail"</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] <a href="https://git-scm.com/book/en/v2" target="_blank" rel="noopener">Book: Pro Git</a></p>]]></content>
    
    <summary type="html">
    
      æœ€å¸¸ç”¨ä¸”æœ€åŸºæœ¬çš„gitç”¨æ³•
    
    </summary>
    
    
      <category term="git" scheme="https://blog.smart-lifestyle.cn/categories/git/"/>
    
    
      <category term="git" scheme="https://blog.smart-lifestyle.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>python web--flask jsonify unicode</title>
    <link href="https://blog.smart-lifestyle.cn/posts/9b/"/>
    <id>https://blog.smart-lifestyle.cn/posts/9b/</id>
    <published>2021-03-31T08:10:09.000Z</published>
    <updated>2021-03-31T16:27:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç±»ä¼¼äºjson.dumpsä¸­ensure_asciiçš„é…ç½®ï¼Œåœ¨flaskä¸­ä¹Ÿæœ‰ç±»ä¼¼é…ç½®ï¼Œæ¥é¿å…jsonifyæ—¶ï¼Œè¿”å›unicodeç¼–ç å­—ç¬¦</p></blockquote><p>åœ¨flask configä¸­åŠ å…¥<code>app.config['JSON_AS_ASCII'] = False</code>æ¥é¿å…jsonifyå¯¹éasciiå­—ç¬¦è¿›è¡Œunicodeç¼–ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_object(app_config)</span><br><span class="line">app.config.from_mapping(</span><br><span class="line">    SQLALCHEMY_DATABASE_URI=<span class="string">f"postgresql+psycopg2://<span class="subst">&#123;app_config.DB_USER&#125;</span>:<span class="subst">&#123;app_config.DB_PASSWORD&#125;</span>"</span></span><br><span class="line">                            <span class="string">f"@<span class="subst">&#123;app_config.DB_HOST&#125;</span>:<span class="subst">&#123;app_config.DB_PORT&#125;</span>/<span class="subst">&#123;app_config.DB_NAME&#125;</span>"</span>,</span><br><span class="line">    SQLALCHEMY_TRACK_MODIFICATIONS=<span class="literal">False</span>,</span><br><span class="line">    <span class="comment"># SQLALCHEMY_ECHO=True</span></span><br><span class="line">)</span><br><span class="line">app.config[<span class="string">'JSON_AS_ASCII'</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] [<a href="https://stackoverflow.com/questions/37531067/how-to-prevent-unicode-representation-for-latin1-characters" target="_blank" rel="noopener">How to prevent Unicode representation for Latin1 characters?</a>]</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç±»ä¼¼äºjson.dumpsä¸­ensure_asciiçš„é…ç½®ï¼Œåœ¨flaskä¸­ä¹Ÿæœ‰ç±»ä¼¼é…ç½®ï¼Œæ¥é¿å…jsonifyæ—¶ï¼Œè¿”å›unicodeç¼–ç å­—ç¬¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨flask configä¸­åŠ å…¥&lt;code&gt;app.config[&#39;JSON_AS_ASCII&#39;] = False&lt;/code&gt;æ¥é¿å…jsonifyå¯¹éasciiå­—ç¬¦è¿›è¡Œunicodeç¼–ç &lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;app = Flask(__name__)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.config.from_object(app_config)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.config.from_mapping(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SQLALCHEMY_DATABASE_URI=&lt;span class=&quot;string&quot;&gt;f&quot;postgresql+psycopg2://&lt;span class=&quot;subst&quot;&gt;&amp;#123;app_config.DB_USER&amp;#125;&lt;/span&gt;:&lt;span class=&quot;subst&quot;&gt;&amp;#123;app_config.DB_PASSWORD&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &lt;span class=&quot;string&quot;&gt;f&quot;@&lt;span class=&quot;subst&quot;&gt;&amp;#123;app_config.DB_HOST&amp;#125;&lt;/span&gt;:&lt;span class=&quot;subst&quot;&gt;&amp;#123;app_config.DB_PORT&amp;#125;&lt;/span&gt;/&lt;span class=&quot;subst&quot;&gt;&amp;#123;app_config.DB_NAME&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SQLALCHEMY_TRACK_MODIFICATIONS=&lt;span class=&quot;literal&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# SQLALCHEMY_ECHO=True&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.config[&lt;span class=&quot;string&quot;&gt;&#39;JSON_AS_ASCII&#39;&lt;/span&gt;] = &lt;span class=&quot;literal&quot;&gt;False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;[1] [&lt;a href=&quot;https://stackoverflow.com/questions/37531067/how-to-prevent-unicode-representation-for-latin1-characters&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How to prevent Unicode representation for Latin1 characters?&lt;/a&gt;]&lt;/p&gt;
    
    </summary>
    
    
      <category term="flask" scheme="https://blog.smart-lifestyle.cn/categories/flask/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="flask" scheme="https://blog.smart-lifestyle.cn/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>python json.dumps unicode</title>
    <link href="https://blog.smart-lifestyle.cn/posts/b1/"/>
    <id>https://blog.smart-lifestyle.cn/posts/b1/</id>
    <published>2021-03-31T07:54:04.000Z</published>
    <updated>2021-03-31T16:27:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨dumps/dumpä¸­ä½¿ç”¨ensure_ascii=Falseï¼Œæ¥æ‰‹åŠ¨ç¼–ç ä¸ºUTF8æ ¼å¼</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># è¾“å‡ºä¸ºUnicodeç¼–ç ï¼Œä¸ä¾¿äºå¯è§†åŒ–</span></span><br><span class="line">&gt; json.dumps(<span class="string">"æˆ‘çˆ±ChinağŸ‡¨ğŸ‡³"</span>)</span><br><span class="line"><span class="string">'"\\u6211\\u7231China\\ud83c\\udde8\\ud83c\\uddf3"'</span></span><br><span class="line"></span><br><span class="line">&gt; json.dumps(<span class="string">"æˆ‘çˆ±ChinağŸ‡¨ğŸ‡³"</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="string">'"æˆ‘çˆ±ChinağŸ‡¨ğŸ‡³"'</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/18337407/saving-utf-8-texts-with-json-dumps-as-utf8-not-as-u-escape-sequence" target="_blank" rel="noopener">json dumps unicode</a></p>]]></content>
    
    <summary type="html">
    
      å¤„ç†json dumpsæ—¶ä¸­æ–‡æ˜¾ç¤ºunicodeç¼–ç 
    
    </summary>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/categories/python/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="json" scheme="https://blog.smart-lifestyle.cn/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>kombu.exceptions.EncodeError XXXX is not JSON serializable</title>
    <link href="https://blog.smart-lifestyle.cn/posts/3277/"/>
    <id>https://blog.smart-lifestyle.cn/posts/3277/</id>
    <published>2021-03-31T06:02:05.000Z</published>
    <updated>2021-03-31T06:51:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è®°å½•åœ¨ä½¿ç”¨celeryæ—¶ï¼Œä»»åŠ¡å‡½æ•°å‚æ•°åºåˆ—åŒ–é—®é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@celery_app.task(name="create_subscription")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_subscription_file</span><span class="params">(req: SubscriptionRequest)</span>:</span></span><br><span class="line"></span><br><span class="line">    req = SubscriptionRequest(**kwargs)</span><br><span class="line">    subscription_count = req.count</span><br><span class="line">    run_times = math.ceil(subscription_count / <span class="number">200</span>)</span><br><span class="line">    results = &#123;</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"validDateTime"</span>: <span class="literal">None</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionRequest</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    bearer_token: str = <span class="literal">None</span></span><br><span class="line">    validDateTime: datetime = <span class="literal">None</span></span><br><span class="line">    validPeriodTime: int = <span class="number">12</span></span><br><span class="line">    count: int = <span class="number">200</span></span><br><span class="line">    deviceTypeId: int = <span class="number">2</span></span><br><span class="line">    subscriptionLevelId: int = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">data_json</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.json(exclude=&#123;<span class="string">'bearer_token'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @validator('validDateTime')</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_default_date</span><span class="params">(cls, v)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> v <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            v = get_default_valid_datetime()</span><br><span class="line">        <span class="keyword">return</span> v</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">default</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.json()</span><br></pre></td></tr></table></figure><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå‡†å¤‡ä½¿ç”¨pydanticä½œä¸ºå‚æ•°æ ¡éªŒï¼Œå› æ­¤åœ¨ä¼ é€’ç»™celery taskæ—¶ï¼Œä¼ é€’äº†ä¸€ä¸ªclass Instanceï¼›æ¥ç€åœ¨ä»»åŠ¡è°ƒåº¦æ—¶æŠ¥é”™ï¼š</p><p><code>kombu.exceptions.EncodeError: SubscriptionRequest is not JSON serializable</code></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œcelery ä½¿ç”¨JSONè¿›è¡Œåºåˆ—åŒ–æ•°æ®ï¼Œå› æ­¤æ ¹æœ¬åŸå› åœ¨äºé»˜è®¤æƒ…å†µä¸‹classå®ä¾‹æ— æ³•è¢«jsonåºåˆ—åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; json.dumps(SubscriptionRequest)</span><br><span class="line">TypeError: Object of type SubscriptionRequest <span class="keyword">is</span> <span class="keyword">not</span> JSON serializable</span><br></pre></td></tr></table></figure><p>json.dumpsæœ‰ä¸€ä¸ªå‚æ•°defaultï¼Œåœ¨python docsæ–‡æ¡£ä¸­æè¿°å¦‚ä¸‹</p><blockquote><p>å½“ <em>default</em> è¢«æŒ‡å®šæ—¶ï¼Œå…¶åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¯å½“æŸä¸ªå¯¹è±¡æ— æ³•è¢«åºåˆ—åŒ–æ—¶å®ƒä¼šè¢«è°ƒç”¨ã€‚å®ƒåº”è¯¥è¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªå¯ä»¥è¢« JSON ç¼–ç çš„ç‰ˆæœ¬æˆ–è€…å¼•å‘ä¸€ä¸ª <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" target="_blank" rel="noopener"><code>TypeError</code></a>ã€‚å¦‚æœæ²¡æœ‰è¢«æŒ‡å®šï¼Œåˆ™ä¼šç›´æ¥å¼•å‘ <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" target="_blank" rel="noopener"><code>TypeError</code></a>ã€‚</p></blockquote><p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©defaultå‡½æ•°æ¥ä¸ºclasså®ä¾‹åˆ›å»ºä¸€ä¸ªæ–¹æ³•å®ç°å¯¹å…¶jsonåºåˆ—åŒ–ã€‚</p><p>è¿™é‡Œæ²¡æœ‰å¯¹ç±»è¿›è¡Œæ”¹é€ ï¼Œè€Œæ˜¯ä¼˜åŒ–å‡½æ•°çš„å…¥å‚</p><p>æœ€åæ”¹æˆï¼Œå…ˆä¼ é€’å‚æ•°åˆ°taskï¼Œç„¶ååœ¨taskå†…å¯¹æ‰€æœ‰å‚æ•°è¿›è¡Œpydantic æ ¡éªŒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@celery_app.task(name="create_subscription")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_subscription_file</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line"><span class="comment"># å¯¹kvå‚æ•°ä½¿ç”¨pydanticæ ¡éªŒ</span></span><br><span class="line">    req = SubscriptionRequest(**kwargs)</span><br><span class="line">    subscription_count = req.count</span><br><span class="line">    run_times = math.ceil(subscription_count / <span class="number">200</span>)</span><br><span class="line">    results = &#123;</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"validDateTime"</span>: <span class="literal">None</span></span><br><span class="line">    &#125;</span><br><span class="line">    result_queue = Queue()</span><br><span class="line">...</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/10252010/serializing-class-instance-to-json" target="_blank" rel="noopener">class serialize</a></p><p>[2] <a href="https://github.com/celery/celery/issues/5922" target="_blank" rel="noopener">github issue</a></p>]]></content>
    
    <summary type="html">
    
      celeryåºåˆ—åŒ–é—®é¢˜
    
    </summary>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/categories/python/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="celery" scheme="https://blog.smart-lifestyle.cn/tags/celery/"/>
    
  </entry>
  
  <entry>
    <title>pythonåŸºç¡€ -- pythonä¸excel-1</title>
    <link href="https://blog.smart-lifestyle.cn/posts/df7e/"/>
    <id>https://blog.smart-lifestyle.cn/posts/df7e/</id>
    <published>2021-03-30T14:33:16.000Z</published>
    <updated>2021-03-30T14:33:16.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨openpyxlå¯¹excelæ–‡ä»¶è¿›è¡Œè¯»å†™</p><p><a href="https://openpyxl.readthedocs.io/en/stable/tutorial.html" target="_blank" rel="noopener">å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£</a></p></blockquote><h2 id="å‡†å¤‡">å‡†å¤‡</h2><h3 id="excelåŸºæœ¬æœ¯è¯­">excelåŸºæœ¬æœ¯è¯­</h3><table><thead><tr><th>æœ¯è¯­</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>Spreadsheet or Workbook</td><td>excelæ–‡ä»¶</td></tr><tr><td>Worksheet or Sheet</td><td>è¡¨ï¼Œä¸€ä¸ªworkbook/spreadsheetå¯ä»¥æœ‰å¤šä¸ªsheet</td></tr><tr><td>Column</td><td>è¡¨æ ¼åˆ—Aâ€¦Zâ€¦</td></tr><tr><td>Row</td><td>è¡¨æ ¼è¡Œ1â€¦10â€¦</td></tr><tr><td>Cell</td><td>å•å…ƒæ ¼A1â€¦A2â€¦</td></tr></tbody></table><h3 id="å®‰è£…openpyxl">å®‰è£…openpyxl</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install openpyxl -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</h2><h3 id="æ–°å»ºworkbook">æ–°å»ºworkbook</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line">wb = Workbook()</span><br></pre></td></tr></table></figure><h3 id="åŠ è½½å·²ç»å­˜åœ¨çš„å·¥ä½œç°¿">åŠ è½½å·²ç»å­˜åœ¨çš„å·¥ä½œç°¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line">wb = load_workbook(<span class="string">'File Name'</span>)</span><br></pre></td></tr></table></figure><h3 id="é€‰æ‹©sheet">é€‰æ‹©sheet</h3><p>é»˜è®¤Workbookåˆ›å»ºæ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªsheetï¼Œé€šè¿‡<code>ws = wb.active</code> é€‰æ‹©å¹¶ä½¿ç”¨å®ƒ</p><p>å­˜åœ¨å¤šä¸ªsheetæ—¶ï¼Œå¯ä»¥é€šè¿‡<code>ws = wb[Sheet Name]</code> é€‰æ‹©æ‰€æœ‰æ“ä½œçš„sheetï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œé€‰æ‹©</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å½“å‰æ‰€æœ‰sheetname</span></span><br><span class="line">sheetlist = wb.sheetnames</span><br><span class="line"><span class="comment"># &gt;&gt; ['1st Sheet', 'æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic', 'æ ‡ç­¾å†…å®¹ä¿¡æ¯ -Standard', 'Readme', 'Add your sheets and content...']</span></span><br><span class="line">ws = wb[sheetlist[<span class="number">2</span>]] <span class="comment"># æˆ–è€…</span></span><br><span class="line">ws.active = <span class="number">2</span></span><br><span class="line">ws = wb.active</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰sheetåå­—</span></span><br><span class="line">ws.title</span><br><span class="line">&gt;&gt; æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic</span><br></pre></td></tr></table></figure><p><code>ws = wb[Sheet Name]</code> æ–¹æ³•æ²¡æœ‰æ”¹å˜å½“å‰æ´»è·ƒçš„è¡¨æ ¼å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wb.active</span><br><span class="line">&gt;&gt; &lt;Worksheet <span class="string">"æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic"</span>&gt;</span><br><span class="line">ws = wb[<span class="string">'æ ‡ç­¾å†…å®¹ä¿¡æ¯ -Standard'</span>]</span><br><span class="line">wb.active <span class="comment"># è¿˜æ˜¯è¿æ¥çš„å•å…ƒæ ¼</span></span><br><span class="line">&gt;&gt; &lt;Worksheet <span class="string">"æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic"</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºsheet">æ–°å»ºsheet</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æ’åœ¨æœ€åä½ç½®</span></span><br><span class="line">ws = wb.create_sheet(<span class="string">'Sheet Name'</span>)</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åœ¨sheet nameå‚æ•°åå¢åŠ ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºåˆ›å»ºä½ç½®</span></span><br><span class="line">ws = wb.create_sheet(<span class="string">'Sheet Name'</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹sheet-tittle">ä¿®æ”¹sheet tittle</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ws.title = New Title</span><br></pre></td></tr></table></figure><h3 id="å†™å…¥å•å…ƒæ ¼">å†™å…¥å•å…ƒæ ¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ws[<span class="string">'A1'</span>] = <span class="string">'Name'</span></span><br><span class="line">ws[<span class="string">'B1'</span>] = <span class="string">'Age'</span></span><br><span class="line">ws[<span class="string">'C1'</span>] = <span class="string">'score'</span></span><br><span class="line">ws[<span class="string">'A2'</span>] = <span class="string">'å¼ ä¸‰'</span></span><br><span class="line">ws[<span class="string">'B2'</span>] = <span class="number">18</span></span><br><span class="line">ws[<span class="string">'C3'</span>] = <span class="number">95</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹">æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ws[<span class="string">'A2'</span>].value</span><br><span class="line">&gt;&gt; <span class="string">'å¼ ä¸‰'</span></span><br></pre></td></tr></table></figure><h3 id="ä¿å­˜æ–‡ä»¶-å·¥ä½œç°¿">ä¿å­˜æ–‡ä»¶/å·¥ä½œç°¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœfilenameå·²ç»å­˜åœ¨ï¼Œä¼šæ²¡æœ‰ç¡®è®¤çš„ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶</span></span><br><span class="line">wb.save(filename)</span><br></pre></td></tr></table></figure><h3 id="å…³é—­å·¥ä½œç°¿">å…³é—­å·¥ä½œç°¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯èƒ½æ²¡æœ‰ç”¨ï¼Ÿ</span></span><br><span class="line">wb.close()</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p>[1] <a href="https://openpyxl.readthedocs.io/en/stable/tutorial.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p>[2] <a href="https://stackoverflow.com/questions/41556378/openpyxl-set-active-sheet/50117733" target="_blank" rel="noopener">é€‰æ‹©sheet</a></p><p>[3] <a href="https://realpython.com/openpyxl-excel-spreadsheets-python/" target="_blank" rel="noopener">realpython openpyxl guide</a></p>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨openpyxlå¯¹excelè¯»å†™æ“ä½œ
    
    </summary>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/categories/python/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="excel" scheme="https://blog.smart-lifestyle.cn/tags/excel/"/>
    
  </entry>
  
  <entry>
    <title>python web -- pydanticåŸºç¡€ç”¨æ³•-1</title>
    <link href="https://blog.smart-lifestyle.cn/posts/e075/"/>
    <id>https://blog.smart-lifestyle.cn/posts/e075/</id>
    <published>2021-03-29T15:37:08.000Z</published>
    <updated>2021-03-29T15:37:08.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨pydanticæ ¡éªŒè¾“å…¥å‚æ•°ï¼Œå¯ä»¥çœå»åç»­å‡½æ•°ä½“å†…çš„æ ¡éªŒï¼Œå¹¶å¯ä»¥ä½œä¸ºä¸€ä¸ªé€šç”¨çš„æ ¡éªŒå™¨æ–¹ä¾¿å…¶ä»–æ–¹æ³•è°ƒç”¨ï¼Œåšçš„å…¥å‚æ ¡éªŒä¸å…¥å‚è°ƒç”¨çš„è§£è€¦</p><p>è‘—åçš„FastAPIæ¡†æ¶ï¼Œä¹Ÿæ˜¯ä½¿ç”¨çš„pydanticä½œä¸ºhttpè¯·æ±‚ä¸­å‚æ•°çš„æ ¡éªŒ</p></blockquote><h3 id="å®‰è£…">å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># need python3.6+</span></span><br><span class="line">pip install pydantic -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬æ¨¡å‹ç”¨æ³•">åŸºæœ¬æ¨¡å‹ç”¨æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># model.py</span></span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, validator</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ¨¡å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionRequest</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    bearer_token: str = <span class="literal">None</span></span><br><span class="line">    validDateTime: str = <span class="literal">None</span></span><br><span class="line">    validPeriodTime: int = <span class="number">12</span></span><br><span class="line">    count: int = <span class="number">200</span></span><br><span class="line">    deviceTypeId: int = <span class="number">2</span></span><br><span class="line">    subscriptionLevelId: int = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å¾—jsonæ ¼å¼å†…å®¹ï¼Œä¸è¿”è¿˜bearer_token</span></span><br><span class="line">    <span class="comment"># def data_json(self):</span></span><br><span class="line">    <span class="comment">#    return self.json(exclude=&#123;'bearer_token'&#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ ¡éªŒå‚æ•°</span></span><br><span class="line">    <span class="comment"># @validator('validDateTime')</span></span><br><span class="line">    <span class="comment"># def create_default_date(cls, v):</span></span><br><span class="line">    <span class="comment">#    if v is None:</span></span><br><span class="line">    <span class="comment">#        v = get_default_valid_datetime().strftime("%Y-%m-%dT23:59:59.000Z")</span></span><br><span class="line">    <span class="comment">#    return v</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºç»™æ¨¡å‹ä¸­æ¯ä¸ªå­—æ®µéƒ½è®¾ç½®äº†é»˜è®¤å€¼ï¼Œåœ¨æ²¡æœ‰ä¼ å…¥å‚æ•°æ—¶ä¹Ÿä¸ä¼šæŠ¥é”™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="keyword">from</span> model <span class="keyword">import</span> SubscriptionRequest</span><br><span class="line">&gt;&gt; m = SubscriptionRequest()</span><br><span class="line">&gt;&gt; print(m)</span><br><span class="line">bearer_token=<span class="literal">None</span> validDateTime=<span class="literal">None</span> validPeriodTime=<span class="number">12</span> count=<span class="number">200</span> deviceTypeId=<span class="number">2</span> subscriptionLevelId=<span class="number">2</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨å°†æ¨¡å‹æ–‡ä»¶ä¸­ä¸€äº›å‚æ•°é»˜è®¤å€¼å»æ‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># model.py</span></span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, validator</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ¨¡å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionRequest</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    bearer_token: str</span><br><span class="line">    validDateTime: str</span><br><span class="line">    validPeriodTime: int = <span class="number">12</span></span><br><span class="line">    count: int = <span class="number">200</span></span><br><span class="line">    deviceTypeId: int = <span class="number">2</span></span><br><span class="line">    subscriptionLevelId: int = <span class="number">2</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ç»§ç»­æ‰§è¡Œï¼Œå°†ä¼šæç¤ºå‚æ•°ç¼ºå¤±</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="keyword">from</span> model <span class="keyword">import</span> SubscriptionRequest</span><br><span class="line">&gt;&gt; m = SubscriptionRequest()</span><br><span class="line">&gt;&gt; print(m)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Users/simple/workspace/Columbus/admin_tools/serializer.py"</span>, line <span class="number">60</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    m = SubscriptionRequest()</span><br><span class="line">  File <span class="string">"pydantic/main.py"</span>, line <span class="number">391</span>, <span class="keyword">in</span> pydantic.main.BaseModel.__init__</span><br><span class="line">pydantic.error_wrappers.ValidationError: <span class="number">2</span> validation errors <span class="keyword">for</span> SubscriptionRequest</span><br><span class="line">bearer_token</span><br><span class="line">  field required (type=value_error.missing)</span><br><span class="line">validDateTime</span><br><span class="line">  field required (type=value_error.missing)</span><br></pre></td></tr></table></figure><p>æ­£å¸¸ç”¨æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; data= &#123;</span><br><span class="line"><span class="meta">... </span>       <span class="string">'bearer_token'</span>: <span class="string">'1234567=='</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">'validDateTime'</span>: <span class="literal">None</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">'validPeriodTime'</span>: <span class="number">12</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">'count'</span>: <span class="number">12</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">'deviceTypeId'</span>: <span class="number">2</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">'subscriptionLevelId'</span>: <span class="number">2</span></span><br><span class="line"><span class="meta">... </span>   &#125;</span><br><span class="line">&gt;&gt; m = SubscriptionRequest(**data)</span><br><span class="line">&gt;&gt; print(m)</span><br><span class="line">bearer_token=<span class="string">'1234567=='</span> validDateTime=<span class="string">'2022-09-01T23:59:59.000Z'</span> validPeriodTime=<span class="number">12</span> count=<span class="number">12</span> deviceTypeId=<span class="number">2</span> subscriptionLevelId=<span class="number">2</span></span><br><span class="line"><span class="comment"># è¾“å‡ºjsonæ ¼å¼</span></span><br><span class="line">&gt;&gt; m.json()</span><br><span class="line">&#123;<span class="string">"bearer_token"</span>: <span class="string">"1234567=="</span>, <span class="string">"validDateTime"</span>: <span class="string">"2022-09-01T23:59:59.000Z"</span>, <span class="string">"validPeriodTime"</span>: <span class="number">12</span>, <span class="string">"count"</span>: <span class="number">12</span>, <span class="string">"deviceTypeId"</span>: <span class="number">2</span>, <span class="string">"subscriptionLevelId"</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿”å›jsonç»“æœä¸­ï¼Œé™¤äº†bearer_tokenï¼Œå…¶ä»–éƒ½æ˜¯è¦èµ‹å€¼ç»™body jsonï¼Œå› æ­¤æƒ³åœ¨jsonè¾“å‡ºä¸­å»é™¤</p><p><code>bearer_token</code></p><p>åœ¨æ¨¡å‹ç±»ä¸­å¢åŠ å¦‚ä¸‹æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è·å¾—jsonæ ¼å¼å†…å®¹ï¼Œä¸è¿”è¿˜bearer_token</span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">data_json</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.json(exclude=&#123;<span class="string">'bearer_token'</span>&#125;)</span><br></pre></td></tr></table></figure><p>åŒæ ·å¦‚æœæƒ³å¯¹è¾“å…¥çš„å‚æ•°åšå…·ä½“æ ¡éªŒï¼ŒvalidDateTimeå¦‚æœä¸ºNoneï¼Œå°±ä¸ºå®ƒèµ‹å€¼ä¸€ä¸ªæ—¶é—´æˆ³</p><p>åœ¨æ¨¡å‹ç±»ä¸­å¢åŠ ä¸€ä¸ªvalidator</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¡éªŒå‚æ•°</span></span><br><span class="line"><span class="meta">     @validator('validDateTime')</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">create_default_date</span><span class="params">(cls, v)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> v <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            v = get_default_valid_datetime().strftime(<span class="string">"%Y-%m-%dT23:59:59.000Z"</span>)</span><br><span class="line">        <span class="keyword">return</span> v</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_default_valid_datetime</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    é»˜è®¤æœ‰æ•ˆæœŸæ—¶é—´ä¸ºå½“å‰æ—¶é—´+1å¹´åŠ</span></span><br><span class="line"><span class="string">    :return: æ—¶é—´æˆ³å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    diff = <span class="number">365</span> + int(<span class="number">365</span>/<span class="number">2</span>)</span><br><span class="line">    valid_datetime = datetime.utcnow() + timedelta(days=diff)</span><br><span class="line">    <span class="comment"># return valid_datetime.strftime("%Y-%m-%dT23:59:59.000Z")</span></span><br><span class="line">    <span class="keyword">return</span> valid_datetime</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯validatorè£…é¥°çš„ä¸ºç±»å‡½æ•°ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºclsï¼Œä¸æ˜¯selfï¼Œå¦å¤–è¿™ä¸ªå‡½æ•°è¿˜æœ‰å…¶ä»–å‚æ•°</p><ul><li><p>v ä¸ºå½“å‰å‚æ•°çš„å€¼</p></li><li><p>valuesä¸ºå½“å‰ä¼ é€’åˆ°æ¨¡å‹æ‰€æœ‰å‚æ•°çš„å­—å…¸é›†åˆï¼Œæ¯”å¦‚é€šè¿‡values[â€˜countâ€™] æ¥è·å–countçš„å€¼</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@validator('validDateTime')</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">create_default_date</span><span class="params">(cls, v, values, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><strong>å¦å¤–å¦‚æœæ ¡éªŒçš„å‚æ•°æ²¡æœ‰ä¼ é€’ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¸ä¼šè°ƒç”¨æ ¡éªŒæ–¹æ³•</strong></p><h3 id="å‚è€ƒ">å‚è€ƒ</h3><p>[1] <a href="https://pydantic-docs.helpmanual.io/usage/validators/" target="_blank" rel="noopener">pydantic validators</a></p><p>[2] <a href="https://pydantic-docs.helpmanual.io/usage/exporting_models/#json_encoders" target="_blank" rel="noopener">export json</a></p><p>[3] <a href="https://pydantic-docs.helpmanual.io/install/" target="_blank" rel="noopener">install</a></p><p>[4] <a href="https://pydantic-docs.helpmanual.io/usage/models/" target="_blank" rel="noopener">basic models</a></p>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨pydanticå¯¹å…¥å‚æ ¡éªŒ
    
    </summary>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/categories/python/"/>
    
    
      <category term="python" scheme="https://blog.smart-lifestyle.cn/tags/python/"/>
    
      <category term="pydantic" scheme="https://blog.smart-lifestyle.cn/tags/pydantic/"/>
    
  </entry>
  
</feed>
