<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åœ¨apple M1ä¸Šæ„å»ºx86_64 Dockeré•œåƒ</title>
      <link href="/posts/de6/"/>
      <url>/posts/de6/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤é€šè¿‡<code>docker build</code>æ–¹å¼æ„å»ºçš„é•œåƒæ—¶arm64çš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡<code>docker inspect IMAGE_ID</code>æŸ¥çœ‹åˆ°</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># docker image inspect <span class="number">0382</span>b9b17bdb</span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;Architecture&quot;</span>: <span class="string">&quot;arm64&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;Variant&quot;</span>: <span class="string">&quot;v8&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;Os&quot;</span>: <span class="string">&quot;linux&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;Size&quot;</span>: <span class="number">223036168</span>,</span><br><span class="line">        <span class="attr">&quot;VirtualSize&quot;</span>: <span class="number">223036168</span>,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„é•œåƒæ—¶æ²¡æœ‰åŠæ³•åœ¨Intel x86/64çš„å®¹å™¨æœåŠ¡ä¸­è¿è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŸºäºarmç‰ˆæœ¬æœåŠ¡å™¨çš„å®¹å™¨æœåŠ¡ï¼Œæ›´å¥½çš„é€‰æ‹©æ˜¯åœ¨M1ä¸Šç¼–è¯‘ x86æ¶æ„çš„å®¹å™¨é•œåƒ</p><p>Docker Desktop for Mac M1ä¸­é›†æˆäº†ä¸€ä¸ªbuildxçš„å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬ç¼–è¯‘å„ç§è·¨å¹³å°çš„å®¹å™¨é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker buildx ls</span><br><span class="line"></span><br><span class="line">desktop-linux desktop-linux   running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6</span><br><span class="line">default *       docker</span><br><span class="line">  default       default         running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨docker buildx buildæ¥æ„å»ºX86/64 dockeré•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker buildx build --platform=linux/amd64 . -t xxx</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯æŒ‰ç…§æ­£å¸¸çš„docker tagã€docker pushè¿›è¡Œæ“ä½œ</p><p>æ›´å¤šçš„å‘½ä»¤å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://blog.jaimyn.dev/how-to-build-multi-architecture-docker-images-on-an-m1-mac/">How to build x86 (and others!) Docker images on an M1 Mac â€“ Jaimynâ€™s Blog</a></p><p>[2] <a href="https://github.com/docker/buildx/blob/master/docs/reference/buildx_build.md">buildx/buildx_build.md at master Â· docker/buildx (github.com)</a></p><p>[3] <a href="https://docs.docker.com/buildx/working-with-buildx/">Docker Buildx | Docker Documentation</a></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> Apple M1 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntuæ›´æ”¹ä¸»æœºå</title>
      <link href="/posts/62e8/"/>
      <url>/posts/62e8/</url>
      
        <content type="html"><![CDATA[<ul><li>å¢åŠ æˆ–è€…ä¿®æ”¹<code>/etc/hostname</code>ï¼Œæ·»åŠ æ–°çš„ä¸»æœºå</li><li>ä¿®æ”¹<code>/etc/hosts</code>ï¼Œåœ¨127.0.0.1ä¸­æ·»åŠ æ–°çš„ä¸»æœºå</li><li>å¦‚æœæ˜¯åœ¨äº‘ä¸Šè¿è¡Œvmå®ä¾‹ï¼Œéœ€è¦ä¿®æ”¹ä¸Šé¢çš„<code>/etc/cloud/cloud.cfg</code>ï¼Œå¦åˆ™é‡å¯æœºå™¨åï¼Œhostnameä¼šå˜ä¸ºé»˜è®¤å€¼ğŸ˜­ï¼›æ‰¾åˆ°<code>preserve_hostname</code>ï¼Œå°†å…¶å€¼æ”¹ä¸º<code>true</code></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://www.myfreax.com/how-to-change-hostname-on-ubuntu-20-04/">å¦‚ä½•åœ¨Ubuntu 20.04ä¸Šæ›´æ”¹ä¸»æœºå (myfreax.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux shellå‚æ•°ä¼ é€’</title>
      <link href="/posts/fab/"/>
      <url>/posts/fab/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>$#</th><th>å‚æ•°æ•°é‡</th></tr></thead><tbody><tr><td></td><td></td></tr><tr><td>$n</td><td>è¡¨ç¤ºç¬¬nä¸ªå‚æ•°ï¼Œnä¸º0æ—¶è¡¨ç¤ºè¿è¡Œçš„è„šæœ¬å</td></tr><tr><td>$@</td><td>â€œ$1â€ â€œ$2â€ â€œ$3â€â€¦. ä¼ é€’çš„å¤šä¸ªå‚æ•°</td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;total params: $#&quot;</span><br><span class="line">echo &quot;filename: $0&quot;</span><br><span class="line">echo &quot;param1: $1&quot;</span><br><span class="line">echo &quot;param2: $2&quot;</span><br><span class="line">echo &quot;param3: $3&quot;</span><br><span class="line">echo &quot;==============&quot;</span><br><span class="line">for i in &quot;$@&quot;; do</span><br><span class="line">    echo &quot;param: $i&quot;</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">total params: 2</span><br><span class="line">filename: ./test.sh</span><br><span class="line">param1: x1</span><br><span class="line">param2: x2</span><br><span class="line">param3:</span><br><span class="line">==============</span><br><span class="line">param: x1</span><br><span class="line">param: x2</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://www.runoob.com/linux/linux-shell-passing-arguments.html">Shell ä¼ é€’å‚æ•° | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLè¿æ¥å­—ç¬¦ä¸²ä¸­å¯†ç åŒ…å«ç‰¹æ®Šå­—ç¬¦</title>
      <link href="/posts/1538/"/>
      <url>/posts/1538/</url>
      
        <content type="html"><![CDATA[<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ•°æ®åº“çš„å¯†ç ä¼šåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚æœåŒ…å«äº†<code>@</code>ç­‰ç¬¦å·ï¼Œä¼šè¢«create_engineè¯†åˆ«é”™è¯¯ã€‚</p><p>å¯ä»¥å¯¹å¯†ç è¿›è¡Œurlç¼–ç ï¼Œä½¿ç”¨<code>urllib.parse.quote_plus</code></p><blockquote><p>As the URL is like any other URL, <strong>special characters such as those that may be used in the password need to be URL encoded to be parsed correctly.</strong>. Below is an example of a URL that includes the password <code>&quot;kx%jj5/g&quot;</code>, where the percent sign and slash characters are represented as <code>%25</code> and <code>%2F</code>, respectively:</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">username = <span class="string">&#x27;scoot&#x27;</span></span><br><span class="line">password = <span class="string">&#x27;@#@%/g&#x27;</span></span><br><span class="line"></span><br><span class="line">engine = create_engine(<span class="string">f&#x27;postgresql://<span class="subst">&#123;username&#125;</span>:<span class="subst">&#123;urllib.parse.quote_plus(password)&#125;</span>@localhost:5432/mydatabase&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.sqlalchemy.org/en/14/core/engines.html">Engine Configuration â€” SQLAlchemy 1.4 Documentation</a></p>]]></content>
      
      
      <categories>
          
          <category> SQLAlchemy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> SQLAlchemy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonæ–‡ä»¶åæ“ä½œ</title>
      <link href="/posts/bea3/"/>
      <url>/posts/bea3/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æˆ–è€…æ–‡ä»¶è½¬æ¢æ—¶ï¼Œéœ€è¦è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼ˆè¯»å–å®Œæ•´çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼‰ï¼Œæ–‡ä»¶ä¿å­˜ï¼ˆä»…æ–‡ä»¶åï¼‰ï¼Œæ ¼å¼è½¬æ¢ï¼ˆä¸åŒ…å«åç¼€çš„æ–‡ä»¶åä»¥åŠåç¼€åï¼‰</p><p>ä½¿ç”¨åˆ°pythonåº“æœ‰ï¼š</p><ul><li><p>os.path.splitext()</p><p>åˆ†ç¦»æ–‡ä»¶åå’Œæ–‡ä»¶åç¼€ï¼Œä»¥æœ€åä¸€ä¸ªâ€™.â€™æ¥è·å–æ–‡ä»¶åç¼€</p></li><li><p>os.path.split()</p><p>åˆ†ç¦»æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶å</p></li></ul><ol><li>os.path.splitext()</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> os.path <span class="keyword">import</span> splitext</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>splitext(<span class="string">&#x27;/Users/simple/workspace/tmp/traefik/docker-compose.yml&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;/Users/simple/workspace/tmp/traefik/docker-compose&#x27;</span>, <span class="string">&#x27;.yml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¾“å…¥æ˜¯ä¸€ä¸ªä¸åŒ…å«è·¯å¾„çš„éšè—æ–‡ä»¶æ ¼å¼ï¼Œåç¼€è¿”å›ä¸ºç©º</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>splitext(<span class="string">&#x27;.bashrc&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;.bashrc&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>os.path.split()</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> os.path <span class="keyword">import</span> split</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>split(<span class="string">&#x27;/Users/simple/workspace/tmp/traefik/docker-compose.yml&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;/Users/simple/workspace/tmp/traefik&#x27;</span>, <span class="string">&#x27;docker-compose.yml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¾“å…¥ä¸ºä¸€ä¸ªä¸å«è·¯å¾„çš„ä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼Œè·¯å¾„è¿”å›ä¸ºç©º</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>split(<span class="string">&#x27;.bascrc&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;.bascrc&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.python.org/3/library/os.path.html">os.path â€” Common pathname manipulations â€” Python 3.9.6 documentation</a></p><p>[2] <a href="https://blog.csdn.net/lilongsy/article/details/99853925">Pythonè·å–æ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶åå’Œæ‰©å±•å_å°é¾™åœ¨çº¿-CSDNåšå®¢_python è·å–è·¯å¾„æ–‡ä»¶å</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> file </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿®æ”¹SQL Serverè¿æ¥å­—ç¬¦ä¸²</title>
      <link href="/posts/3178/"/>
      <url>/posts/3178/</url>
      
        <content type="html"><![CDATA[<blockquote><p>com.microsoft.sql server.jdbc.sqlserverException:é©±åŠ¨ç¨‹åºæ— æ³•ä½¿ç”¨å®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSSLï¼‰åŠ å¯†å»ºç«‹åˆ°SQL Serverçš„å®‰å…¨è¿æ¥</p></blockquote><p>åœ¨é«˜çº§è®¾ç½®ä¸­trustServerCertificateæ”¹ä¸ºtrueå³å¯</p><p><img src="https://oss.smart-lifestyle.cn/file/cs6v8.png" alt="image-20210630111813541"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://www.baooytra.com/knowledge/questions/56246/modifying-sql-server-connection-string.html?smartspace=fme-desktop-getting-started_2">ä¿®æ”¹SQL Serverè¿æ¥å­—ç¬¦ä¸²-FMEç¤¾åŒº - äºšæåœ¨çº¿ (baooytra.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> sqlserverException </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°è®¡ç®—ä¸­pythonä¾èµ–åŒ…æ‰“åŒ…</title>
      <link href="/posts/990c/"/>
      <url>/posts/990c/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹æ“ä½œä½¿ç”¨äºåä¸ºäº‘çš„<a href="https://support.huaweicloud.com/functiongraph/">functiongraph</a>å’Œè…¾è®¯äº‘çš„<a href="https://cloud.tencent.com/document/product/583/9199">serverless</a></p><p><em>ï¼æœ‰äº›åŒ…éœ€è¦ç¼–è¯‘ï¼Œå› æ­¤å»ºè®®åœ¨centos7ä¸­è¿›è¡Œæ“ä½œ</em></p><h3 id="å‡†å¤‡å†…å®¹"><a href="#å‡†å¤‡å†…å®¹" class="headerlink" title="å‡†å¤‡å†…å®¹"></a>å‡†å¤‡å†…å®¹</h3><ol><li>Centos7 + python3.6ç¯å¢ƒ + zip</li><li>requirements.txt</li></ol><h3 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h3><ul><li><p>å®‰è£…ä¾èµ–åˆ°æœ¬åœ°æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">mkdir new_dir</span><br><span class="line"><span class="comment"># pythonä¾èµ–åŒ…å®‰è£…åˆ°æŒ‡å®šç›®å½•, -tå°†æ‰€æœ‰ä¾èµ–å®‰è£…åˆ°new_dirç›®å½•</span></span><br><span class="line">pip install -r requirements-prod.txt -t  new_dir/</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æ‰“åŒ…æˆzipåŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥åˆ°å®‰è£…ç›®å½•æ–‡ä»¶å¤¹é‡Œ</span></span><br><span class="line"><span class="built_in">cd</span> new_dir</span><br><span class="line"><span class="comment"># å‹ç¼©ä¸ºzipåŒ…(æ‰“åŒ…çš„ä¸ºé‡Œé¢çš„æ–‡ä»¶ï¼Œä¸æ˜¯new_dirè¿™ä¸ªç›®å½•)</span></span><br><span class="line">zip -rq package_name.1.1.zip *</span><br></pre></td></tr></table></figure></li><li><p>ä¸Šä¼ </p><p>æ ¹æ®å„ä¸ªäº‘çš„è¦æ±‚ï¼Œå°†zipåŒ…ä¸Šä¼ ï¼Œå¦‚æœzipåŒ…å¤ªå¤§ï¼Œä¸€èˆ¬éƒ½è¦æ±‚å…ˆä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨ä¸­</p></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://cloud.tencent.com/document/product/583/9702">äº‘å‡½æ•° éƒ¨ç½²å‡½æ•° - æ“ä½œæŒ‡å— - æ–‡æ¡£ä¸­å¿ƒ - è…¾è®¯äº‘ (tencent.com)</a></p><p>[2] <a href="https://support.huaweicloud.com/functiongraph_faq/functiongraph_03_0343.html">å¦‚ä½•åˆ¶ä½œå‡½æ•°ä¾èµ–åŒ…ï¼Ÿ_å‡½æ•°å·¥ä½œæµ FunctionGraph_å¸¸è§é—®é¢˜_é€šç”¨é—®é¢˜_åä¸ºäº‘ (huaweicloud.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> serverless </category>
          
      </categories>
      
      
        <tags>
            
            <tag> function </tag>
            
            <tag> serverless </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker run -- ä½¿ç”¨ç¯å¢ƒå˜é‡</title>
      <link href="/posts/50db/"/>
      <url>/posts/50db/</url>
      
        <content type="html"><![CDATA[<ul><li><p>docker run</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ -e, --env</span></span><br><span class="line">docker run -e ENV=prod --env IP=1.2.3.4 .....</span><br><span class="line"><span class="comment"># å¦‚æœåªå£°æ˜å˜é‡ï¼Œæ²¡æœ‰å€¼ï¼Œè¡¨ç¤ºä»ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­è·å–æ”¹å€¼</span></span><br><span class="line"><span class="built_in">export</span> secret=%$<span class="comment">#$FG</span></span><br><span class="line">docker run -e secret --env IP=1.2.3.4 .....</span><br><span class="line"><span class="comment"># ä»æ–‡ä»¶ä¸­è·å–</span></span><br><span class="line">cat .env</span><br><span class="line"><span class="comment"># ENV=prod</span></span><br><span class="line"><span class="comment"># IP=1.2.3.4</span></span><br><span class="line"></span><br><span class="line">docker run --env-file .env .....</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker commit -- åŸºäºå®¹å™¨åˆ›å»ºé•œåƒ</title>
      <link href="/posts/d17f/"/>
      <url>/posts/d17f/</url>
      
        <content type="html"><![CDATA[<ul><li>docker commit å‘½ä»¤<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬ç”¨æ³•</span></span><br><span class="line">docker commit container_id image_name:tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæƒ³ä¿®æ”¹æŸäº›å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨--change</span></span><br><span class="line">docker commit --change <span class="string">&quot;ENV DEBUG=true&quot;</span> container_id image_name:tag</span><br><span class="line">docker commit --change=<span class="string">&#x27;CMD [&quot;python&quot;, &quot;app.py&quot;]&#x27;</span> container_id image_name:tag</span><br><span class="line">docker commit --change <span class="string">&quot;EXPOSE 80&quot;</span> container_id image_name:tag</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.docker.com/engine/reference/commandline/commit/">docker commit | Docker Documentation</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Alphaã€Betaã€RCã€GAç‰ˆæœ¬çš„åŒºåˆ«</title>
      <link href="/posts/a038/"/>
      <url>/posts/a038/</url>
      
        <content type="html"><![CDATA[<ul><li><p>Alphaï¼šæ˜¯å†…éƒ¨æµ‹è¯•ç‰ˆ,ä¸€èˆ¬ä¸å‘å¤–éƒ¨å‘å¸ƒ,ä¼šæœ‰å¾ˆå¤šBug.ä¸€èˆ¬åªæœ‰æµ‹è¯•äººå‘˜ä½¿ç”¨ã€‚</p></li><li><p>Betaï¼šä¹Ÿæ˜¯æµ‹è¯•ç‰ˆï¼Œè¿™ä¸ªé˜¶æ®µçš„ç‰ˆæœ¬ä¼šä¸€ç›´åŠ å…¥æ–°çš„åŠŸèƒ½ã€‚åœ¨Alphaç‰ˆä¹‹åæ¨å‡ºã€‚</p></li><li><p>RCï¼š(Releaseã€€Candidate) é¡¾åæ€ä¹‰ä¹ˆ ! ç”¨åœ¨è½¯ä»¶ä¸Šå°±æ˜¯å€™é€‰ç‰ˆæœ¬ã€‚ç³»ç»Ÿå¹³å°ä¸Šå°±æ˜¯å‘è¡Œå€™é€‰ç‰ˆæœ¬ã€‚RCç‰ˆä¸ä¼šå†åŠ å…¥æ–°çš„åŠŸèƒ½äº†ï¼Œä¸»è¦ç€é‡äºé™¤é”™ã€‚</p></li><li><p>GA:General Availability,æ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œåœ¨å›½å¤–éƒ½æ˜¯ç”¨GAæ¥è¯´æ˜releaseç‰ˆæœ¬çš„ã€‚</p></li><li><p>RTMï¼š(Release to Manufacture)æ˜¯ç»™å·¥å‚å¤§é‡å‹ç‰‡çš„ç‰ˆæœ¬ï¼Œå†…å®¹è·Ÿæ­£å¼ç‰ˆæ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡RTMç‰ˆä¹Ÿæœ‰å‡ºé™åˆ¶ã€è¯„ä¼°ç‰ˆçš„ã€‚ä½†æ˜¯å’Œæ­£å¼ç‰ˆæœ¬çš„ä¸»è¦ç¨‹åºä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>OEMï¼šæ˜¯ç»™è®¡ç®—æœºå‚å•†éšç€è®¡ç®—æœºè´©å–çš„ï¼Œä¹Ÿå°±æ˜¯éšæœºç‰ˆã€‚åªèƒ½éšæœºå™¨å‡ºè´§ï¼Œä¸èƒ½é›¶å”®ã€‚åªèƒ½å…¨æ–°å®‰è£…ï¼Œä¸èƒ½ä»æ—§æœ‰æ“ä½œç³»ç»Ÿå‡çº§ã€‚åŒ…è£…ä¸åƒé›¶å”®ç‰ˆç²¾ç¾ï¼Œé€šå¸¸åªæœ‰ä¸€é¢CDå’Œè¯´æ˜ä¹¦(æˆæƒä¹¦)ã€‚</p></li><li><p>RVLï¼šå·ç§°æ˜¯æ­£å¼ç‰ˆï¼Œå…¶å®RVLæ ¹æœ¬ä¸æ˜¯ç‰ˆæœ¬çš„åç§°ã€‚å®ƒæ˜¯ä¸­æ–‡ç‰ˆ/è‹±æ–‡ç‰ˆæ–‡æ¡£ç ´è§£å‡ºæ¥çš„ã€‚</p></li><li><p>EVALï¼šè€Œæµé€šåœ¨ç½‘ç»œä¸Šçš„EVALç‰ˆï¼Œä¸â€œè¯„ä¼°ç‰ˆâ€ç±»ä¼¼ï¼ŒåŠŸèƒ½ä¸Šå’Œé›¶å”®ç‰ˆæ²¡æœ‰åŒºåˆ«ã€‚</p></li><li><p>RTLï¼šRetail(é›¶å”®ç‰ˆ)æ˜¯çœŸæ­£çš„æ­£å¼ç‰ˆï¼Œæ­£å¼ä¸Šæ¶é›¶å”®ç‰ˆã€‚åœ¨å®‰è£…ç›˜çš„i386æ–‡ä»¶å¤¹é‡Œæœ‰ä¸€ä¸ªeula.txtï¼Œæœ€åæœ‰ä¸€è¡ŒEULAIDï¼Œå°±æ˜¯ä½ çš„ç‰ˆæœ¬ã€‚æ¯”å¦‚ç®€ä½“ä¸­æ–‡æ­£å¼ç‰ˆæ˜¯EULAID:WX.4_PRO_RTL_CNï¼Œç¹ä½“ä¸­æ–‡æ­£å¼ç‰ˆæ˜¯WX.4_PRO_RTL_TWã€‚å…¶ä¸­ï¼šå¦‚æœæ˜¯WX.å¼€å¤´æ˜¯æ­£å¼ç‰ˆï¼ŒWB.å¼€å¤´æ˜¯æµ‹è¯•ç‰ˆã€‚_PREï¼Œä»£è¡¨å®¶åº­ç‰ˆï¼›_PROï¼Œä»£è¡¨ä¸“ä¸šç‰ˆã€‚</p></li></ul><p>Î±ã€Î²ã€Î»å¸¸ç”¨æ¥è¡¨ç¤ºè½¯ä»¶æµ‹è¯•è¿‡ç¨‹ä¸­çš„ä¸‰ä¸ªé˜¶æ®µï¼ŒÎ±æ˜¯ç¬¬ä¸€é˜¶æ®µï¼Œä¸€èˆ¬åªä¾›å†…éƒ¨æµ‹è¯•ä½¿ç”¨ï¼›Î²æ˜¯ç¬¬äºŒä¸ªé˜¶æ®µï¼Œå·²ç»æ¶ˆé™¤äº†è½¯ä»¶ä¸­å¤§éƒ¨åˆ†çš„ä¸å®Œå–„ä¹‹å¤„ï¼Œä½†ä»æœ‰å¯èƒ½è¿˜å­˜åœ¨ç¼ºé™·å’Œæ¼æ´ï¼Œä¸€èˆ¬åªæä¾›ç»™ç‰¹å®šçš„ç”¨æˆ·ç¾¤æ¥æµ‹è¯•ä½¿ç”¨ï¼›Î»æ˜¯ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼Œæ­¤æ—¶äº§å“å·²ç»ç›¸å½“æˆç†Ÿï¼Œåªéœ€åœ¨ä¸ªåˆ«åœ°æ–¹å†åšè¿›ä¸€æ­¥çš„ä¼˜åŒ–å¤„ç†å³å¯ä¸Šå¸‚å‘è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶ç‰ˆæœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python poetry requirements.txt</title>
      <link href="/posts/143a/"/>
      <url>/posts/143a/</url>
      
        <content type="html"><![CDATA[<p>Poetry æ˜¯ä¸€ä¸ªpythonè™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–ç®¡ç†å·¥å…·ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ„å»ºæ‰“åŒ…pythonåŒ…ï¼Œåªéœ€è¦ä¸€ä¸ªæ ‡å‡†åŒ–<a href="https://www.python.org/dev/peps/pep-0518/">pyproject.toml</a>æ–‡ä»¶ï¼Œå…¶ä»–ä¾èµ–ç®¡ç†å·¥å…·å¦‚ï¼švirtualenvã€pipenvç­‰</p><p>requirements.txtæ˜¯ç”¨æ¥æè¿°ç”¨äº†å“ªäº›pythonåŒ…ï¼Œä»¥åŠç‰ˆæœ¬æ˜¯ä»€ä¹ˆ</p><p>è¿™é‡Œè®°å½•ä¸€ä¸‹è¿™ä¸¤è€…ä¹‹é—´å¦‚ä½•è½¬æ¢</p><ul><li><p>poetry export requirements.txt</p><p>å¯¼å‡ºrequirements.txtç”¨äºå®¹å™¨ç­‰ç¯å¢ƒæ„å»º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry export -f requirements.txt --output requirements-prod.txt --without-hashes</span><br></pre></td></tr></table></figure></li><li><p>poerty add from requirements.txt </p><p>å¦‚æœç°åœ¨æœ‰requirements.txtï¼Œè€Œåç»­æƒ³é€šè¿‡poetryç®¡ç†åŒ…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat requirements.txt|xargs poetry add</span><br></pre></td></tr></table></figure><h3 id="å·²çŸ¥çš„é—®é¢˜"><a href="#å·²çŸ¥çš„é—®é¢˜" class="headerlink" title="å·²çŸ¥çš„é—®é¢˜"></a>å·²çŸ¥çš„é—®é¢˜</h3></li></ul><p>poetry å¯¼å‡ºçš„requirements.txté‡ŒåŒ…å«äº†ä¾èµ–çš„pythonæœ€ä½ç‰ˆæœ¬ï¼Œå¦‚æœpoetryä½¿ç”¨çš„pythonç‰ˆæœ¬é«˜äºrequirements.txtä½¿ç”¨çš„pythonç‰ˆæœ¬ï¼Œæ‰§è¡Œå®‰è£…æ—¶å°†ä¼šå¿½ç•¥ç‰ˆæœ¬ä¸æ»¡è¶³çš„åŒ…</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">markupsafe</span>==<span class="number">2</span>.<span class="number">0</span>.<span class="number">1</span>; python_version &gt;= <span class="string">&quot;3.6&quot;</span></span><br><span class="line"><span class="attribute">numpy</span>==<span class="number">1</span>.<span class="number">20</span>.<span class="number">3</span>; python_version &gt;= <span class="string">&quot;3.7&quot;</span> and python_full_version &gt;= <span class="string">&quot;3.7.1&quot;</span></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ä¸Šé¢ä¸¤ä¸ªåŒ…ï¼Œå¦‚æœä½ çš„pythonç‰ˆæœ¬â‰¤3.6ï¼Œnumpyå°†ä¸ä¼šå®‰è£…ï¼Œå› ä¸ºå®ƒè¦æ±‚pythonç‰ˆæœ¬å¤§äº3.7ï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œè¿™ä¸ªåœ°æ–¹å¾ˆå®¹æ˜“å¿½è§†ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/62764148/how-to-import-requirements-txt-from-an-existing-project-using-poetry">python - How to import requirements.txt from an existing project using Poetry - Stack Overflow</a></p><p>[2] <a href="https://github.com/python-poetry/poetry/blob/master/docs/cli.md">poetry/cli.md at master Â· python-poetry/poetry (github.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> poetry </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python url decode</title>
      <link href="/posts/6645/"/>
      <url>/posts/6645/</url>
      
        <content type="html"><![CDATA[<p>åœ¨httpè¯·æ±‚ä¸­ï¼Œå¦‚æœurl queryä¸­æ˜¯Unicodeï¼Œå°†ä¼šè®®url encodeæ–¹å¼å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå¯èƒ½éœ€è¦æˆ‘ä»¬å»è§£æï¼Œè¿™é‡Œç”¨åˆ°pythonçš„åº“<code>urllib.parse.unquote</code></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/?w=%E6%B1%89%E5%AD%97%EC%A4%91%EA%B5%AD</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/x-www-form-urlencoded; charset=utf-8</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>echo.paw.cloud</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Paw/3.2.2 (Macintosh; OS X/11.4.0) GCDHTTPRequest</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="keyword">from</span> urllib.parse <span class="keyword">import</span> unquote</span><br><span class="line">&gt;&gt; unquote(<span class="string">&#x27;/?w=%E6%B1%89%E5%AD%97%EC%A4%91%EA%B5%AD&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/?w=æ±‰å­—ì¤‘êµ­&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.unquote">urllib.parse â€” Parse URLs into components â€” Python 3.9.6 documentation</a></p><p>[2] <a href="https://stackoverflow.com/questions/16566069/url-decode-utf-8-in-python">encoding - Url decode UTF-8 in Python - Stack Overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> urlenocde </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pawæ–‡ä»¶æ“ä½œ</title>
      <link href="/posts/d5b5/"/>
      <url>/posts/d5b5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†pawä¸­æ–‡ä»¶çš„è¯·æ±‚å’Œä¸‹è½½</p></blockquote><blockquote><p>Paw is a full-featured HTTP client that lets you test and describe the APIs you build or consume. It has a beautiful native macOS interface to compose requests, inspect server responses, generate client code and export API definitions.</p></blockquote><h2 id="ä¸Šä¼ æ–‡ä»¶è¯·æ±‚"><a href="#ä¸Šä¼ æ–‡ä»¶è¯·æ±‚" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶è¯·æ±‚"></a>ä¸Šä¼ æ–‡ä»¶è¯·æ±‚</h2><h3 id="é€šè¿‡è¡¨å•ä¸Šä¼ "><a href="#é€šè¿‡è¡¨å•ä¸Šä¼ " class="headerlink" title="é€šè¿‡è¡¨å•ä¸Šä¼ "></a>é€šè¿‡è¡¨å•ä¸Šä¼ </h3><ul><li><p>bodyç±»å‹é€‰æ‹©Multipart</p></li><li><p>Content-Type: multipart/form-dataæˆ–è€…application/x-www-form-urlencoded</p></li><li><p>valueé€‰æ‹© file content</p></li></ul><p><img src="https://oss.smart-lifestyle.cn/file/mshyx.png" alt="image-20210629170831026"></p><p>ç„¶åä¸Šä¼ æ–‡ä»¶</p><p><img src="https://oss.smart-lifestyle.cn/file/vj768.png" alt="image-20210629170927905"></p><h3 id="é€šè¿‡body"><a href="#é€šè¿‡body" class="headerlink" title="é€šè¿‡body"></a>é€šè¿‡body</h3><h2 id="ä¸‹è½½å“åº”è¿”å›æ–‡ä»¶"><a href="#ä¸‹è½½å“åº”è¿”å›æ–‡ä»¶" class="headerlink" title="ä¸‹è½½å“åº”è¿”å›æ–‡ä»¶"></a>ä¸‹è½½å“åº”è¿”å›æ–‡ä»¶</h2><p>åœ¨file â€“ å¯¼å‡ºå“åº”â€”å“åº”bodyå³å¯</p><p><img src="https://oss.smart-lifestyle.cn/file/8majz.png" alt="image-20210629170706183"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/40680954/how-do-download-response-binary">paw app - How do download response binary? - Stack Overflow</a></p><p>[2] <a href="https://paw.cloud/docs/getting-started/set-request-body#Set_Multipart_body">Documentation | Paw</a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QPSå’ŒTPS</title>
      <link href="/posts/3f2f/"/>
      <url>/posts/3f2f/</url>
      
        <content type="html"><![CDATA[<ul><li><p>QPS</p><p>è‹±æ–‡å…¨ç§°ï¼šQueries Per Secondï¼Œå³æ¯ç§’çš„å“åº”çš„è¯·æ±‚æ•°ï¼Œä¹Ÿä»£è¡¨æœ€å¤§ååèƒ½åŠ›ï¼ŒQPSçš„<strong>ä¸€æ¬¡è¯·æ±‚</strong>ä»£è¡¨ä¸€ä¸ªæ¥å£çš„ä¸€æ¬¡è¯·æ±‚åˆ°æœåŠ¡å™¨è¿”å›ç»“æœ</p></li><li><p>TPS</p><p>è‹±æ–‡å…¨ç§°ï¼šTransactions Per Secondï¼Œå³æ¯ç§’å¤„ç†çš„äº‹åŠ¡æ•°ç›®ï¼Œä¸€ä¸ªäº‹åŠ¡æŒ‡çš„æ˜¯<strong>ä¸€ä¸ªå®¢æˆ·ç«¯</strong>å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶è¿”å›ç»“æœçš„è¿‡ç¨‹ã€‚</p><p>TPSåŒ…æ‹¬å¦‚ä¸‹è¿‡ç¨‹ï¼šç”¨æˆ·è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†æ•°æ®ï¼ŒæœåŠ¡å™¨è¿”å›æ•°æ®</p><p>ä¾‹å¦‚ï¼ŒæŸæ¬¡å®¢æˆ·è®¿é—®ä¸€ä¸ªé¡µé¢ä¼šè¯·æ±‚4æ¬¡æœåŠ¡å™¨ï¼Œå…¶ä¸­1æ¬¡htmlï¼Œ1æ¬¡cssï¼Œ1æ¬¡jsï¼Œ1æ¬¡APIï¼Œé‚£ä¹ˆè®¿é—®è¿™ä¸ªé¡µé¢ä¼šäº§ç”Ÿä¸€ä¸ªâ€œTâ€ï¼Œè€Œä¼šäº§ç”Ÿå››ä¸ªâ€œQâ€ã€‚</p></li><li><p>PV</p><p>è‹±æ–‡å…¨ç§° Page Viewï¼Œå³é¡µé¢æµè§ˆé‡ï¼Œç”¨æˆ·æ¯ä¸€æ¬¡å¯¹ç½‘ç«™ä¸­æ¯ä¸ªé¡µé¢è®¿é—®ï¼Œå°±ä¼šè¢«è®°å½•ä¸€æ¬¡ï¼Œå¤šæ¬¡åˆ·æ–°ä¸€ä¸ªé¡µé¢ä¼šç´¯è®¡PV</p></li><li><p>UV</p><p>è‹±æ–‡å…¨ç§°ï¼šUnique Visitorï¼Œå³ç‹¬ç«‹è®¿å®¢è®¿é—®æ•°ï¼Œç»Ÿè®¡1å¤©å†…è®¿é—®æŸç«™ç‚¹çš„ç”¨æˆ·æ•°ï¼ˆä»¥cookieä¸ºä¾æ®ï¼‰</p></li><li><p>IP</p><p>å³ç‹¬ç«‹IPæ•°ï¼ŒæŒ‡çš„æ˜¯ä¸€å¤©å†…å¤šå°‘ä¸ªç‹¬ç«‹IPæµè§ˆé¡µé¢ï¼Œå¦‚æœå¤šä¸ªç”¨æˆ·åœ¨åŒä¸€ä¸ªè·¯ç”±å™¨å†…ä¸Šç½‘ï¼Œå¯èƒ½ä¼šè¢«è®°å½•ä¸º1ä¸ªç‹¬ç«‹IPè®¿é—®è€…</p></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://juejin.cn/post/6844903959379853325">QPSå’ŒTPSçš„åŒºåˆ« (juejin.cn)</a></p>]]></content>
      
      
      <categories>
          
          <category> æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> æ€§èƒ½æŒ‡æ ‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿæ­å»ºPGSQL for Serverless</title>
      <link href="/posts/6bab/"/>
      <url>/posts/6bab/</url>
      
        <content type="html"><![CDATA[<blockquote><p> æƒ³ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®åº“æœåŠ¡ï¼Œä½¿ç”¨é‡å’Œè§„æ¨¡ä¸ç”¨å¤ªå¤§</p></blockquote><p>å•ç‹¬è´­ä¹°æ•°æ®åº“å®ä¾‹ï¼Œå¤ªè´µäº†</p><p><img src="https://oss.smart-lifestyle.cn/file/tmasb.png" alt="image-20210629151750968"></p><p>å‘ç°åœ¨æ•°æ®åº“æœåŠ¡åˆ—è¡¨é‡Œæœ‰ä¸€ä¸ªServerlessç‰ˆæœ¬ï¼Œçœ‹äº†ä»‹ç»ï¼Œéœ€è¦é€šè¿‡APIæˆ–è€…serverlessç»„ä»¶æ–¹å¼åˆ›å»ºï¼Œç›®å‰è¿˜å¤„äºå…è´¹çš„å…¬æµ‹é˜¶æ®µï¼Œå˜¿å˜¿ğŸ˜‹ï¼Œæèµ·</p><p><img src="https://oss.smart-lifestyle.cn/file/2sg3e.png" alt="image-20210629152124434"></p><h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><p>æ“ä½œæ­¥éª¤æŒ‰ç…§<a href="https://cloud.tencent.com/document/product/1154/43004">å®˜ç½‘è¯´æ˜</a>ï¼Œå¾ˆå¿«å°±èƒ½å®Œæˆ</p><h3 id="å®‰è£…-serverless-cli"><a href="#å®‰è£…-serverless-cli" class="headerlink" title="å®‰è£… serverless cli"></a>å®‰è£… serverless cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g serverless</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>åˆ›å»ºç›®å½•ï¼Œå¹¶æ–°å»ºä¸€ä¸ªserverless.ymlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># serverless.yml</span></span><br><span class="line"><span class="attr">component:</span> <span class="string">postgresql</span> <span class="comment">#(å¿…å¡«) å¼•ç”¨ component çš„åç§°ï¼Œå½“å‰ç”¨åˆ°çš„æ˜¯ postgresql ç»„ä»¶</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">serverlessDB</span> <span class="comment"># (å¿…å¡«) è¯¥ postgresql ç»„ä»¶åˆ›å»ºçš„å®ä¾‹åç§°</span></span><br><span class="line"><span class="attr">org:</span> <span class="string">smart-lifestyle</span> <span class="comment"># (å¯é€‰) ç”¨äºè®°å½•ç»„ç»‡ä¿¡æ¯ï¼Œé»˜è®¤å€¼ä¸ºæ‚¨çš„è…¾è®¯äº‘è´¦æˆ· appid</span></span><br><span class="line"><span class="attr">app:</span> <span class="string">serverlessDB</span> <span class="comment"># (å¯é€‰) è¯¥ sql åº”ç”¨åç§°</span></span><br><span class="line"><span class="attr">stage:</span> <span class="string">prod</span> <span class="comment"># (å¯é€‰) ç”¨äºåŒºåˆ†ç¯å¢ƒä¿¡æ¯ï¼Œé»˜è®¤å€¼æ˜¯ dev</span></span><br><span class="line"><span class="attr">inputs:</span></span><br><span class="line">  <span class="attr">region:</span> <span class="string">ap-beijing</span>  <span class="comment"># å¯é€‰ ap-guangzhou, ap-shanghai, ap-beijing</span></span><br><span class="line">  <span class="attr">zone:</span> <span class="string">ap-beijing-3</span>  <span class="comment"># å¯é€‰ ap-guangzhou-2, ap-shanghai-2, ap-beijing-3</span></span><br><span class="line">  <span class="attr">dBInstanceName:</span> <span class="string">serverlessdb</span></span><br><span class="line">  <span class="attr">vpcConfig:</span></span><br><span class="line">    <span class="attr">vpcId:</span> <span class="string">æ ¹æ®å®é™…å¡«å†™</span></span><br><span class="line">    <span class="attr">subnetId:</span> <span class="string">æ ¹æ®å®é™…å¡«å†™</span></span><br><span class="line">  <span class="attr">extranetAccess:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>æ‰§è¡Œ <code>sls deploy</code>è‡ªåŠ¨å®Œæˆéƒ¨ç½²ï¼ˆä¼šæ˜¾ç¤ºäºŒç»´ç è¿›è¡Œæˆæƒï¼‰ï¼ŒæˆåŠŸä¹‹åï¼Œä¼šæ‰“å°æ˜¾ç¤ºæ•°æ®åº“çš„è¿æ¥ä¿¡æ¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">private:</span></span><br><span class="line">  <span class="attr">connectionString:</span> <span class="string">postgresql://xxxx:xxxx@10.0.0.9:5432/tencentdb_hy7vs5lu</span></span><br><span class="line">  <span class="attr">host:</span>             <span class="number">10.0</span><span class="number">.0</span><span class="number">.9</span></span><br><span class="line">  <span class="attr">port:</span>             <span class="number">5432</span></span><br><span class="line">  <span class="attr">user:</span>             <span class="string">xxxx</span></span><br><span class="line">  <span class="attr">password:</span>         <span class="string">xxxx</span></span><br><span class="line">  <span class="attr">dbname:</span>           <span class="string">tencentdb_hy7vs5lu</span></span><br></pre></td></tr></table></figure><p>ä¸”åœ¨æ•°æ®åº“å®ä¾‹serverlessç‰ˆä¸­å¯ä»¥æŸ¥çœ‹åˆ°æ•°æ®åº“</p><p><img src="https://oss.smart-lifestyle.cn/file/jenl2.png" alt="image-20210629151932596"></p><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><p>åˆ›å»ºçš„æ•°æ®åº“æ²¡æœ‰å¼€å¯å¤–ç½‘è¿æ¥ï¼Œè€Œä¸”åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œä¹Ÿç¦æ­¢æ”¹æ“ä½œï¼Œå› æ­¤å¦‚æœæƒ³åœ¨å…¶ä»–VPCä¸­ä½¿ç”¨ï¼Œéœ€è¦ä½¿ç”¨åˆ°å¯¹ç­‰è¿æ¥</p><p><img src="https://oss.smart-lifestyle.cn/file/7lno9.png" alt="img"></p><p>å…·ä½“æ“ä½œæ­¥éª¤å‚è€ƒ<a href="https://cloud.tencent.com/document/product/553/18836">å®˜ç½‘è¯´æ˜</a></p><ol><li>æ–°å»ºæœ‰ä¸ªå¯¹ç­‰è¿æ¥</li></ol><p><img src="https://oss.smart-lifestyle.cn/file/9tase.png" alt="image-20210629154210941"></p><ol start="2"><li>åœ¨ä¸¤ç«¯è·¯ç”±è¡¨ä¸­å¢åŠ ç­–ç•¥ï¼Œé€‰æ‹©å¯¹ç­‰è¿æ¥</li></ol><p><img src="https://oss.smart-lifestyle.cn/file/tzmch.png" alt="image-20210629154322540"></p><p>å®Œæˆä»¥ä¸Šæ­¥éª¤ä¹‹åå¯ä»¥è¿›è¡Œæµ‹è¯•</p><p>æ— æ³•pingé€šï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡telnet è¿æ¥åˆ°æ•°æ®åº“æœåŠ¡ï¼Œå®Œæˆã€‚</p><p><img src="https://oss.smart-lifestyle.cn/file/92fpw.png" alt="image-20210629154533240"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://cloud.tencent.com/document/product/1154/43004">Serverless åº”ç”¨ä¸­å¿ƒ æ•°æ®åº“ PostgreSQL ç»„ä»¶ - Serverless ç»„ä»¶ - æ–‡æ¡£ä¸­å¿ƒ - è…¾è®¯äº‘ (tencent.com)</a></p><p>[2] <a href="https://cloud.tencent.com/document/product/553/18836">å¯¹ç­‰è¿æ¥ åŒè´¦å·åˆ›å»ºå¯¹ç­‰è¿æ¥é€šä¿¡ - å¿«é€Ÿå…¥é—¨ - æ–‡æ¡£ä¸­å¿ƒ - è…¾è®¯äº‘ (tencent.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> serverless </category>
          
      </categories>
      
      
        <tags>
            
            <tag> serverless </tag>
            
            <tag> scf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rancheråˆæ­¥ä½¿ç”¨</title>
      <link href="/posts/363a/"/>
      <url>/posts/363a/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>micropythonä¹‹ç¦…</title>
      <link href="/posts/58bd/"/>
      <url>/posts/58bd/</url>
      
        <content type="html"><![CDATA[<blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Code,</span><br><span class="line">Hack it,</span><br><span class="line">Less <span class="keyword">is</span> more,</span><br><span class="line">Keep it simple,</span><br><span class="line">Small <span class="keyword">is</span> beautiful,</span><br><span class="line"></span><br><span class="line">Be brave! Break things! Learn <span class="keyword">and</span> have fun!</span><br><span class="line">Express yourself <span class="keyword">with</span> MicroPython.</span><br><span class="line"></span><br><span class="line">Happy hacking! :-)</span><br></pre></td></tr></table></figure></blockquote><p><img src="https://oss.smart-lifestyle.cn/file/bmwmh.png" alt="ESP8266 and MicroPython - Part 1 - Hackster.io" style="zoom:50%;" />       <img src="https://oss.smart-lifestyle.cn/file/u74xj.png" alt="Micro Bit - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦" style="zoom:50%;" /></p>]]></content>
      
      
      <categories>
          
          <category> micropython </category>
          
      </categories>
      
      
        <tags>
            
            <tag> micropython </tag>
            
            <tag> microbit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jupyter notebookä½¿ç”¨ç¯å¢ƒå˜é‡</title>
      <link href="/posts/9e2a/"/>
      <url>/posts/9e2a/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨python-dotenvåº“ï¼Œåœ¨jupyter notebookä¸­åŠ è½½ç¯å¢ƒå˜é‡</p></blockquote><ul><li>å®‰è£…python-dotenv</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install python-dotenv</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">load_dotenv(dotenv_path=<span class="string">&#x27;.env&#x27;</span>)</span><br><span class="line"></span><br><span class="line">db_user = os.getenv(<span class="string">&#x27;DB_USER&#x27;</span>)</span><br><span class="line">db_password = os.getenv(<span class="string">&#x27;DB_PASSWORD&#x27;</span>)</span><br><span class="line">db_host = os.getenv(<span class="string">&#x27;DB_HOST&#x27;</span>)</span><br><span class="line">db_name = os.getenv(<span class="string">&#x27;DB_NAME&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://nono.ma/environment-variable-python-notebook-os-environ-get">Read Environment Variables in a Python Notebook Â· Nono MartÃ­nez Alonso</a></p>]]></content>
      
      
      <categories>
          
          <category> jupyter </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jupyter </tag>
            
            <tag> env </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>postgresql split_part coalesce</title>
      <link href="/posts/89ab/"/>
      <url>/posts/89ab/</url>
      
        <content type="html"><![CDATA[<blockquote><p>split_part åœ¨æ²¡æœ‰å‘½ä¸­æ—¶è¿”å›çš„æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯nullï¼ŒCOALESCEè¿”å›ç¬¬ä¸€ä¸ªä¸ä¸ºnullçš„å…ƒç´ </p></blockquote><p>åœ¨COALESCEç»“åˆsplit_partçš„ä½¿ç”¨ä¸­ï¼Œæƒ³é€šè¿‡split_partåˆ†å‰²å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡COALESCEå–å‡ºæœ€åä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COALESCE</span>(split_part(<span class="string">&#x27;First-Second&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="number">2</span>), split_part(<span class="string">&#x27;First-Second&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="number">1</span>));</span><br></pre></td></tr></table></figure><p>è¿”å›<code>Second</code></p><p>è€Œå½“åˆ†éš”ç¬¦ä¸å­˜åœ¨æ—¶ï¼Œç¼ºè¿”å›äº†ç©ºï¼Œç›®æ ‡æ˜¯è¿”å›<code>First</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COALESCE</span>(split_part(<span class="string">&#x27;First&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="number">2</span>), split_part(<span class="string">&#x27;First&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="number">1</span>));</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§å®˜æ–¹å¯¹COALESCEçš„è¯´æ˜ï¼š</p><blockquote><p>The <code>COALESCE</code> function returns the first of its arguments that is not null. Null is returned only if all arguments are null. It is often used to substitute a default value for null values when data is retrieved for display, for example:</p><p><code>SELECT COALESCE(description, short_description, &#39;(none)&#39;) ...</code></p></blockquote><p>è¿”å›ç¬¬ä¸€ä¸ªä¸ä¸ºnullçš„å‚æ•°ï¼Œå¦‚æœéƒ½æ˜¯nullï¼Œåˆ™è¿”å›null</p><p>split_partçš„è¯´æ˜</p><table><thead><tr><th><code>split_part(string text, delimiter text, field int)</code></th><th><code>text</code></th><th>Split <code>string</code> on <code>delimiter</code> and return the given field (counting from one)</th><th><code>split_part(&#39;abc~@~def~@~ghi&#39;, &#39;~@~&#39;, 2)</code></th><th><code>def</code></th></tr></thead></table><p><em>split_partåœ¨æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œè¿”å›çš„ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè€Œéƒ¨ç½²null</em></p><p>å› æ­¤è¦ç»“åˆNULLIFä½¿ç”¨</p><blockquote><p><code>NULLIF(value1, value2)</code></p><p>The <code>NULLIF</code> function returns a null value if <code>value1</code> equals <code>value2</code>; otherwise it returns <code>value1</code>. This can be used to perform the inverse operation of the <code>COALESCE</code> example given above:</p></blockquote><p>å¦‚æœå…ƒç´ ç›¸ç­‰ï¼Œåˆ™è¿”å›nullï¼Œå¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤å¯ä»¥ç”¨äº†åˆ¤æ–­å€¼æ˜¯å¦ä¸ºâ€™â€™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NULLIF</span>(value1, <span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå®ç°çš„SQLè¯­å¥å¦‚ä¸‹ï¼Œå¹¶æˆåŠŸè¿”å›<code>First</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COALESCE</span>(<span class="built_in">NULLIF</span>(split_part(<span class="string">&#x27;First&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="number">2</span>), <span class="string">&#x27;&#x27;</span>), split_part(<span class="string">&#x27;First&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="number">1</span>));</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://www.postgresql.org/docs/9.1/functions-conditional.html">PostgreSQL: Documentation: 9.1: Conditional Expressions</a></p><p>[2] <a href="https://www.postgresql.org/docs/13/functions-string.html">PostgreSQL: Documentation: 13: 9.4. String Functions and Operators</a></p><p>[3] <a href="https://stackoverflow.com/questions/14035883/how-to-convert-empty-to-null-in-postgresql/14035890#14035890">php - How to convert empty to null in PostgreSQL? - Stack Overflow</a></p><p>[4] <a href="https://stackoverflow.com/questions/45766644/substituting-value-in-empty-field-after-using-split-part">sql - Substituting value in empty field after using split_part - Stack Overflow</a></p><p>[5] <a href="https://stackoverflow.com/questions/60381782/snowflake-split-part-function-not-returning-null-values">Snowflake SPLIT_PART Function not returning Null values - Stack Overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> postgresql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> split_part </tag>
            
            <tag> coalesce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pandasä¸SQLæ•´ç†-1</title>
      <link href="/posts/eac6/"/>
      <url>/posts/eac6/</url>
      
        <content type="html"><![CDATA[<h2 id="è¯»å–æ•°æ®åº“å†…å®¹"><a href="#è¯»å–æ•°æ®åº“å†…å®¹" class="headerlink" title="è¯»å–æ•°æ®åº“å†…å®¹"></a>è¯»å–æ•°æ®åº“å†…å®¹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># excel headeræ— æ ¼å¼</span></span><br><span class="line">pd.io.formats.excel.ExcelFormatter.header_style = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">db_user = os.getenv(<span class="string">&#x27;DB_USER&#x27;</span>)</span><br><span class="line">db_password = os.getenv(<span class="string">&#x27;DB_PASSWORD&#x27;</span>)</span><br><span class="line">db_host = os.getenv(<span class="string">&#x27;DB_HOST&#x27;</span>)</span><br><span class="line">db_name = os.getenv(<span class="string">&#x27;DB_NAME&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">engine = create_engine(<span class="string">f&#x27;postgresql://<span class="subst">&#123;db_user&#125;</span>:<span class="subst">&#123;db_password&#125;</span>@<span class="subst">&#123;db_host&#125;</span>:5432/<span class="subst">&#123;db_name&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–è¡¨</span></span><br><span class="line">df = pd.read_sql_table(<span class="string">&#x27;AssetWeeklyReportView&#x27;</span>, engine)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜åˆ°excelä¸­</span></span><br><span class="line">df.to_excel(<span class="string">&#x27;asset_table.xlsx&#x27;</span>, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡æ˜¯å¦ä¸ºç©ºè¿›è¡Œè¿‡æ»¤</span></span><br><span class="line">df1 = df[df[<span class="string">&#x27;Type&#x27;</span>].notnull()]</span><br><span class="line">df2 = df[df[<span class="string">&#x27;Type&#x27;</span>].isnull()]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–è¡Œæ•°</span></span><br><span class="line">size = <span class="built_in">len</span>(df1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†æ¯ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> df1.iterrows():</span><br><span class="line">  <span class="built_in">print</span>(row[<span class="string">&#x27;Type&#x27;</span>].....)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://blog.csdn.net/weixin_45616551/article/details/103469386">pandas dataframe len() å’Œ count() çš„åŒºåˆ«_weixin_45616551çš„åšå®¢-CSDNåšå®¢</a></p><p>[2] <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#sql-queries">IO tools (text, CSV, HDF5, â€¦) â€” pandas 1.2.4 documentation (pydata.org)</a></p>]]></content>
      
      
      <categories>
          
          <category> pandas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pandas </tag>
            
            <tag> sqlalchemy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©ºæ ¼</title>
      <link href="/posts/91f6/"/>
      <url>/posts/91f6/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>dockerè¿è¡Œlinuxç»ˆç«¯æ˜¾ç¤ºbash-4.2#</title>
      <link href="/posts/f29/"/>
      <url>/posts/f29/</url>
      
        <content type="html"><![CDATA[<p>ä¸€æ¬¡åœ¨dockerä¸­è¿è¡Œcentosï¼Œä¸ºäº†çœäº‹ï¼Œå°†æ•°æ®å·æŒ‚è½½äº†æ•´ä¸ªç”¨æˆ·å·¥ä½œç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>docker run -it -v /Users/simple/workspace/tmp/data:/root python36:centos7 bash</code></p><p><img src="https://oss.smart-lifestyle.cn/file/k5nrn.png" alt="image-20210523154159576"></p><p>ç†è®ºä¸Šåº”è¯¥æŒ‰å¦‚ä¸‹æ˜¾ç¤ºï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/0vks3.png" alt="image-20210523155114587"></p><p>å‘ç°æ­¤æ—¶ç»ˆç«¯æ˜¾ç¤ºçš„bash-4.2ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºç”¨æˆ·å@ä¸»æœºï¼Œå¦å¤–ç»ˆç«¯æ–‡ä»¶å¤¹æ–‡ä»¶çš„é¢œè‰²ä¹Ÿæ²¡æœ‰æ˜¾ç¤ºï¼Œæœ€å¼€å§‹ä»¥ä¸ºæ²¡æœ‰è®¾ç½®termé¢œè‰²ï¼Œä½†ç»è¿‡å°è¯•ä¸æ˜¯è¿™ä¸ªé—®é¢˜ï¼ˆ<code>TERM=xterm-256color</code>ï¼‰ã€‚</p><p>çœ‹åˆ°è‡ªå·±è¿è¡Œçš„dockerå‘½ä»¤ï¼Œ-vå°†dataç›®å½•æŒ‚è½½äº†ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè¿™æ—¶å€™æƒ³èµ·é‡Œå•Šï¼Œdocker volumeç¬¬ä¸€æ¬¡æŒ‚è½½æ˜¯å•é¡¹çš„ï¼Œå³åŠæ—¶å®¹å™¨å†…ç›®å½•æœ‰å†…å®¹ï¼Œç¬¬ä¸€æ¬¡æŒ‚è½½æ—¶ï¼Œä¹Ÿä¼šè¢«ä¸»æœºç›®å½•è¦†ç›–æ‰ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨ä¸»æœºdataç›®å½•æ˜¯ç©ºçš„ï¼Œä¼šæŠŠdockerå†…ç”¨æˆ·ç›®å½•å†…æ–‡ä»¶å…¨éƒ¨æ¸…ç©º</p><p>â€‹    è¿›è¡ŒæŒ‚è½½åï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/io22a.png" alt="image-20210523154824106"></p><p>â€‹    æŒ‚è½½å‰ï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/gq6l8.png" alt="image-20210523155224464"></p><p>åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå­˜æ”¾ç€bashä»¥åŠç”¨æˆ·çš„å„ç§é…ç½®æ–‡ä»¶ï¼Œè€Œè¿›è¡ŒæŒ‚è½½åï¼Œå°†æ‰€æœ‰é…ç½®æ–‡ä»¶å…¨éƒ¨æ¸…é™¤äº†ã€‚</p><p>æ­£ç¡®åšæ³•ï¼Œä¸è¦ç›´æ¥æŒ‚è½½åˆ°ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè€Œåº”è¯¥æŒ‚è½½ç”¨æˆ·ç›®å½•ä¸‹çš„äºŒçº§ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">volume=&quot;/Users/simple/workspace/function_graph/data&quot;</span><br><span class="line">docker run -it --rm --init  --name centos -v $volume:/root/data -w /root python36:centos7 bash</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] (<a href="https://blog.csdn.net/liulihui1988/article/details/52796395">linux å‘½ä»¤ç»ˆç«¯æç¤ºç¬¦æ˜¾ç¤º-bash-4.2#è§£å†³æ–¹æ³•__kairuiçš„åšå®¢-CSDNåšå®¢_-bash-4.2#</a>)</p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythoné€’å½’åˆ›å»ºç›®å½•(mkdir -p)</title>
      <link href="/posts/7376/"/>
      <url>/posts/7376/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä¸ºæ—¥å¿—æ–‡ä»¶è®¾ç½®å­˜æ”¾ä½ç½®æ—¶ï¼Œéœ€è¦åœ¨ç¨‹åºé‡Œåˆ¤æ–­æ–‡ä»¶å¤¹ï¼ˆä½ç½®ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œé€šå¸¸ä½¿ç”¨<code>os.mkdir</code>æ¥åˆ›å»ºç›®å½•ï¼Œä½†æ˜¯å¦‚æœç›®å½•ä¸ºå¤šå±‚æ¬¡ç›®å½•ï¼Œè€Œä¸”æŸä¸€å±‚ç›®å½•å­˜åœ¨ï¼Œåœ¨ä½¿ç”¨<code>os.mkdir</code>æ—¶ä¼šæŠ¥é”™ï¼šFileNotFoundError*</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.mkdir(<span class="string">&#x27;/tmp/logpath/path&#x27;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">&#x27;/tmp/logpath/path&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºos.mkdirä¸æ”¯æŒå¤šå±‚ç›®å½•é€’å½’åˆ›å»ºã€‚</p><p>åœ¨linux mkdirå‘½ä»¤ä¸­ï¼Œå®ƒæ”¯æŒå¦‚ä¸‹æ“ä½œï¼Œä½¿ç”¨-p å¯ä»¥å®ç°é€’å½’åˆ›å»ºç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tldr mkdir</span><br><span class="line">Cache is out of date. You should run <span class="string">&quot;tldr --update&quot;</span></span><br><span class="line"></span><br><span class="line">  mkdir</span><br><span class="line"></span><br><span class="line">  Creates a directory.</span><br><span class="line">  More information: https://www.gnu.org/software/coreutils/mkdir.</span><br><span class="line"></span><br><span class="line">  - Create a directory <span class="keyword">in</span> current directory or given path:</span><br><span class="line">    mkdir directory</span><br><span class="line"></span><br><span class="line">  - Create directories recursively (useful <span class="keyword">for</span> creating nested <span class="built_in">dirs</span>):</span><br><span class="line">    mkdir -p path/to/directory</span><br></pre></td></tr></table></figure><p>è€Œåœ¨pythonä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨pathlib.Path.mkdiræ¥å®ç°ï¼Œéœ€è¦è®©<code>exist_ok=True</code> ä»¥åŠ<code>parents=True</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Path.mkdir(mode=<span class="number">0o777</span>, parents=<span class="literal">False</span>, exist_ok=<span class="literal">False</span>)</span><br><span class="line">If exist_ok <span class="keyword">is</span> true, FileExistsError exceptions will be ignored (same behavior <span class="keyword">as</span> the POSIX mkdir -p command), but only <span class="keyword">if</span> the last path component <span class="keyword">is</span> <span class="keyword">not</span> an existing non-directory file.</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Path(<span class="string">&#x27;/tmp/logtmp/XMKDRL&#x27;</span>).mkdir(exist_ok=<span class="literal">True</span>, parents=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.exists(<span class="string">&#x27;/tmp/logtmp/XMKDRL&#x27;</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] [mkdir-p-functionality-in-python](<a href="https://stackoverflow.com/questions/600268/mkdir-p-functionality-in-python">mkdir -p functionality in Python - Stack Overflow</a>)</p><p>[2] [Path.mkdir](<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.mkdir">pathlib â€” Object-oriented filesystem paths â€” Python 3.9.5 documentation</a>)</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pythonå°æŠ€å·§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨crontabå®šæœŸåŒæ­¥NTPæ—¶é—´</title>
      <link href="/posts/c57a/"/>
      <url>/posts/c57a/</url>
      
        <content type="html"><![CDATA[<p>è´­ä¹°çš„é˜¿é‡Œäº‘é¦™æ¸¯è™šæœºï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œå®ƒçš„æ—¶é—´å°±è·Ÿå®é™…æ—¶é—´åç¦»è¶Šæ¥è¶Šè¿œï¼Œå¯¼è‡´HTTPSæ— æ³•æ­£å¸¸å·¥ä½œï¼Œ</p><p>æœ€å¼€å§‹æ˜¯æ‰‹åŠ¨çš„ç™»å½•çš„æœåŠ¡å™¨ï¼Œä½¿ç”¨<code>rdate -s time.nist.gov</code>è¿›è¡Œæ‰‹åŠ¨æ›´æ–°æ—¶é—´ï¼Œä½†åæ¥å‘ç°è‡ªå·±è¶Šæ¥è¶Šæ‡’ï¼Œè€Œä¸”æœ€è¿‘è¿™ä¸ªå‘½ä»¤ä¸€ç›´å‡ºé”™: <code>rdate: Could not read data: Cannot assign requested address</code>, å¯èƒ½æ˜¯åé¢çš„æ—¶é—´åŒæ­¥æœåŠ¡å™¨æŒ‚äº†ã€‚</p><p>å› æ­¤æ”¹ä¸ºä½¿ç”¨<code>ntpdate</code>æ¥åŒæ­¥æ—¶é—´ï¼Œä½¿ç”¨é˜¿é‡Œäº‘çš„ntpæœåŠ¡å™¨ntp.cloud.aliyuncs.com</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ntpdate ntp.cloud.aliyuncs.com</span><br><span class="line">23 May 14:43:07 ntpdate[9801]: step time server 100.100.61.88 offset 3.848040 sec</span><br></pre></td></tr></table></figure><p>ç„¶åå°†æ”¹åäº†åŠ å…¥crontabä»»åŠ¡ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="comment"># å°†ä¸‹é¢å‘½ä»¤æ·»åŠ åˆ°æœ€å</span></span><br><span class="line">* * * * * ntpdate ntp.cloud.aliyuncs.com</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºï¼Œä½†æ˜¯å®é™…è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œå‘ç°æœåŠ¡çš„å®é™…è¿˜æ˜¯è·ç¦»çœŸå®æ—¶é—´è¶Šæ¥è¶Šè¿œï¼Œæ„Ÿè§‰æ˜¯ntpdateå‘½ä»¤æ²¡æœ‰å·¥ä½œï¼Œäºæ˜¯å°†å®šæ—¶ä»»åŠ¡æ”¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * ntpdate ntp.cloud.aliyuncs.com &gt;&gt; /var/<span class="built_in">log</span>/myntp.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>ä¿å­˜è¿è¡Œé€€å‡ºåï¼ŒæŸ¥çœ‹ntpdateè¿è¡Œæ—¥å¿—ï¼Œæœç„¶å­˜åœ¨é—®é¢˜<code>/bin/sh: 1: ntpdate: not found</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tail -f myntp.log</span><br><span class="line">/bin/sh: 1: ntpdate: not found</span><br><span class="line">/bin/sh: 1: ntpdate: not found</span><br><span class="line">/bin/sh: 1: ntpdate: not found</span><br></pre></td></tr></table></figure><p>cronåœ¨è¿è¡Œæ—¶ï¼Œæ‰¾ä¸åˆ°ntpdateå‘½ä»¤ï¼Œç»§ç»­æ’æŸ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># which ntpdate</span></span><br><span class="line">/usr/sbin/ntpdate</span><br></pre></td></tr></table></figure><p>åœ¨crontabä»»åŠ¡ä¸­å¢åŠ ä¸€è¡Œ<code>* * * * * env &gt;&gt; /var/log/env.log 2&gt;&amp;1</code></p><p>å¹¶æŸ¥çœ‹æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tail -f env.log</span></span><br><span class="line">PATH=/usr/bin:/bin</span><br><span class="line">LANG=en_US.UTF-8</span><br><span class="line">SHELL=/bin/sh</span><br><span class="line">PWD=/root</span><br></pre></td></tr></table></figure><p>ç»ˆäºå‘ç°é—®é¢˜äº†ï¼Œcrontabè¿è¡Œæ—¶æŸ¥æ‰¾å‘½ä»¤çš„è·¯å¾„ä¸º<code>/usr/bin</code> å’Œ<code>/bin</code>ç›®å½•ï¼Œè€Œä¸åŒ…å«<code>/usr/sbin/</code></p><p>æˆ‘ä»¬å¯ä»¥åœ¨crontabä¸­å¢åŠ <code>PATH=$PATH:/usr/sbin/</code>,ä¹Ÿå¯ä»¥ä½¿ç”¨ntpdateçš„ç»å¯¹è·¯å¾„ï¼Œå°†ä¹‹å‰ntpdateä»»åŠ¡æ”¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * /usr/sbin/ntpdate ntp.cloud.aliyuncs.com</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºåï¼Œè§‚å¯ŸæœåŠ¡å™¨æ—¶é—´ï¼Œå‘ç°å·²ç»å˜ä¸ºæ­£å¸¸æ—¶é—´äº†ã€‚</p><h2 id="crontabè®¾ç½®"><a href="#crontabè®¾ç½®" class="headerlink" title="crontabè®¾ç½®"></a>crontabè®¾ç½®</h2><p>æœ€å‰é¢5æ®µç”¨äºè®¾ç½®å‘¨æœŸæ—¶é—´</p><p><img src="https://oss.smart-lifestyle.cn/file/rdivm.png" alt="image-20210521150550791"></p><p>è¿™é‡Œä¸¾ä¸€äº›å¸¸ç”¨çš„ä¾‹å­ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ª<a href="https://crontab.guru/">ç½‘ç«™</a>è¿›è¡Œæµ‹è¯•</p><ul><li><p>æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</p><p><code>* * * * *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/sgflk.png" alt="image-20210521145726370"></p></li><li><p>æ¯éš”ååˆ†é’Ÿè¿è¡Œä¸€æ¬¡(ğŸ“¢è¿™é‡Œçš„æ¯ä¸ª10åˆ†é’Ÿï¼Œä¸æ˜¯ä»ç°åœ¨æˆ–è€…ä»»åŠ¡å¼€å§‹ç®—èµ·ï¼Œè€Œæ˜¯æ¯å°æ—¶çš„ç¬¬ååˆ†é’Ÿï¼Œ10ï¼Œ20ï¼Œ 30â€¦.)</p><p><code>*/10 * * * *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/qpet2.png" alt="image-20210521145941538"></p></li><li><p>æ¯å¤©æ™šä¸Š23ï¼š55æ‰§è¡Œä¸€æ¬¡</p><p><code>55 23 * * *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/udg1l.png" alt="image-20210521150051826"></p></li><li><p>æ¯éš”ä¸¤ä¸ªæœˆçš„ç¬¬ä¸€å¤©æ™šä¸Š23ï¼š55æ‰§è¡Œä¸€æ¬¡ï¼ˆæ¯”å¦‚ç”¨äºsslè¯ä¹¦çš„æ›´æ–°ï¼‰</p><p><code>55 23 1 */2 *</code></p><p><img src="https://oss.smart-lifestyle.cn/file/w278h.png" alt="image-20210521150255631"></p></li><li><p>æ¯å‘¨äº”æ™šä¸Š23ï¼š55å‘é€æŠ¥è¡¨</p><p><code>55 23 * * 5</code></p><p><img src="https://oss.smart-lifestyle.cn/file/xlh36.png" alt="image-20210521150430138"></p></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://crontab.guru/#*_*_*_*_*">crontab tool</a></p><p>[2] <a href="https://stackoverflow.com/questions/4811738/how-to-log-cron-jobs">log cron jobs</a></p><p>[3] <a href="https://www.cnblogs.com/centos2017/p/12963610.html">ntpdate: command not found</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> crontab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rancherandgithub</title>
      <link href="/posts/a8ad/"/>
      <url>/posts/a8ad/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>rancherå¤šä¸»æœºéƒ¨ç½²</title>
      <link href="/posts/ee95/"/>
      <url>/posts/ee95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†åœ¨è…¾è®¯äº‘ä¸Šå¦‚ä½•ä½¿ç”¨rancheræ­å»ºk8sé›†ç¾¤ï¼Œä»¥ä¸‹æ“ä½œä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œç”¨äºä¸ªäººæµ‹è¯•</p></blockquote><h2 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h2><p>ä½¿ç”¨åˆ°çš„æœåŠ¡ï¼š<a href="https://cloud.tencent.com/document/product/582/9127#null">CFS</a>ï¼Œ<a href="https://cloud.tencent.com/document/product/213/16918#null">CVM</a> ç­‰</p><p>åœ¨éƒ¨ç½²ä¸­ä½¿ç”¨çš„CVMæœåŠ¡å™¨é…ç½®å¦‚ä¸‹ï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/svwr6.png" alt="image-20210623144304343"></p><p>ä½¿ç”¨çš„æ–‡ä»¶å­˜å‚¨é…ç½®å¦‚ä¸‹ï¼š</p><p><img src="https://oss.smart-lifestyle.cn/file/pgg6q.png" alt="image-20210624143319616"></p><h3 id="ç«¯å£è¦æ±‚"><a href="#ç«¯å£è¦æ±‚" class="headerlink" title="ç«¯å£è¦æ±‚"></a>ç«¯å£è¦æ±‚</h3><p>å‚è€ƒï¼š<a href="https://docs.rancher.cn/docs/rancher2/installation/requirements/ports/_index">ç«¯å£è¦æ±‚ | Rancheræ–‡æ¡£</a>ï¼›éœ€è¦åœ¨å®‰å…¨ç»„å†…å¼€æ”¾ä»¥ä¸Šç«¯å£</p><p>å…¶ä¸­</p><table><thead><tr><th>master</th><th>2æ ¸4G</th><th>å®‰è£…rancher serverï¼Œ é›†ç¾¤etcdã€controlè§’è‰²</th></tr></thead><tbody><tr><td>node</td><td>4æ ¸8G</td><td>å®‰è£…k8s èŠ‚ç‚¹ï¼Œé›†ç¾¤workerè§’è‰²</td></tr></tbody></table><h2 id="å®‰è£…rancher-server"><a href="#å®‰è£…rancher-server" class="headerlink" title="å®‰è£…rancher server"></a>å®‰è£…rancher server</h2><p>Sshè¿œç¨‹è¿æ¥åˆ°masterèŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull rancher/rancher</span><br><span class="line">sudo docker run -d --privileged --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ‰§è¡Œæ—¶ï¼Œä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œå¦‚æœä½¿ç”¨CAç­¾åè¯ä¹¦ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹<a href="https://docs.rancher.cn/docs/rancher2.5/installation/other-installation-methods/single-node-docker/_index/">å‘½ä»¤</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d  --restart=unless-stopped \</span><br><span class="line">-p 80:80 -p 443:443 \</span><br><span class="line">-v &lt;rancher/data path&gt;:/var/lib/rancher \</span><br><span class="line">-v &lt;full_chain.pem path&gt;:/etc/rancher/ssl/cert.pem \</span><br><span class="line">-v &lt;private.pem path&gt;:/etc/rancher/ssl/key.pem \</span><br><span class="line">-v /var/<span class="built_in">log</span>/rancher/auditlog:/var/<span class="built_in">log</span>/auditlog \</span><br><span class="line">--privileged --name rancher-server  rancher/rancher --no-cacerts</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ é›†ç¾¤"><a href="#æ·»åŠ é›†ç¾¤" class="headerlink" title="æ·»åŠ é›†ç¾¤"></a>æ·»åŠ é›†ç¾¤</h2><p>ç™»å½•åˆ°Rancher ç®¡ç†é¡µé¢</p><p><img src="https://oss.smart-lifestyle.cn/file/orl7g.png" alt="image-20210511144233895"></p><p>ç‚¹å‡»æ·»åŠ é›†ç¾¤ï¼Œé€‰æ‹©è‡ªå®šä¹‰</p><p><img src="https://oss.smart-lifestyle.cn/file/skrdl.png" alt="image-20210511144255559"></p><h3 id="é…ç½®masterèŠ‚ç‚¹"><a href="#é…ç½®masterèŠ‚ç‚¹" class="headerlink" title="é…ç½®masterèŠ‚ç‚¹"></a>é…ç½®masterèŠ‚ç‚¹</h3><ol><li>é€‰æ‹©Etcdã€Controlè§’è‰²</li><li>å¡«å†™å†…ç½‘åœ°å€</li><li>å¡«å†™èŠ‚ç‚¹åç§°</li></ol><p><img src="https://oss.smart-lifestyle.cn/file/uebzb.png" alt="image-20210511152659512"></p><p>ç„¶åä¼šç”Ÿæˆå‘½ä»¤ï¼Œåœ¨MasterèŠ‚ç‚¹ä¸»æœºä¸Šæ‰§è¡Œ</p><p><img src="https://oss.smart-lifestyle.cn/file/9aknb.png" alt="image-20210624131205714"></p><h3 id="é…ç½®workerèŠ‚ç‚¹"><a href="#é…ç½®workerèŠ‚ç‚¹" class="headerlink" title="é…ç½®workerèŠ‚ç‚¹"></a>é…ç½®workerèŠ‚ç‚¹</h3><ol><li>é€‰æ‹©Workerè§’è‰²</li><li>å¡«å†™å†…ç½‘åœ°å€</li><li>å¡«å†™èŠ‚ç‚¹åç§°</li></ol><p>ç„¶åä¼šç”Ÿæˆå‘½ä»¤ï¼Œåœ¨NodeèŠ‚ç‚¹ä¸»æœºä¸Šæ‰§è¡Œ</p><p><img src="https://oss.smart-lifestyle.cn/file/9aknb.png" alt="image-20210624131205714"></p><p>Rancherä¼šç›‘æµ‹è§’è‰²æ˜¯å¦é½å…¨ï¼Œå¦‚æœä¸é½å…¨ï¼Œå®ƒä¼šä¸€ç›´ç­‰å¾…ï¼Œåªæœ‰æˆ‘ä»¬åˆ›å»ºçš„èŠ‚ç‚¹åŒ…å«æ‰€æœ‰è§’è‰²ï¼Œæ‰ä¼šå»åˆ›å»ºK8sæœåŠ¡</p><h3 id="æœ€åçš„ç»“æœ"><a href="#æœ€åçš„ç»“æœ" class="headerlink" title="æœ€åçš„ç»“æœ"></a>æœ€åçš„ç»“æœ</h3><p><img src="https://oss.smart-lifestyle.cn/file/vt5r4.png" alt="image-20210624131709858"></p><h2 id="éƒ¨ç½²åº”ç”¨æµ‹è¯•"><a href="#éƒ¨ç½²åº”ç”¨æµ‹è¯•" class="headerlink" title="éƒ¨ç½²åº”ç”¨æµ‹è¯•"></a>éƒ¨ç½²åº”ç”¨æµ‹è¯•</h2><p>é€‰æ‹©å·²ç»å®‰è£…çš„é›†ç¾¤ï¼Œé€‰æ‹©å‘½åç©ºé—´Default</p><p><img src="https://oss.smart-lifestyle.cn/file/pr139.png" alt="image-20210624133826105"></p><p>é‡Œé¢æœ‰å·¥ä½œè´Ÿè½½ã€è´Ÿè½½å‡è¡¡ç­‰é¡¹</p><p><img src="https://oss.smart-lifestyle.cn/file/y9tpe.png" alt="image-20210624133946097"></p><p>ç‚¹å‡»éƒ¨ç½²æœåŠ¡ï¼Œå¡«å†™åç§°ã€dockeré•œåƒã€ç«¯å£æ˜ å°„ç­‰ï¼Œç‚¹å‡»å¯åŠ¨</p><p><img src="https://oss.smart-lifestyle.cn/file/5akkx.png" alt="image-20210624134301378"></p><p>å®Œæˆåï¼Œæ˜¾ç¤ºå½“å‰å¤„äºActiveï¼Œå¯¹å¤–æš´éœ²ç«¯å£ä¸º31621</p><p><img src="https://oss.smart-lifestyle.cn/file/hhjuh.png" alt="image-20210624134430442"></p><p>å¦‚æœæƒ³é€šè¿‡å…¬ç½‘è®¿é—®ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨å®‰å…¨ç»„å¼€æ”¾ç«¯å£</p><p><img src="https://oss.smart-lifestyle.cn/file/sqw39.png" alt="image-20210624134713237"></p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥IP/åŸŸå+ç«¯å£å·è¿›è¡Œè®¿é—®</p><p><img src="https://oss.smart-lifestyle.cn/file/bpcop.png" alt="image-20210624135020120"></p><h3 id="é€šè¿‡Ingressè®¿é—®"><a href="#é€šè¿‡Ingressè®¿é—®" class="headerlink" title="é€šè¿‡Ingressè®¿é—®"></a>é€šè¿‡Ingressè®¿é—®</h3><p>åœ¨è´Ÿè½½å‡è¡¡é¡µé¢æ·»åŠ è½¬å‘è§„åˆ™ï¼Œç‚¹å‡»ä¿å­˜ï¼Œç­‰å¾…ç”Ÿæ•ˆ</p><p><img src="https://oss.smart-lifestyle.cn/file/dcl00.png" alt="image-20210624140420462"></p><p>è¿™æ ·å°±å¯ä»¥é€šè¿‡id/åŸŸå+pathçš„æ–¹å¼è®¿é—®</p><p><img src="https://oss.smart-lifestyle.cn/file/aqhg5.png" alt="image-20210624140608911"></p><h2 id="å¢åŠ æŒä¹…å·"><a href="#å¢åŠ æŒä¹…å·" class="headerlink" title="å¢åŠ æŒä¹…å·"></a>å¢åŠ æŒä¹…å·</h2><p>ä»¥ä¸‹ä½¿ç”¨è…¾è®¯äº‘äº§å“cfs NFSæ–¹å¼æŒ‚è½½PVï¼›é¦–å…ˆéœ€è¦è´­ä¹°è…¾è®¯äº‘çš„æ–‡ä»¶å­˜å‚¨</p><h3 id="è´­ä¹°æ–‡ä»¶å­˜å‚¨"><a href="#è´­ä¹°æ–‡ä»¶å­˜å‚¨" class="headerlink" title="è´­ä¹°æ–‡ä»¶å­˜å‚¨"></a>è´­ä¹°æ–‡ä»¶å­˜å‚¨</h3><ol><li><p>æ–°å»ºæ–‡ä»¶ç³»ç»Ÿ</p></li><li><p>è´­ä¹°èµ„æºåŒ…(ä¸ªäººæµ‹è¯•å»ºè®®é€‰æ‹©è·Ÿäº‘ä¸»æœºåŒä¸€åŒºåŸŸçš„)</p><p><img src="https://oss.smart-lifestyle.cn/file/hp09i.png" alt="image-20210624141158272"></p></li><li><p>æŸ¥çœ‹æŒ‚ç‚¹ä¿¡æ¯ä¸­çš„IP</p><p><img src="https://oss.smart-lifestyle.cn/file/4jo9q.png" alt="image-20210624141316684"></p></li></ol><h3 id="åœ¨Rancherä¸­æ·»åŠ æŒä¹…å·PV"><a href="#åœ¨Rancherä¸­æ·»åŠ æŒä¹…å·PV" class="headerlink" title="åœ¨Rancherä¸­æ·»åŠ æŒä¹…å·PV"></a>åœ¨Rancherä¸­æ·»åŠ æŒä¹…å·PV</h3><p>é€‰æ‹©é›†ç¾¤ï¼Œç„¶åé€‰æ‹©å­˜å‚¨â€“æŒä¹…å·ï¼Œç‚¹å‡»æ·»åŠ PV</p><ul><li>å·æ’ä»¶é€‰æ‹©NFS Share</li><li>æœåŠ¡å™¨å¡«å†™ä¸Šä¸€æ­¥ç”Ÿæˆçš„åœ°å€</li><li>è·¯å¾„å¡«å†™/ï¼›æ–°å»ºçš„NFSç³»ç»Ÿä¸­æ²¡æœ‰å…¶ä»–æ–‡ä»¶å¤¹ï¼Œ<strong>å¦‚æœæƒ³æŒ‚è½½äºŒçº§ç›®å½•ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨åˆ›å»ºç›®å½•</strong></li><li>è®¿é—®æ¨¡å¼é€‰æ‹©å¤šä¸»æœºè¯»å†™</li></ul><p><img src="https://oss.smart-lifestyle.cn/file/gujzs.png" alt="image-20210624141553553"></p><h3 id="æ·»åŠ PVC"><a href="#æ·»åŠ PVC" class="headerlink" title="æ·»åŠ PVC"></a>æ·»åŠ PVC</h3><p>ç‚¹å‡»æ·»åŠ PVCï¼Œé€‰æ‹©ä¸Šä¸€æ­¥æ–°å»ºçš„æŒä¹…å·ï¼ˆä¸€ä¸ªPVåªèƒ½åœ¨ä¸€ä¸ªPVCä¸‹é¢ï¼‰ï¼Œåˆ é™¤PVCæ—¶ï¼Œä¼šå°†PVä¹Ÿâ€œåˆ é™¤â€ğŸ˜±</p><p><img src="https://oss.smart-lifestyle.cn/file/8iwlx.png" alt="image-20210624141855083"></p><h3 id="æŒ‚è½½æ•°æ®å·"><a href="#æŒ‚è½½æ•°æ®å·" class="headerlink" title="æŒ‚è½½æ•°æ®å·"></a>æŒ‚è½½æ•°æ®å·</h3><p>æ–°å»ºå·¥ä½œè´Ÿè½½æˆ–è€…å‡çº§å·²æœ‰è´Ÿè½½</p><p>é€‰æ‹©æ•°æ®å·â€“æ·»åŠ å·â€“ä½¿ç”¨ç°æœ‰PVC</p><ul><li>æ·»åŠ æ­£ç¡®çš„å®¹å™¨è·¯å¾„</li><li>å­è·¯å¾„å¡«å†™ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºæ ¹è·¯å¾„ï¼‰ï¼Œè¿™é‡Œé¢å†™çš„è·¯å¾„ï¼Œä¼šè‡ªåŠ¨åœ¨NFSæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºğŸ˜„</li></ul><p><img src="https://oss.smart-lifestyle.cn/file/2wyug.png" alt="image-20210624142438484"></p><p>é€šè¿‡df -h èƒ½çœ‹åˆ°æŒ‚è½½æˆåŠŸ</p><p><img src="https://oss.smart-lifestyle.cn/file/s4f4n.png" alt="image-20210624142958655"></p><h2 id="è¯ä¹¦ç”³è¯·"><a href="#è¯ä¹¦ç”³è¯·" class="headerlink" title="è¯ä¹¦ç”³è¯·"></a>è¯ä¹¦ç”³è¯·</h2><p>å…è´¹è¯ä¹¦å¯ä»¥åœ¨è¿™ä¸ª<a href="https://freessl.cn/">ç½‘ç«™</a>ç”Ÿæˆï¼Œä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå…·ä½“ä½¿ç”¨å‚è€ƒç½‘ä¸Šè¯´æ˜</p><p><img src="https://oss.smart-lifestyle.cn/file/p0hg5.png" alt="image-20210624143604995"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.rancher.cn/docs/rancher2.5/installation/other-installation-methods/single-node-docker/_index/">å®‰è£…æŒ‡å— | Rancheræ–‡æ¡£</a></p><p>[2] <a href="https://docs.rancher.cn/docs/rancher2/installation/requirements/_index/">å…·ä½“è¦æ±‚ | Rancheræ–‡æ¡£</a></p><p>[3] <a href="https://docs.rancher.cn/docs/rancher2/quick-start-guide/deployment/quickstart-manual-setup/_index">æ‰‹åŠ¨å¿«é€Ÿéƒ¨ç½² | Rancheræ–‡æ¡£</a></p><p>[4] <a href="https://docs.rancher.cn/docs/rancher2/best-practices/use-in-china/_index/">å¦‚ä½•åœ¨å›½å†…ä½¿ç”¨ Rancher | Rancheræ–‡æ¡£</a></p><p>[5] <a href="https://docs.rancher.cn/docs/rancher2/installation/other-installation-methods/single-node-docker/troubleshooting/_index/">è¯ä¹¦ç›¸å…³çš„é—®é¢˜æ’æŸ¥ | Rancheræ–‡æ¡£</a></p><p>[6] <a href="https://docs.rancher.cn/docs/rancher2.5/installation/other-installation-methods/single-node-docker/advanced/_index/">å•èŠ‚ç‚¹å®‰è£…çš„é«˜çº§é€‰é¡¹ | Rancheræ–‡æ¡£</a></p><p>[7] <a href="https://docs.rancher.cn/docs/rancher2.5/admin-settings/replace-ip-domain/_index/">å˜æ›´ Rancher Server IP æˆ–åŸŸå | Rancheræ–‡æ¡£</a></p><p>[8] <a href="https://github.com/theAkito/rancher-helpers/blob/master/scripts/cleanup_rancher.sh">rancher-helpers/cleanup_rancher.sh at master Â· theAkito/rancher-helpers (github.com)</a></p><p>[9] <a href="https://blog.csdn.net/aixiaoyang168/article/details/88664263">Rancher 2.x è´Ÿè½½å‡è¡¡é…ç½®åŠä½¿ç”¨_å“_å°ç¾Šçš„åšå®¢-CSDNåšå®¢_rancher è´Ÿè½½å‡è¡¡</a></p><p>[10] <a href="https://blog.csdn.net/aixiaoyang168/article/details/88600530#t12">Rancher 2.x æ­å»ºåŠç®¡ç† Kubernetes é›†ç¾¤_å“_å°ç¾Šçš„åšå®¢-CSDNåšå®¢_rancher</a></p><p>[11] <a href="https://cloud.tencent.com/document/product/582/36929">æ–‡ä»¶å­˜å‚¨ åœ¨å®¹å™¨ä¸Šä½¿ç”¨ CFS - æœ€ä½³å®è·µ - æ–‡æ¡£ä¸­å¿ƒ - è…¾è®¯äº‘ (tencent.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
            <tag> rancher </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>traefik</title>
      <link href="/posts/7112/"/>
      <url>/posts/7112/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>sentryåˆè¯•ç‰›åˆ€</title>
      <link href="/posts/a9f1/"/>
      <url>/posts/a9f1/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sentry </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå¤šçº¿ç¨‹</title>
      <link href="/posts/76d7/"/>
      <url>/posts/76d7/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mongo</title>
      <link href="/posts/1cbb/"/>
      <url>/posts/1cbb/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptæ·±åº¦æ‹·è´</title>
      <link href="/posts/b60b/"/>
      <url>/posts/b60b/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python thread result</title>
      <link href="/posts/5f19/"/>
      <url>/posts/5f19/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nvmç”¨æ³•</title>
      <link href="/posts/688d/"/>
      <url>/posts/688d/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>pythonè¿›é˜¶--é­”æ³•å‡½æ•°</title>
      <link href="/posts/4e20/"/>
      <url>/posts/4e20/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä»“åº“ç”¨æˆ·æƒé™é—®é¢˜</title>
      <link href="/posts/f5f9/"/>
      <url>/posts/f5f9/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªgithubè´¦å·è¿›è¡Œä»£ç çš„æ‹‰å»å’Œæ¨é€ï¼Œä½†å‡å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œè€Œä¸”éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªgithubè´¦å·ï¼Œå¯èƒ½ä¼šå‡ºç°authentication error</p></blockquote><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>git config user.email</code>æ˜¯æ²¡æœ‰åŠæ³•æ›´æ”¹è¿™ä¸ªä»“åº“çš„è®¤è¯ä¿¡æ¯çš„</p><p>è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬é€šè¿‡httpsæ“ä½œä»“åº“æ—¶ï¼Œä¼šä½¿ç”¨ç¼“å­˜åœ¨æœ¬æœºçš„æˆæƒè®¤è¯ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¼šä½¿ç”¨ä¹‹å‰è´¦æˆ·çš„ä¿¡æ¯ã€‚</p><p>æ›´æ”¹æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œç»™ä»“åº“åœ°å€ä¸ŠåŠ ä¸Šä½ æ‰€è¦ä½¿ç”¨çš„ç”¨æˆ·å(username2)å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> repo</span><br><span class="line">git remote set-url origin https://username2@github.com/&lt;username&gt;/repo</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/65932601/how-to-change-user-for-git-repository">How to change user for git repository</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git abc tutorial</title>
      <link href="/posts/de34/"/>
      <url>/posts/de34/</url>
      
        <content type="html"><![CDATA[<h1 id="git-abc"><a href="#git-abc" class="headerlink" title="git-abc"></a>git-abc</h1><p>ä¸‹é¢ä»‹ç»ç»å¸¸ç”¨åˆ°ä¸”æœ€åŸºæœ¬çš„git å‘½ä»¤</p><h2 id="ä»“åº“ç®¡ç†"><a href="#ä»“åº“ç®¡ç†" class="headerlink" title="ä»“åº“ç®¡ç†"></a>ä»“åº“ç®¡ç†</h2><h3 id="åˆ›å»ºæœ¬åœ°ä»“åº“"><a href="#åˆ›å»ºæœ¬åœ°ä»“åº“" class="headerlink" title="åˆ›å»ºæœ¬åœ°ä»“åº“"></a>åˆ›å»ºæœ¬åœ°ä»“åº“</h3><ul><li><code>git init</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir git-abc</span><br><span class="line"><span class="built_in">cd</span> git-abc</span><br><span class="line">git init</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/qm2vb.png" alt="image-20210331222402099"></p><h3 id="æ·»åŠ è¿œç¨‹åˆ†æ”¯"><a href="#æ·»åŠ è¿œç¨‹åˆ†æ”¯" class="headerlink" title="æ·»åŠ è¿œç¨‹åˆ†æ”¯"></a>æ·»åŠ è¿œç¨‹åˆ†æ”¯</h3><ul><li><code>git remote add &lt;shortname&gt; &lt;url&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/simplezhao/git-abc.git</span><br></pre></td></tr></table></figure><h3 id="æŠ“å–è¿œç¨‹ä»£ç "><a href="#æŠ“å–è¿œç¨‹ä»£ç " class="headerlink" title="æŠ“å–è¿œç¨‹ä»£ç "></a>æŠ“å–è¿œç¨‹ä»£ç </h3><ul><li><code>git fetch &lt;remote&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/48gpy.png" alt="image-20210331223237496"></p><h3 id="æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“"><a href="#æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“" class="headerlink" title="æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“"></a>æŸ¥çœ‹æŸä¸ªè¿œç¨‹ä»“åº“</h3><ul><li><code>git remote show &lt;remote&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/50dkt.png" alt="image-20210331223628444"></p><h3 id="åŒæ­¥è¿œç¨‹åˆ†æ”¯"><a href="#åŒæ­¥è¿œç¨‹åˆ†æ”¯" class="headerlink" title="åŒæ­¥è¿œç¨‹åˆ†æ”¯"></a>åŒæ­¥è¿œç¨‹åˆ†æ”¯</h3><ul><li><code>git checkout -b &lt;branch&gt; &lt;remote&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b main origin/main</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/vkntn.png" alt="image-20210331224921389"></p><h2 id="ä»£ç ç®¡ç†"><a href="#ä»£ç ç®¡ç†" class="headerlink" title="ä»£ç ç®¡ç†"></a>ä»£ç ç®¡ç†</h2><h3 id="æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€"><a href="#æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€"></a>æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€</h3><ul><li><code>git status</code></li></ul><ol><li>ä¿®æ”¹readme.mdæ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>æç¤ºæ–‡ä»¶è¢«ä¿®æ”¹</p><p><img src="https://oss.smart-lifestyle.cn/file/jjthz.png" alt="image-20210331225856222"></p><ol start="2"><li>æ–°å¢ä¸€ä¸ªreadme_en.mdæ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>æç¤ºæœ‰æœªè·Ÿè¸ªçš„æ–‡ä»¶</p><p><img src="https://oss.smart-lifestyle.cn/file/ttydm.png" alt="image-20210331230055526"></p><h3 id="æ·»åŠ æ–‡ä»¶"><a href="#æ·»åŠ æ–‡ä»¶" class="headerlink" title="æ·»åŠ æ–‡ä»¶"></a>æ·»åŠ æ–‡ä»¶</h3><ul><li><p><code>git add .</code> æ·»åŠ æ‰€æœ‰æ–‡ä»¶</p></li><li><p><code>git add &lt;file&gt;</code>æ·»åŠ æŒ‡å®šæ–‡ä»¶</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">git add .</span><br></pre></td></tr></table></figure><p>æ·»åŠ æˆåŠŸåï¼Œæ˜¾ç¤ºå‡†å¤‡æäº¤çš„æ–‡ä»¶</p><p><img src="https://oss.smart-lifestyle.cn/file/2m0ge.png" alt="image-20210331230400289"></p><h3 id="æäº¤æ–‡ä»¶"><a href="#æäº¤æ–‡ä»¶" class="headerlink" title="æäº¤æ–‡ä»¶"></a>æäº¤æ–‡ä»¶</h3><ul><li><code>git commit -a</code> åœ¨é»˜è®¤ç¼–è¾‘å™¨å†…å¢åŠ æœ¬æ¬¡æäº¤å†…å®¹</li><li><code>git commit -m &lt;message&gt;</code>ç®€çŸ­æäº¤</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;update readme file and add new readme for english version&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/xkx4s.png" alt="image-20210331230900239"></p><h3 id="æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯"><a href="#æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯" class="headerlink" title="æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯"></a>æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯</h3><ul><li><code>git push &lt;shortname&gt; &lt;branch&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin main</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/136q4.png" alt="image-20210331231029318"></p><h3 id="æŸ¥çœ‹æäº¤è®°å½•"><a href="#æŸ¥çœ‹æäº¤è®°å½•" class="headerlink" title="æŸ¥çœ‹æäº¤è®°å½•"></a>æŸ¥çœ‹æäº¤è®°å½•</h3><ul><li><code>git log</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/wvarp.png" alt="image-20210331231130554"></p><h2 id="ä»£ç åˆå¹¶"><a href="#ä»£ç åˆå¹¶" class="headerlink" title="ä»£ç åˆå¹¶"></a>ä»£ç åˆå¹¶</h2><p>å¤šäººå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œéœ€è¦å…±åŒç»´æŠ¤åŒä¸€ä¸ªä»£ç åº“ï¼Œå‡å¦‚æ¯ä¸ªäººè´Ÿè´£ç‹¬ç«‹çš„æ¨¡å—ï¼Œä¸ä¼šæ¶‰åŠåˆ°ä»£ç å†²çª</p><p>æŸæ¬¡æäº¤æ—¶ï¼Œæç¤ºå¦‚ä¸‹é—®é¢˜</p><p><img src="https://oss.smart-lifestyle.cn/file/d62zw.png" alt="image-20210331232246543"></p><p>è¿™æ˜¯å› ä¸ºè¿œç¨‹åˆ†æ”¯è¦ä¼˜å…ˆæœ¬åœ°çš„åˆ†æ”¯ï¼Œéœ€è¦å…ˆæ‰§è¡Œgit pullï¼Œç„¶ååœ¨æ‰§è¡Œgit pushå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull origin main</span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œpullæ—¶ä¼šæç¤ºMergeä¿¡æ¯</p><p><img src="https://oss.smart-lifestyle.cn/file/xq0ww.png" alt="image-20210331232418971"></p><p>å®Œæˆå¹¶é€€å‡ºç¼–è¾‘åï¼Œæç¤ºpullä¿¡æ¯</p><p><img src="https://oss.smart-lifestyle.cn/file/ct9wp.png" alt="image-20210331232514825"></p><p>å†æ¬¡æ‰§è¡Œgit push origin mainï¼Œæ˜¾ç¤ºæäº¤æˆåŠŸ</p><p><img src="https://oss.smart-lifestyle.cn/file/lwto3.png" alt="image-20210331232632195"></p><h2 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a>åˆ†æ”¯ç®¡ç†</h2><h3 id="åˆ›å»ºæ–°çš„åˆ†æ”¯"><a href="#åˆ›å»ºæ–°çš„åˆ†æ”¯" class="headerlink" title="åˆ›å»ºæ–°çš„åˆ†æ”¯"></a>åˆ›å»ºæ–°çš„åˆ†æ”¯</h3><ul><li><code>git branch &lt;branch&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch hotfix</span><br><span class="line">git checkout hotfix</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ”¯åˆå¹¶"><a href="#åˆ†æ”¯åˆå¹¶" class="headerlink" title="åˆ†æ”¯åˆå¹¶"></a>åˆ†æ”¯åˆå¹¶</h3><p>åœ¨ä¸Šä¸€æ­¥æ“ä½œï¼Œå› ä¸ºç³»ç»Ÿå‡ºç°bugï¼Œç´§æ€¥åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶ååœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œä¿®å¤ï¼Œä¿®æ”¹æµ‹è¯•éªŒè¯å®Œæ¯•åï¼Œä»hotfixåˆ†æ”¯åˆå¹¶åˆ°mainåˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git merge hotfix</span><br></pre></td></tr></table></figure><p><img src="https://oss.smart-lifestyle.cn/file/8q60h.png" alt="image-20210331235235214"></p><h3 id="åˆ†æ”¯åˆ é™¤"><a href="#åˆ†æ”¯åˆ é™¤" class="headerlink" title="åˆ†æ”¯åˆ é™¤"></a>åˆ†æ”¯åˆ é™¤</h3><ul><li><code>git branch -d &lt;branch&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d hotfix</span><br></pre></td></tr></table></figure><h3 id="æ‰“æ ‡ç­¾"><a href="#æ‰“æ ‡ç­¾" class="headerlink" title="æ‰“æ ‡ç­¾"></a>æ‰“æ ‡ç­¾</h3><ul><li><p><code>git tag</code></p></li><li><p><code>git tag -a &lt;version&gt; -m &lt;message&gt;</code></p></li></ul><p>é€šè¿‡<code>git tag</code>æŸ¥çœ‹ä»“åº“å†…å·²ç»å­˜åœ¨çš„æ ‡ç­¾åˆ—è¡¨</p><h4 id="åˆ›å»ºæ ‡ç­¾"><a href="#åˆ›å»ºæ ‡ç­¾" class="headerlink" title="åˆ›å»ºæ ‡ç­¾"></a>åˆ›å»ºæ ‡ç­¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a <span class="string">&#x27;1.0&#x27;</span> -m <span class="string">&quot;first version&quot;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨è½»é‡çº§æ ‡ç­¾</p><p><code>git tag 1.0-a</code></p><h4 id="å…±äº«æ ‡ç­¾"><a href="#å…±äº«æ ‡ç­¾" class="headerlink" title="å…±äº«æ ‡ç­¾"></a>å…±äº«æ ‡ç­¾</h4><p>é»˜è®¤æƒ…å†µä¸‹ git pushå‘½ä»¤ä¸ä¼šæŠŠæ ‡ç­¾ä¼ é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå¿…é¡»æ˜¾å¼åœ°æ¨é€æ ‡ç­¾åˆ°æœåŠ¡å™¨ï¼Œç±»ä¼¼äºæ¨é€ä»£ç </p><p><code>git push &lt;shortname&gt; &lt;tagname&gt;</code></p><p>å¦‚æœæƒ³ä¸€æ¬¡æ¨é€å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p><p><code>git push &lt;shortname&gt; --tags</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin 1.0</span><br><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><p>æ¨é€æŒ‡å®šæ ‡ç­¾</p><p><img src="https://oss.smart-lifestyle.cn/file/o6cju.png" alt="image-20210401001342160"></p><p>æ¨é€æ‰€æœ‰æ ‡ç­¾</p><p><img src="https://oss.smart-lifestyle.cn/file/fyqxl.png" alt="image-20210401001405265"></p><h2 id="git-é…ç½®"><a href="#git-é…ç½®" class="headerlink" title="git é…ç½®"></a>git é…ç½®</h2><p>ä½¿ç”¨<code>git config -l </code>æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®</p><h3 id="é…ç½®å…¨å±€ä¿¡æ¯"><a href="#é…ç½®å…¨å±€ä¿¡æ¯" class="headerlink" title="é…ç½®å…¨å±€ä¿¡æ¯"></a>é…ç½®å…¨å±€ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®å½“å‰ä»“åº“ä¿¡æ¯"><a href="#é…ç½®å½“å‰ä»“åº“ä¿¡æ¯" class="headerlink" title="é…ç½®å½“å‰ä»“åº“ä¿¡æ¯"></a>é…ç½®å½“å‰ä»“åº“ä¿¡æ¯</h3><p>å’Œå…¨å±€åŒºåˆ«åœ¨äºå»æ‰â€“globalæ ‡è®°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">git config user.email <span class="string">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://git-scm.com/book/en/v2">Book: Pro Git</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python web--flask jsonify unicode</title>
      <link href="/posts/9b/"/>
      <url>/posts/9b/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç±»ä¼¼äºjson.dumpsä¸­ensure_asciiçš„é…ç½®ï¼Œåœ¨flaskä¸­ä¹Ÿæœ‰ç±»ä¼¼é…ç½®ï¼Œæ¥é¿å…jsonifyæ—¶ï¼Œè¿”å›unicodeç¼–ç å­—ç¬¦</p></blockquote><p>åœ¨flask configä¸­åŠ å…¥<code>app.config[&#39;JSON_AS_ASCII&#39;] = False</code>æ¥é¿å…jsonifyå¯¹éasciiå­—ç¬¦è¿›è¡Œunicodeç¼–ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_object(app_config)</span><br><span class="line">app.config.from_mapping(</span><br><span class="line">    SQLALCHEMY_DATABASE_URI=<span class="string">f&quot;postgresql+psycopg2://<span class="subst">&#123;app_config.DB_USER&#125;</span>:<span class="subst">&#123;app_config.DB_PASSWORD&#125;</span>&quot;</span></span><br><span class="line">                            <span class="string">f&quot;@<span class="subst">&#123;app_config.DB_HOST&#125;</span>:<span class="subst">&#123;app_config.DB_PORT&#125;</span>/<span class="subst">&#123;app_config.DB_NAME&#125;</span>&quot;</span>,</span><br><span class="line">    SQLALCHEMY_TRACK_MODIFICATIONS=<span class="literal">False</span>,</span><br><span class="line">    <span class="comment"># SQLALCHEMY_ECHO=True</span></span><br><span class="line">)</span><br><span class="line">app.config[<span class="string">&#x27;JSON_AS_ASCII&#x27;</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] [<a href="https://stackoverflow.com/questions/37531067/how-to-prevent-unicode-representation-for-latin1-characters">How to prevent Unicode representation for Latin1 characters?</a>]</p>]]></content>
      
      
      <categories>
          
          <category> flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> flask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python json.dumps unicode</title>
      <link href="/posts/b1/"/>
      <url>/posts/b1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨dumps/dumpä¸­ä½¿ç”¨ensure_ascii=Falseï¼Œæ¥æ‰‹åŠ¨ç¼–ç ä¸ºUTF8æ ¼å¼</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># è¾“å‡ºä¸ºUnicodeç¼–ç ï¼Œä¸ä¾¿äºå¯è§†åŒ–</span></span><br><span class="line">&gt; json.dumps(<span class="string">&quot;æˆ‘çˆ±ChinağŸ‡¨ğŸ‡³&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&quot;\\u6211\\u7231China\\ud83c\\udde8\\ud83c\\uddf3&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line">&gt; json.dumps(<span class="string">&quot;æˆ‘çˆ±ChinağŸ‡¨ğŸ‡³&quot;</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="string">&#x27;&quot;æˆ‘çˆ±ChinağŸ‡¨ğŸ‡³&quot;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/18337407/saving-utf-8-texts-with-json-dumps-as-utf8-not-as-u-escape-sequence">json dumps unicode</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> json </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kombu.exceptions.EncodeError XXXX is not JSON serializable</title>
      <link href="/posts/3277/"/>
      <url>/posts/3277/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡è®°å½•åœ¨ä½¿ç”¨celeryæ—¶ï¼Œä»»åŠ¡å‡½æ•°å‚æ•°åºåˆ—åŒ–é—®é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@celery_app.task(<span class="params">name=<span class="string">&quot;create_subscription&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_subscription_file</span>(<span class="params">req: SubscriptionRequest</span>):</span></span><br><span class="line"></span><br><span class="line">    req = SubscriptionRequest(**kwargs)</span><br><span class="line">    subscription_count = req.count</span><br><span class="line">    run_times = math.ceil(subscription_count / <span class="number">200</span>)</span><br><span class="line">    results = &#123;</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;validDateTime&quot;</span>: <span class="literal">None</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionRequest</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    bearer_token: <span class="built_in">str</span> = <span class="literal">None</span></span><br><span class="line">    validDateTime: datetime = <span class="literal">None</span></span><br><span class="line">    validPeriodTime: <span class="built_in">int</span> = <span class="number">12</span></span><br><span class="line">    count: <span class="built_in">int</span> = <span class="number">200</span></span><br><span class="line">    deviceTypeId: <span class="built_in">int</span> = <span class="number">2</span></span><br><span class="line">    subscriptionLevelId: <span class="built_in">int</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">data_json</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.json(exclude=&#123;<span class="string">&#x27;bearer_token&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @validator(<span class="params"><span class="string">&#x27;validDateTime&#x27;</span></span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_default_date</span>(<span class="params">cls, v</span>):</span></span><br><span class="line">        <span class="keyword">if</span> v <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            v = get_default_valid_datetime()</span><br><span class="line">        <span class="keyword">return</span> v</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">default</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.json()</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå‡†å¤‡ä½¿ç”¨pydanticä½œä¸ºå‚æ•°æ ¡éªŒï¼Œå› æ­¤åœ¨ä¼ é€’ç»™celery taskæ—¶ï¼Œä¼ é€’äº†ä¸€ä¸ªclass Instanceï¼›æ¥ç€åœ¨ä»»åŠ¡è°ƒåº¦æ—¶æŠ¥é”™ï¼š</p><p><code>kombu.exceptions.EncodeError: SubscriptionRequest is not JSON serializable</code></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œcelery ä½¿ç”¨JSONè¿›è¡Œåºåˆ—åŒ–æ•°æ®ï¼Œå› æ­¤æ ¹æœ¬åŸå› åœ¨äºé»˜è®¤æƒ…å†µä¸‹classå®ä¾‹æ— æ³•è¢«jsonåºåˆ—åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; json.dumps(SubscriptionRequest)</span><br><span class="line">TypeError: Object of <span class="built_in">type</span> SubscriptionRequest <span class="keyword">is</span> <span class="keyword">not</span> JSON serializable</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>json.dumpsæœ‰ä¸€ä¸ªå‚æ•°defaultï¼Œåœ¨python docsæ–‡æ¡£ä¸­æè¿°å¦‚ä¸‹</p><blockquote><p>å½“ <em>default</em> è¢«æŒ‡å®šæ—¶ï¼Œå…¶åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¯å½“æŸä¸ªå¯¹è±¡æ— æ³•è¢«åºåˆ—åŒ–æ—¶å®ƒä¼šè¢«è°ƒç”¨ã€‚å®ƒåº”è¯¥è¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªå¯ä»¥è¢« JSON ç¼–ç çš„ç‰ˆæœ¬æˆ–è€…å¼•å‘ä¸€ä¸ª <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError"><code>TypeError</code></a>ã€‚å¦‚æœæ²¡æœ‰è¢«æŒ‡å®šï¼Œåˆ™ä¼šç›´æ¥å¼•å‘ <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError"><code>TypeError</code></a>ã€‚</p></blockquote><p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©defaultå‡½æ•°æ¥ä¸ºclasså®ä¾‹åˆ›å»ºä¸€ä¸ªæ–¹æ³•å®ç°å¯¹å…¶jsonåºåˆ—åŒ–ã€‚</p><p>è¿™é‡Œæ²¡æœ‰å¯¹ç±»è¿›è¡Œæ”¹é€ ï¼Œè€Œæ˜¯ä¼˜åŒ–å‡½æ•°çš„å…¥å‚</p><p>æœ€åæ”¹æˆï¼Œå…ˆä¼ é€’å‚æ•°åˆ°taskï¼Œç„¶ååœ¨taskå†…å¯¹æ‰€æœ‰å‚æ•°è¿›è¡Œpydantic æ ¡éªŒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@celery_app.task(<span class="params">name=<span class="string">&quot;create_subscription&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_subscription_file</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line"><span class="comment"># å¯¹kvå‚æ•°ä½¿ç”¨pydanticæ ¡éªŒ</span></span><br><span class="line">    req = SubscriptionRequest(**kwargs)</span><br><span class="line">    subscription_count = req.count</span><br><span class="line">    run_times = math.ceil(subscription_count / <span class="number">200</span>)</span><br><span class="line">    results = &#123;</span><br><span class="line">        <span class="string">&quot;count&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;validDateTime&quot;</span>: <span class="literal">None</span></span><br><span class="line">    &#125;</span><br><span class="line">    result_queue = Queue()</span><br><span class="line">...</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://stackoverflow.com/questions/10252010/serializing-class-instance-to-json">class serialize</a></p><p>[2] <a href="https://github.com/celery/celery/issues/5922">github issue</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> celery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŸºç¡€ -- pythonä¸excel-1</title>
      <link href="/posts/df7e/"/>
      <url>/posts/df7e/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨openpyxlå¯¹excelæ–‡ä»¶è¿›è¡Œè¯»å†™</p><p><a href="https://openpyxl.readthedocs.io/en/stable/tutorial.html">å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£</a></p></blockquote><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><h3 id="excelåŸºæœ¬æœ¯è¯­"><a href="#excelåŸºæœ¬æœ¯è¯­" class="headerlink" title="excelåŸºæœ¬æœ¯è¯­"></a>excelåŸºæœ¬æœ¯è¯­</h3><table><thead><tr><th>æœ¯è¯­</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>Spreadsheet or Workbook</td><td>excelæ–‡ä»¶</td></tr><tr><td>Worksheet or Sheet</td><td>è¡¨ï¼Œä¸€ä¸ªworkbook/spreadsheetå¯ä»¥æœ‰å¤šä¸ªsheet</td></tr><tr><td>Column</td><td>è¡¨æ ¼åˆ—Aâ€¦.Zâ€¦.</td></tr><tr><td>Row</td><td>è¡¨æ ¼è¡Œ1â€¦.10â€¦.</td></tr><tr><td>Cell</td><td>å•å…ƒæ ¼A1â€¦.A2â€¦.</td></tr></tbody></table><h3 id="å®‰è£…openpyxl"><a href="#å®‰è£…openpyxl" class="headerlink" title="å®‰è£…openpyxl"></a>å®‰è£…openpyxl</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install openpyxl -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="æ–°å»ºworkbook"><a href="#æ–°å»ºworkbook" class="headerlink" title="æ–°å»ºworkbook"></a>æ–°å»ºworkbook</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line">wb = Workbook()</span><br></pre></td></tr></table></figure><h3 id="åŠ è½½å·²ç»å­˜åœ¨çš„å·¥ä½œç°¿"><a href="#åŠ è½½å·²ç»å­˜åœ¨çš„å·¥ä½œç°¿" class="headerlink" title="åŠ è½½å·²ç»å­˜åœ¨çš„å·¥ä½œç°¿"></a>åŠ è½½å·²ç»å­˜åœ¨çš„å·¥ä½œç°¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line">wb = load_workbook(<span class="string">&#x27;File Name&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="é€‰æ‹©sheet"><a href="#é€‰æ‹©sheet" class="headerlink" title="é€‰æ‹©sheet"></a>é€‰æ‹©sheet</h3><p>é»˜è®¤Workbookåˆ›å»ºæ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªsheetï¼Œé€šè¿‡<code>ws = wb.active</code> é€‰æ‹©å¹¶ä½¿ç”¨å®ƒ</p><p>å­˜åœ¨å¤šä¸ªsheetæ—¶ï¼Œå¯ä»¥é€šè¿‡<code>ws = wb[Sheet Name]</code> é€‰æ‹©æ‰€æœ‰æ“ä½œçš„sheetï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œé€‰æ‹©</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å½“å‰æ‰€æœ‰sheetname</span></span><br><span class="line">sheetlist = wb.sheetnames</span><br><span class="line"><span class="comment"># &gt;&gt; [&#x27;1st Sheet&#x27;, &#x27;æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic&#x27;, &#x27;æ ‡ç­¾å†…å®¹ä¿¡æ¯ -Standard&#x27;, &#x27;Readme&#x27;, &#x27;Add your sheets and content...&#x27;]</span></span><br><span class="line">ws = wb[sheetlist[<span class="number">2</span>]] <span class="comment"># æˆ–è€…</span></span><br><span class="line">ws.active = <span class="number">2</span></span><br><span class="line">ws = wb.active</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰sheetåå­—</span></span><br><span class="line">ws.title</span><br><span class="line">&gt;&gt; æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic</span><br></pre></td></tr></table></figure><p><code>ws = wb[Sheet Name]</code> æ–¹æ³•æ²¡æœ‰æ”¹å˜å½“å‰æ´»è·ƒçš„è¡¨æ ¼å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wb.active</span><br><span class="line">&gt;&gt; &lt;Worksheet <span class="string">&quot;æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic&quot;</span>&gt;</span><br><span class="line">ws = wb[<span class="string">&#x27;æ ‡ç­¾å†…å®¹ä¿¡æ¯ -Standard&#x27;</span>]</span><br><span class="line">wb.active <span class="comment"># è¿˜æ˜¯è¿æ¥çš„å•å…ƒæ ¼</span></span><br><span class="line">&gt;&gt; &lt;Worksheet <span class="string">&quot;æ ‡ç­¾å†…å®¹ä¿¡æ¯- Basic&quot;</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºsheet"><a href="#æ–°å»ºsheet" class="headerlink" title="æ–°å»ºsheet"></a>æ–°å»ºsheet</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æ’åœ¨æœ€åä½ç½®</span></span><br><span class="line">ws = wb.create_sheet(<span class="string">&#x27;Sheet Name&#x27;</span>)</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åœ¨sheet nameå‚æ•°åå¢åŠ ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºåˆ›å»ºä½ç½®</span></span><br><span class="line">ws = wb.create_sheet(<span class="string">&#x27;Sheet Name&#x27;</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹sheet-tittle"><a href="#ä¿®æ”¹sheet-tittle" class="headerlink" title="ä¿®æ”¹sheet tittle"></a>ä¿®æ”¹sheet tittle</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ws.title = New Title</span><br></pre></td></tr></table></figure><h3 id="å†™å…¥å•å…ƒæ ¼"><a href="#å†™å…¥å•å…ƒæ ¼" class="headerlink" title="å†™å…¥å•å…ƒæ ¼"></a>å†™å…¥å•å…ƒæ ¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ws[<span class="string">&#x27;A1&#x27;</span>] = <span class="string">&#x27;Name&#x27;</span></span><br><span class="line">ws[<span class="string">&#x27;B1&#x27;</span>] = <span class="string">&#x27;Age&#x27;</span></span><br><span class="line">ws[<span class="string">&#x27;C1&#x27;</span>] = <span class="string">&#x27;score&#x27;</span></span><br><span class="line">ws[<span class="string">&#x27;A2&#x27;</span>] = <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">ws[<span class="string">&#x27;B2&#x27;</span>] = <span class="number">18</span></span><br><span class="line">ws[<span class="string">&#x27;C3&#x27;</span>] = <span class="number">95</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹"><a href="#æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹" class="headerlink" title="æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹"></a>æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ws[<span class="string">&#x27;A2&#x27;</span>].value</span><br><span class="line">&gt;&gt; <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="ä¿å­˜æ–‡ä»¶-å·¥ä½œç°¿"><a href="#ä¿å­˜æ–‡ä»¶-å·¥ä½œç°¿" class="headerlink" title="ä¿å­˜æ–‡ä»¶/å·¥ä½œç°¿"></a>ä¿å­˜æ–‡ä»¶/å·¥ä½œç°¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœfilenameå·²ç»å­˜åœ¨ï¼Œä¼šæ²¡æœ‰ç¡®è®¤çš„ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶</span></span><br><span class="line">wb.save(filename)</span><br></pre></td></tr></table></figure><h3 id="å…³é—­å·¥ä½œç°¿"><a href="#å…³é—­å·¥ä½œç°¿" class="headerlink" title="å…³é—­å·¥ä½œç°¿"></a>å…³é—­å·¥ä½œç°¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯èƒ½æ²¡æœ‰ç”¨ï¼Ÿ</span></span><br><span class="line">wb.close()</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://openpyxl.readthedocs.io/en/stable/tutorial.html">å®˜æ–¹æ–‡æ¡£</a></p><p>[2] <a href="https://stackoverflow.com/questions/41556378/openpyxl-set-active-sheet/50117733">é€‰æ‹©sheet</a></p><p>[3] <a href="https://realpython.com/openpyxl-excel-spreadsheets-python/">realpython openpyxl guide</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python web -- pydanticåŸºç¡€ç”¨æ³•-1</title>
      <link href="/posts/e075/"/>
      <url>/posts/e075/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨pydanticæ ¡éªŒè¾“å…¥å‚æ•°ï¼Œå¯ä»¥çœå»åç»­å‡½æ•°ä½“å†…çš„æ ¡éªŒï¼Œå¹¶å¯ä»¥ä½œä¸ºä¸€ä¸ªé€šç”¨çš„æ ¡éªŒå™¨æ–¹ä¾¿å…¶ä»–æ–¹æ³•è°ƒç”¨ï¼Œåšçš„å…¥å‚æ ¡éªŒä¸å…¥å‚è°ƒç”¨çš„è§£è€¦</p><p>è‘—åçš„FastAPIæ¡†æ¶ï¼Œä¹Ÿæ˜¯ä½¿ç”¨çš„pydanticä½œä¸ºhttpè¯·æ±‚ä¸­å‚æ•°çš„æ ¡éªŒ</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># need python3.6+</span></span><br><span class="line">pip install pydantic -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬æ¨¡å‹ç”¨æ³•"><a href="#åŸºæœ¬æ¨¡å‹ç”¨æ³•" class="headerlink" title="åŸºæœ¬æ¨¡å‹ç”¨æ³•"></a>åŸºæœ¬æ¨¡å‹ç”¨æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># model.py</span></span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, validator</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ¨¡å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionRequest</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    bearer_token: <span class="built_in">str</span> = <span class="literal">None</span></span><br><span class="line">    validDateTime: <span class="built_in">str</span> = <span class="literal">None</span></span><br><span class="line">    validPeriodTime: <span class="built_in">int</span> = <span class="number">12</span></span><br><span class="line">    count: <span class="built_in">int</span> = <span class="number">200</span></span><br><span class="line">    deviceTypeId: <span class="built_in">int</span> = <span class="number">2</span></span><br><span class="line">    subscriptionLevelId: <span class="built_in">int</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å¾—jsonæ ¼å¼å†…å®¹ï¼Œä¸è¿”è¿˜bearer_token</span></span><br><span class="line">    <span class="comment"># def data_json(self):</span></span><br><span class="line">    <span class="comment">#    return self.json(exclude=&#123;&#x27;bearer_token&#x27;&#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ ¡éªŒå‚æ•°</span></span><br><span class="line">    <span class="comment"># @validator(&#x27;validDateTime&#x27;)</span></span><br><span class="line">    <span class="comment"># def create_default_date(cls, v):</span></span><br><span class="line">    <span class="comment">#    if v is None:</span></span><br><span class="line">    <span class="comment">#        v = get_default_valid_datetime().strftime(&quot;%Y-%m-%dT23:59:59.000Z&quot;)</span></span><br><span class="line">    <span class="comment">#    return v</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºç»™æ¨¡å‹ä¸­æ¯ä¸ªå­—æ®µéƒ½è®¾ç½®äº†é»˜è®¤å€¼ï¼Œåœ¨æ²¡æœ‰ä¼ å…¥å‚æ•°æ—¶ä¹Ÿä¸ä¼šæŠ¥é”™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="keyword">from</span> model <span class="keyword">import</span> SubscriptionRequest</span><br><span class="line">&gt;&gt; m = SubscriptionRequest()</span><br><span class="line">&gt;&gt; <span class="built_in">print</span>(m)</span><br><span class="line">bearer_token=<span class="literal">None</span> validDateTime=<span class="literal">None</span> validPeriodTime=<span class="number">12</span> count=<span class="number">200</span> deviceTypeId=<span class="number">2</span> subscriptionLevelId=<span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç°åœ¨å°†æ¨¡å‹æ–‡ä»¶ä¸­ä¸€äº›å‚æ•°é»˜è®¤å€¼å»æ‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># model.py</span></span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, validator</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ¨¡å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionRequest</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    bearer_token: <span class="built_in">str</span></span><br><span class="line">    validDateTime: <span class="built_in">str</span></span><br><span class="line">    validPeriodTime: <span class="built_in">int</span> = <span class="number">12</span></span><br><span class="line">    count: <span class="built_in">int</span> = <span class="number">200</span></span><br><span class="line">    deviceTypeId: <span class="built_in">int</span> = <span class="number">2</span></span><br><span class="line">    subscriptionLevelId: <span class="built_in">int</span> = <span class="number">2</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ç»§ç»­æ‰§è¡Œï¼Œå°†ä¼šæç¤ºå‚æ•°ç¼ºå¤±</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="keyword">from</span> model <span class="keyword">import</span> SubscriptionRequest</span><br><span class="line">&gt;&gt; m = SubscriptionRequest()</span><br><span class="line">&gt;&gt; <span class="built_in">print</span>(m)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/Users/simple/workspace/Columbus/admin_tools/serializer.py&quot;</span>, line <span class="number">60</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    m = SubscriptionRequest()</span><br><span class="line">  File <span class="string">&quot;pydantic/main.py&quot;</span>, line <span class="number">391</span>, <span class="keyword">in</span> pydantic.main.BaseModel.__init__</span><br><span class="line">pydantic.error_wrappers.ValidationError: <span class="number">2</span> validation errors <span class="keyword">for</span> SubscriptionRequest</span><br><span class="line">bearer_token</span><br><span class="line">  field required (<span class="built_in">type</span>=value_error.missing)</span><br><span class="line">validDateTime</span><br><span class="line">  field required (<span class="built_in">type</span>=value_error.missing)</span><br></pre></td></tr></table></figure><p>æ­£å¸¸ç”¨æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; data= &#123;</span><br><span class="line"><span class="meta">... </span>       <span class="string">&#x27;bearer_token&#x27;</span>: <span class="string">&#x27;1234567==&#x27;</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">&#x27;validDateTime&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">&#x27;validPeriodTime&#x27;</span>: <span class="number">12</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">&#x27;count&#x27;</span>: <span class="number">12</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">&#x27;deviceTypeId&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="meta">... </span>       <span class="string">&#x27;subscriptionLevelId&#x27;</span>: <span class="number">2</span></span><br><span class="line"><span class="meta">... </span>   &#125;</span><br><span class="line">&gt;&gt; m = SubscriptionRequest(**data)</span><br><span class="line">&gt;&gt; <span class="built_in">print</span>(m)</span><br><span class="line">bearer_token=<span class="string">&#x27;1234567==&#x27;</span> validDateTime=<span class="string">&#x27;2022-09-01T23:59:59.000Z&#x27;</span> validPeriodTime=<span class="number">12</span> count=<span class="number">12</span> deviceTypeId=<span class="number">2</span> subscriptionLevelId=<span class="number">2</span></span><br><span class="line"><span class="comment"># è¾“å‡ºjsonæ ¼å¼</span></span><br><span class="line">&gt;&gt; m.json()</span><br><span class="line">&#123;<span class="string">&quot;bearer_token&quot;</span>: <span class="string">&quot;1234567==&quot;</span>, <span class="string">&quot;validDateTime&quot;</span>: <span class="string">&quot;2022-09-01T23:59:59.000Z&quot;</span>, <span class="string">&quot;validPeriodTime&quot;</span>: <span class="number">12</span>, <span class="string">&quot;count&quot;</span>: <span class="number">12</span>, <span class="string">&quot;deviceTypeId&quot;</span>: <span class="number">2</span>, <span class="string">&quot;subscriptionLevelId&quot;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿”å›jsonç»“æœä¸­ï¼Œé™¤äº†bearer_tokenï¼Œå…¶ä»–éƒ½æ˜¯è¦èµ‹å€¼ç»™body jsonï¼Œå› æ­¤æƒ³åœ¨jsonè¾“å‡ºä¸­å»é™¤</p><p><code>bearer_token</code></p><p>åœ¨æ¨¡å‹ç±»ä¸­å¢åŠ å¦‚ä¸‹æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è·å¾—jsonæ ¼å¼å†…å®¹ï¼Œä¸è¿”è¿˜bearer_token</span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">data_json</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.json(exclude=&#123;<span class="string">&#x27;bearer_token&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>åŒæ ·å¦‚æœæƒ³å¯¹è¾“å…¥çš„å‚æ•°åšå…·ä½“æ ¡éªŒï¼ŒvalidDateTimeå¦‚æœä¸ºNoneï¼Œå°±ä¸ºå®ƒèµ‹å€¼ä¸€ä¸ªæ—¶é—´æˆ³</p><p>åœ¨æ¨¡å‹ç±»ä¸­å¢åŠ ä¸€ä¸ªvalidator</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¡éªŒå‚æ•°</span></span><br><span class="line"><span class="meta">     @validator(<span class="params"><span class="string">&#x27;validDateTime&#x27;</span></span>)</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">create_default_date</span>(<span class="params">cls, v</span>):</span></span><br><span class="line">        <span class="keyword">if</span> v <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            v = get_default_valid_datetime().strftime(<span class="string">&quot;%Y-%m-%dT23:59:59.000Z&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> v</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_default_valid_datetime</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    é»˜è®¤æœ‰æ•ˆæœŸæ—¶é—´ä¸ºå½“å‰æ—¶é—´+1å¹´åŠ</span></span><br><span class="line"><span class="string">    :return: æ—¶é—´æˆ³å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    diff = <span class="number">365</span> + <span class="built_in">int</span>(<span class="number">365</span>/<span class="number">2</span>)</span><br><span class="line">    valid_datetime = datetime.utcnow() + timedelta(days=diff)</span><br><span class="line">    <span class="comment"># return valid_datetime.strftime(&quot;%Y-%m-%dT23:59:59.000Z&quot;)</span></span><br><span class="line">    <span class="keyword">return</span> valid_datetime</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯validatorè£…é¥°çš„ä¸ºç±»å‡½æ•°ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºclsï¼Œä¸æ˜¯selfï¼Œå¦å¤–è¿™ä¸ªå‡½æ•°è¿˜æœ‰å…¶ä»–å‚æ•°</p><ul><li><p>v ä¸ºå½“å‰å‚æ•°çš„å€¼</p></li><li><p>valuesä¸ºå½“å‰ä¼ é€’åˆ°æ¨¡å‹æ‰€æœ‰å‚æ•°çš„å­—å…¸é›†åˆï¼Œæ¯”å¦‚é€šè¿‡values[â€˜countâ€™] æ¥è·å–countçš„å€¼</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@validator(<span class="params"><span class="string">&#x27;validDateTime&#x27;</span></span>)</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">create_default_date</span>(<span class="params">cls, v, values, **kwargs</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å¦å¤–å¦‚æœæ ¡éªŒçš„å‚æ•°æ²¡æœ‰ä¼ é€’ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¸ä¼šè°ƒç”¨æ ¡éªŒæ–¹æ³•</strong></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>[1] <a href="https://pydantic-docs.helpmanual.io/usage/validators/">pydantic validators</a></p><p>[2] <a href="https://pydantic-docs.helpmanual.io/usage/exporting_models/#json_encoders">export json</a></p><p>[3] <a href="https://pydantic-docs.helpmanual.io/install/">install</a></p><p>[4] <a href="https://pydantic-docs.helpmanual.io/usage/models/">basic models</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pydantic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŸºç¡€ç¯‡--function</title>
      <link href="/posts/2f69/"/>
      <url>/posts/2f69/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> function </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŸºç¡€ç¯‡--Exception</title>
      <link href="/posts/f1e8/"/>
      <url>/posts/f1e8/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹æ€»ç»“ä¸€ä¸‹pythonçš„å¼‚å¸¸å¤„ç†</p><h2 id="åŸºç±»"><a href="#åŸºç±»" class="headerlink" title="åŸºç±»"></a>åŸºç±»</h2><h3 id="BaseException"><a href="#BaseException" class="headerlink" title="BaseException"></a>BaseException</h3><blockquote><p>æ‰€æœ‰å†…ç½®å¼‚å¸¸çš„åŸºç±»ã€‚ å®ƒä¸åº”è¯¥è¢«ç”¨æˆ·è‡ªå®šä¹‰ç±»ç›´æ¥ç»§æ‰¿ (è¿™ç§æƒ…å†µè¯·ä½¿ç”¨ <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#Exception"><code>Exception</code></a>)ã€‚ å¦‚æœåœ¨æ­¤ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨ <a href="https://docs.python.org/zh-cn/3/library/stdtypes.html#str"><code>str()</code></a>ï¼Œåˆ™ä¼šè¿”å›å®ä¾‹çš„å‚æ•°è¡¨ç¤ºï¼Œæˆ–è€…å½“æ²¡æœ‰å‚æ•°æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²</p></blockquote><h3 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h3><blockquote><p>æ‰€æœ‰å†…ç½®çš„éç³»ç»Ÿé€€å‡ºç±»å¼‚å¸¸éƒ½æ´¾ç”Ÿè‡ªæ­¤ç±»ã€‚ æ‰€æœ‰ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ä¹Ÿåº”å½“æ´¾ç”Ÿè‡ªæ­¤ç±»</p></blockquote><h3 id="ArithmeticError"><a href="#ArithmeticError" class="headerlink" title="ArithmeticError"></a>ArithmeticError</h3><blockquote><p>æ­¤åŸºç±»ç”¨äºæ´¾ç”Ÿé’ˆå¯¹å„ç§ç®—æœ¯ç±»é”™è¯¯è€Œå¼•å‘çš„å†…ç½®å¼‚å¸¸: <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#OverflowError"><code>OverflowError</code></a>, <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#ZeroDivisionError"><code>ZeroDivisionError</code></a>, <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#FloatingPointError"><code>FloatingPointError</code></a></p></blockquote><h3 id="BufferError"><a href="#BufferError" class="headerlink" title="BufferError"></a>BufferError</h3><blockquote><p>å½“ä¸ <a href="https://docs.python.org/zh-cn/3/c-api/buffer.html#bufferobjects">ç¼“å†²åŒº</a> ç›¸å…³çš„æ“ä½œæ— æ³•æ‰§è¡Œæ—¶å°†è¢«å¼•å‘</p></blockquote><h3 id="LookupError"><a href="#LookupError" class="headerlink" title="LookupError"></a>LookupError</h3><blockquote><p>æ­¤åŸºç±»ç”¨äºæ´¾ç”Ÿå½“æ˜ å°„æˆ–åºåˆ—æ‰€ä½¿ç”¨çš„é”®æˆ–ç´¢å¼•æ— æ•ˆæ—¶å¼•å‘çš„å¼‚å¸¸: <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#IndexError"><code>IndexError</code></a>, <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#KeyError"><code>KeyError</code></a>ã€‚ è¿™å¯ä»¥é€šè¿‡ <a href="https://docs.python.org/zh-cn/3/library/codecs.html#codecs.lookup"><code>codecs.lookup()</code></a> æ¥ç›´æ¥å¼•å‘</p></blockquote><h3 id="å…·ä½“å¼‚å¸¸"><a href="#å…·ä½“å¼‚å¸¸" class="headerlink" title="å…·ä½“å¼‚å¸¸"></a>å…·ä½“å¼‚å¸¸</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">BaseException</span><br><span class="line"> +-- SystemExit</span><br><span class="line"> +-- KeyboardInterrupt</span><br><span class="line"> +-- GeneratorExit</span><br><span class="line"> +-- Exception</span><br><span class="line">      +-- StopIteration</span><br><span class="line">      +-- StopAsyncIteration</span><br><span class="line">      +-- ArithmeticError</span><br><span class="line">      |    +-- FloatingPointError</span><br><span class="line">      |    +-- OverflowError</span><br><span class="line">      |    +-- ZeroDivisionError</span><br><span class="line">      +-- AssertionError</span><br><span class="line">      +-- AttributeError</span><br><span class="line">      +-- BufferError</span><br><span class="line">      +-- EOFError</span><br><span class="line">      +-- ImportError</span><br><span class="line">      |    +-- ModuleNotFoundError</span><br><span class="line">      +-- LookupError</span><br><span class="line">      |    +-- IndexError</span><br><span class="line">      |    +-- KeyError</span><br><span class="line">      +-- MemoryError</span><br><span class="line">      +-- NameError</span><br><span class="line">      |    +-- UnboundLocalError</span><br><span class="line">      +-- OSError</span><br><span class="line">      |    +-- BlockingIOError</span><br><span class="line">      |    +-- ChildProcessError</span><br><span class="line">      |    +-- ConnectionError</span><br><span class="line">      |    |    +-- BrokenPipeError</span><br><span class="line">      |    |    +-- ConnectionAbortedError</span><br><span class="line">      |    |    +-- ConnectionRefusedError</span><br><span class="line">      |    |    +-- ConnectionResetError</span><br><span class="line">      |    +-- FileExistsError</span><br><span class="line">      |    +-- FileNotFoundError</span><br><span class="line">      |    +-- InterruptedError</span><br><span class="line">      |    +-- IsADirectoryError</span><br><span class="line">      |    +-- NotADirectoryError</span><br><span class="line">      |    +-- PermissionError</span><br><span class="line">      |    +-- ProcessLookupError</span><br><span class="line">      |    +-- TimeoutError</span><br><span class="line">      +-- ReferenceError</span><br><span class="line">      +-- RuntimeError</span><br><span class="line">      |    +-- NotImplementedError</span><br><span class="line">      |    +-- RecursionError</span><br><span class="line">      +-- SyntaxError</span><br><span class="line">      |    +-- IndentationError</span><br><span class="line">      |         +-- TabError</span><br><span class="line">      +-- SystemError</span><br><span class="line">      +-- TypeError</span><br><span class="line">      +-- ValueError</span><br><span class="line">      |    +-- UnicodeError</span><br><span class="line">      |         +-- UnicodeDecodeError</span><br><span class="line">      |         +-- UnicodeEncodeError</span><br><span class="line">      |         +-- UnicodeTranslateError</span><br><span class="line">      +-- Warning</span><br><span class="line">           +-- DeprecationWarning</span><br><span class="line">           +-- PendingDeprecationWarning</span><br><span class="line">           +-- RuntimeWarning</span><br><span class="line">           +-- SyntaxWarning</span><br><span class="line">           +-- UserWarning</span><br><span class="line">           +-- FutureWarning</span><br><span class="line">           +-- ImportWarning</span><br><span class="line">           +-- UnicodeWarning</span><br><span class="line">           +-- BytesWarning</span><br><span class="line">           +-- ResourceWarning</span><br></pre></td></tr></table></figure><h2 id="å…·ä½“ç”¨æ³•"><a href="#å…·ä½“ç”¨æ³•" class="headerlink" title="å…·ä½“ç”¨æ³•"></a>å…·ä½“ç”¨æ³•</h2><p>å…¸å‹çš„å¼‚å¸¸å¤„ç†ç»“æ„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  (your code)</span><br><span class="line"><span class="keyword">except</span> YourException <span class="keyword">as</span> e:</span><br><span class="line">  (your code)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  (your code)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">  (your code)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>finally è¯­å¥ æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œï¼Œå¦å¤–å¦‚æœfinallyä¸­æœ‰returnè¯­å¥ï¼Œé‚£ä¹ˆå§‹ç»ˆè¿”å›finallyä¸­çš„returnè¯­å¥</li><li>else  è¯­å¥åœ¨æ²¡æœ‰å¼‚å¸¸æ—¶æ‰§è¡Œ</li><li>except å¯ä»¥åŒæ—¶å¡«å†™å¤šä¸ªException</li></ul><h3 id="å¤„ç†å¤šä¸ªå¼‚å¸¸"><a href="#å¤„ç†å¤šä¸ªå¼‚å¸¸" class="headerlink" title="å¤„ç†å¤šä¸ªå¼‚å¸¸"></a>å¤„ç†å¤šä¸ªå¼‚å¸¸</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> <span class="built_in">pow</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">n1, n2</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">pow</span>(n1, n2) / n2</span><br><span class="line">    <span class="keyword">except</span> (TypeError,ZeroDivisionError) <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line">&gt; test(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•è·åˆ° ZeroDivisionError</span></span><br><span class="line">&gt; test(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">float</span> division by zero</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•è·åˆ°TypeError</span></span><br><span class="line">&gt; test(<span class="string">&#x27;0&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">must be real number, <span class="keyword">not</span> <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¡æœ‰æ•è·åˆ°ï¼Œç¨‹åºå¼‚å¸¸è§¦å‘ValueError</span></span><br><span class="line">&gt; test(-<span class="number">1</span>, <span class="number">0.1</span>)</span><br><span class="line">ValueError: math domain error       </span><br></pre></td></tr></table></figure><h3 id="æ•è·æ‰€æœ‰å¼‚å¸¸"><a href="#æ•è·æ‰€æœ‰å¼‚å¸¸" class="headerlink" title="æ•è·æ‰€æœ‰å¼‚å¸¸"></a>æ•è·æ‰€æœ‰å¼‚å¸¸</h3><p>ä½¿ç”¨<code>except Exception as e:</code>æ¥æ•è·å…¶ä»–æ‰€æœ‰å¼‚å¸¸ï¼ˆæ³¨ï¼šè¿™ä¸ªå°†ä¼šæ•è·é™¤äº† <code>SystemExit</code> ã€ <code>KeyboardInterrupt</code> å’Œ <code>GeneratorExit</code> ä¹‹å¤–çš„æ‰€æœ‰å¼‚å¸¸ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> <span class="built_in">pow</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">n1, n2</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">pow</span>(n1, n2) / n2</span><br><span class="line">    <span class="keyword">except</span> (TypeError,ZeroDivisionError) <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;Exception: &#x27;</span>, e)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># å¦‚æœä¸ç¡®å®šå¼‚å¸¸ç±»å‹ï¼Œå¯ä»¥å†™Exceptionï¼Œæ•è·é€šç”¨Exception   </span></span><br><span class="line">&gt; test(-<span class="number">1</span>, <span class="number">0.1</span>)</span><br><span class="line">Exception:  math domain error</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸"><a href="#åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸"></a>åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸</h3><p>è‡ªå®šä¹‰å¼‚å¸¸ï¼Œç»§æ‰¿äº<code>Exception</code> æˆ–è€…å…¶ä»–ä»»ä½•ä¸€ä¸ªå·²å­˜åœ¨çš„å¼‚å¸¸ç±»å‹ï¼Œå‡å¦‚åœ¨å¤„ç†æµï¼Œéœ€è¦æ¶‰åŠåˆ°ç½‘ç»œæµã€æ–‡ä»¶æµã€å†…å­˜æµï¼Œé‚£ä¹ˆå¯ä»¥æ¶‰åŠåˆ°å¦‚ä¸‹å¼‚å¸¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamError</span>(<span class="params">Exception</span>):</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetWorkStreamError</span>(<span class="params">StreamError</span>):</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileStreamError</span>(<span class="params">StreamError</span>):</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemoryStreamError</span>(<span class="params">StreamError</span>):</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>éœ€è¦ç”¨åˆ°æ—¶ï¼Œå¯ä»¥æŒ‰ç…§Exceptionæ–¹å¼ï¼Œä¼ é€’å‚æ•°å³å¯ï¼ŒExceptionå°†æ‰€æœ‰ä¼ é€’çš„å‚æ•°ä»¥å…ƒç»„çš„å½¢å¼ï¼Œå­˜åœ¨<code>args</code>é‡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&#x27;name error&#x27;</span>, <span class="string">&#x27;IO error&#x27;</span>, <span class="string">&#x27;EOF error&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e.args)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line">(<span class="string">&#x27;name error&#x27;</span>, <span class="string">&#x27;IO error&#x27;</span>, <span class="string">&#x27;EOF error&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦é‡å†™<code>__init__()</code>æ–¹æ³•ï¼Œéœ€è¦ç¡®ä¿æ‰€æœ‰å‚æ•°éƒ½ç»™èµ‹å€¼åˆ°çˆ¶ç±»<code>Exception.__init__()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomError</span>(<span class="params">Exception</span>):</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, message, status</span>):</span></span><br><span class="line">    <span class="built_in">super</span>().__init__(message, status)</span><br><span class="line">    self.msg = message</span><br><span class="line">    self.sta = status</span><br></pre></td></tr></table></figure><h3 id="æ•è·å¼‚å¸¸åæŠ›å‡ºå¦å¤–å¼‚å¸¸"><a href="#æ•è·å¼‚å¸¸åæŠ›å‡ºå¦å¤–å¼‚å¸¸" class="headerlink" title="æ•è·å¼‚å¸¸åæŠ›å‡ºå¦å¤–å¼‚å¸¸"></a>æ•è·å¼‚å¸¸åæŠ›å‡ºå¦å¤–å¼‚å¸¸</h3><p>ä½¿ç”¨<code>raise Error from e</code>æ¥å½¢æˆå¼‚å¸¸é“¾ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ä¿¡æ¯ï¼š</p><p>The above exception was the direct cause of the following exception</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&#x27;EOF&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">raise</span> TypeError(<span class="string">&#x27;need str&#x27;</span>) <span class="keyword">from</span> e</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">ValueError                                Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-80-e2122a02c1f3&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      1 try:</span><br><span class="line">----&gt; 2     raise ValueError(<span class="string">&#x27;EOF&#x27;</span>)</span><br><span class="line">      3 except Exception as e:</span><br><span class="line"></span><br><span class="line">ValueError: EOF</span><br><span class="line"></span><br><span class="line">The above exception was the direct cause of the following exception:</span><br><span class="line"></span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-80-e2122a02c1f3&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      2     raise ValueError(<span class="string">&#x27;EOF&#x27;</span>)</span><br><span class="line">      3 except Exception as e:</span><br><span class="line">----&gt; 4     raise TypeError(<span class="string">&#x27;need str&#x27;</span>) from e</span><br><span class="line">      5     <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line">TypeError: need str</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ä½¿ç”¨<code>from e</code>ï¼Œè®¤ä¸ºåŒæ—¶å‘ç”Ÿäº†ä¸¤ä¸ªException</p><p>During handling of the above exception, another exception occurred</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     x = <span class="number">3</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">raise</span> TypeError(<span class="string">&#x27;need str&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">ZeroDivisionError                         Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-93-7ae0db540006&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      1 try:</span><br><span class="line">----&gt; 2      x = 3 / 0</span><br><span class="line">      3 except Exception as e:</span><br><span class="line"></span><br><span class="line">ZeroDivisionError: division by zero</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-93-7ae0db540006&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      2      x = 3 / 0</span><br><span class="line">      3 except Exception as e:</span><br><span class="line">----&gt; 4     raise TypeError(<span class="string">&#x27;need str&#x27;</span>)</span><br><span class="line"></span><br><span class="line">TypeError: need str</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦å¿½ç•¥æ‰å¼‚å¸¸é“¾ï¼Œå¯ä»¥ä½¿ç”¨<code>raise from None</code>, åªæœ€åçš„å¼‚å¸¸æŠ›å‡º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     x = <span class="number">3</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">raise</span> TypeError(<span class="string">&#x27;need str&#x27;</span>) <span class="keyword">from</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-94-3858a6e7a744&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      2      x = 3 / 0</span><br><span class="line">      3 except Exception as e:</span><br><span class="line">----&gt; 4     raise TypeError(<span class="string">&#x27;need str&#x27;</span>) from None</span><br><span class="line"></span><br><span class="line">TypeError: need str</span><br></pre></td></tr></table></figure><h3 id="é‡æ–°æŠ›å‡ºè¢«æ•è·çš„å¼‚å¸¸"><a href="#é‡æ–°æŠ›å‡ºè¢«æ•è·çš„å¼‚å¸¸" class="headerlink" title="é‡æ–°æŠ›å‡ºè¢«æ•è·çš„å¼‚å¸¸"></a>é‡æ–°æŠ›å‡ºè¢«æ•è·çš„å¼‚å¸¸</h3><p>å¦‚æœæƒ³å°†å¼‚å¸¸é‡æ–°è¢«ä¸Šä¸€çº§æ•è·ï¼Œå¯ä»¥åœ¨exceptä¸­å•ç‹¬åŠ ä¸€ä¸ª<code>raise</code>è¯­å¥ï¼Œè¿™æ ·å¯ä»¥åœ¨å¼‚å¸¸ä¸­è®°å½•æ—¥å¿—ç­‰æ“ä½œåå°†å¼‚å¸¸ä¼ æ’­å‡ºå»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     x = <span class="number">3</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="comment"># other code</span></span><br><span class="line">    <span class="keyword">raise</span> </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">ZeroDivisionError                         Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-95-1519a0755ccc&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      1 try:</span><br><span class="line">----&gt; 2      x = 3 / 0</span><br><span class="line">      3 except Exception as e:</span><br><span class="line">      4     raise</span><br><span class="line"></span><br><span class="line">ZeroDivisionError: division by zero</span><br></pre></td></tr></table></figure><h2 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h2><p>å¼•å…¥å¼‚å¸¸å¤„ç†ï¼Œä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸè€—ï¼Œå¯¹äºå¯¹æ€§èƒ½æœ‰è¦æ±‚çš„ç¨‹åºï¼Œåº”è¯¥å¯¹å¯é¢„æµ‹çš„ç»“æœåšé€»è¾‘å¤„ç†ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ç”¨å¼‚å¸¸å¤„ç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">       st = time.perf_counter()</span><br><span class="line">       func(*args, **kwargs)</span><br><span class="line">       end = time.perf_counter()</span><br><span class="line">       <span class="built_in">print</span>(<span class="string">f&#x27;using <span class="subst">&#123;end - st&#125;</span>s&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">div1</span>(<span class="params">num</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span> / num</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">   </span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">div2</span>(<span class="params">num</span>):</span></span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span> / num</span><br><span class="line">      </span><br><span class="line">&gt; div1(<span class="number">0</span>)</span><br><span class="line">using <span class="number">4.4405460357666016</span>e-06s</span><br><span class="line"></span><br><span class="line">&gt; div2(<span class="number">0</span>)</span><br><span class="line">using <span class="number">1.341104507446289</span>e-06s</span><br></pre></td></tr></table></figure><p>ä¹Ÿè®¸ä¼šæœ‰äººè¯´ï¼Œæ—¢ç„¶ç”¨pythonäº†ï¼Œè¿˜åœ¨ä¹é‚£ç‚¹æ€§èƒ½ï¼Œæˆ‘æƒ³è¯´pythonæ€§èƒ½è°ƒä¼˜ä¹Ÿæ˜¯ä¸€ç§è¿½æ±‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="https://docs.python.org/zh-cn/3/library/exceptions.html#bltin-exceptions">pythonå†…ç½®å¼‚å¸¸</a></p><p>[2] <a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/">python cookbook</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> exception </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŸºç¡€ -- timeä¸datetimeå¸¸è§ç”¨æ³•</title>
      <link href="/posts/3a95/"/>
      <url>/posts/3a95/</url>
      
        <content type="html"><![CDATA[<p>åœ¨HTTP APIæ¥å£ï¼Œä»¥åŠè·Ÿæ•°æ®åº“äº¤äº’æ—¶ç»å¸¸ç”¨åˆ°æ—¶é—´æˆ³ï¼ˆæ—¶é—´ï¼‰ï¼Œè¿™é‡Œæ•´ç†pythonä¸­å¸¸è§çš„timeã€datetimeç”¨æ³•ï¼Œä»¥åŠä¹‹é—´çš„ç›¸äº’è½¬åŒ–æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timezone</span><br></pre></td></tr></table></figure><h2 id="timeåŸºæœ¬ç”¨æ³•"><a href="#timeåŸºæœ¬ç”¨æ³•" class="headerlink" title="timeåŸºæœ¬ç”¨æ³•"></a>timeåŸºæœ¬ç”¨æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å½“å‰unixæ—¶é—´æˆ³ï¼Œè¿”å›å€¼ä¸ºfloat</span></span><br><span class="line">&gt; time.time()</span><br><span class="line"><span class="number">1615178606.6729627</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æœ¬åœ°æ—¶é—´ï¼ˆstruct timeï¼‰</span></span><br><span class="line">&gt; time.localtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2021</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">8</span>, tm_hour=<span class="number">12</span>, tm_min=<span class="number">47</span>, tm_sec=<span class="number">12</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">67</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–UTCæ—¶é—´ï¼ˆstruct timeï¼‰</span></span><br><span class="line">&gt; time.gmtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2021</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">8</span>, tm_hour=<span class="number">4</span>, tm_min=<span class="number">47</span>, tm_sec=<span class="number">25</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">67</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ¯«ç§’çº§Unix æ—¶é—´æˆ³ int</span></span><br><span class="line">&gt; <span class="built_in">int</span>(time.time()*<span class="number">1000</span>)</span><br><span class="line"><span class="number">1615178896227</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç§’çº§Unix æ—¶é—´æˆ³ int</span></span><br><span class="line">&gt; <span class="built_in">int</span>(time.time())</span><br><span class="line"><span class="number">1615178924</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Unix æ—¶é—´æˆ³ï¼ˆint/floatï¼‰è½¬åŒ–ä¸º struct time</span></span><br><span class="line">&gt; time.localtime(time.time())</span><br><span class="line">time.struct_time(tm_year=<span class="number">2021</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">25</span>, tm_hour=<span class="number">21</span>, tm_min=<span class="number">44</span>, tm_sec=<span class="number">6</span>, tm_wday=<span class="number">3</span>, tm_yday=<span class="number">84</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># strcut time è½¬åŒ–ä¸º Unixæ—¶é—´æˆ³ï¼ˆfloatï¼‰</span></span><br><span class="line"><span class="comment"># ä¸»è¦mktimeçš„å‚æ•°åº”è¯¥æ˜¯localtimeï¼Œä¸èƒ½æ˜¯UTCtime</span></span><br><span class="line">&gt; time.mktime(time.localtime())</span><br><span class="line"><span class="number">1616680137.0</span></span><br></pre></td></tr></table></figure><h2 id="datetimeåŸºæœ¬ç”¨æ³•"><a href="#datetimeåŸºæœ¬ç”¨æ³•" class="headerlink" title="datetimeåŸºæœ¬ç”¨æ³•"></a>datetimeåŸºæœ¬ç”¨æ³•</h2><ul><li>datetime(year, month, day[, hour[, minute[, second[, microsecond[,tzinfo]]]]])</li></ul><p><em>æ³¨æ„ï¼šç§’åé¢æ˜¯å¾®ç§’ï¼Œä¸æ˜¯æ¯«ç§’</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å½“å‰æ—¶åˆ»çš„datetime</span></span><br><span class="line">&gt; datetime.now()</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">21</span>, <span class="number">59</span>, <span class="number">29</span>, <span class="number">534163</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ—¶åˆ»çš„UTC datetime</span></span><br><span class="line">&gt; datetime.utcnow()</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">803165</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å½“å‰æ—¶åˆ»çš„Unix æ—¶é—´æˆ³, å‚æ•°ä¸º datetime</span></span><br><span class="line">&gt; datatime.timestamp(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">803165</span>))</span><br><span class="line"><span class="number">1616651979.803165</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°datetime,replace(year, month, day, hour, minute, second, microsecond...)</span></span><br><span class="line">&gt; datetime.now().replace(year=<span class="number">2022</span>)</span><br><span class="line">datetime.datetime(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">21</span>, <span class="number">59</span>, <span class="number">29</span>, <span class="number">534163</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="iosformatç”¨æ³•"><a href="#iosformatç”¨æ³•" class="headerlink" title="iosformatç”¨æ³•"></a>iosformatç”¨æ³•</h3><ul><li>isoformat(sep=â€™Tâ€™, timespec=â€™autoâ€™)</li></ul><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå¾®ç§’å­˜åœ¨ï¼Œåˆ™è¾“å‡ºå¾®ç§’ï¼Œå¦‚æœå¾®ç§’ä¸º0ï¼Œåˆ™å¾®ç§’ä¼šè¢«å¿½ç•¥ï¼Œè€Œä¸æ˜¯è¾“å‡º0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ä¿®æ”¹é»˜è®¤å‚æ•°æ—¶ï¼Œè¿”å›æ ¼å¼åŒ–å­—ç¬¦ä¸²</span></span><br><span class="line">&gt; datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">803165</span>))</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39.803165&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¯æŒä¸¤ä¸ªå‚æ•°ï¼Œsepï¼Œ timespec</span></span><br><span class="line"><span class="comment"># sep é»˜è®¤ä¸º&#x27;T&#x27;ï¼Œå³ç”¨Tåšåˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment"># timespecé»˜è®¤ä¸º&#x27;auto&#x27;, å¯ä»¥ä¸º&#x27;hours&#x27;, &#x27;seconds&#x27;, &#x27;milliseconds&#x27;, &#x27;microseconds&#x27;</span></span><br><span class="line"><span class="comment"># è¾“å‡ºå¸¦å¾®ç§’</span></span><br><span class="line">&gt; datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">1</span>))</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39.000001&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾®ç§’è¢«å¿½ç•¥</span></span><br><span class="line">&gt; datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">0</span>))</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœtimespecä¸ºmillisecondsï¼Œå°äº1msä¼šè¾“å‡º000</span></span><br><span class="line">&gt; datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">2</span>), timespec=<span class="string">&#x27;milliseconds&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39.000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰äº0æ—¶ï¼Œä¹Ÿä¼šè¾“å‡º000</span></span><br><span class="line">&gt; datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>), timespec=<span class="string">&#x27;milliseconds&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39.000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦</span></span><br><span class="line">&gt; datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">1000</span>), timespec=<span class="string">&#x27;milliseconds&#x27;</span>, sep=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="string">&#x27;2021-03-25 13:59:39.001&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="timedelta"><a href="#timedelta" class="headerlink" title="timedelta"></a>timedelta</h3><ul><li>datetime.timedelta(days, seconds, microseconds, minutes, hours, weeks)</li></ul><p>ä¸¤ä¸ªdatetimeç›´æ¥çš„æ—¶é—´é—´éš”</p><blockquote><p>åªæœ‰ <em>days</em>,<em>seconds</em> å’Œ <em>microseconds</em> ä¼šå­˜å‚¨åœ¨å†…éƒ¨ï¼Œå³pythonå†…éƒ¨ä»¥ <em>days</em>,<em>seconds</em> å’Œ <em>microseconds</em> ä¸‰ä¸ªå•ä½ä½œä¸ºå­˜å‚¨çš„åŸºæœ¬å•ä½ã€‚å‚æ•°å•ä½è½¬æ¢è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>1æ¯«ç§’ä¼šè½¬æ¢æˆ1000å¾®ç§’ã€‚</li><li>1åˆ†é’Ÿä¼šè½¬æ¢æˆ60ç§’ã€‚</li><li>1å°æ—¶ä¼šè½¬æ¢æˆ3600ç§’ã€‚</li><li>1æ˜ŸæœŸä¼šè½¬æ¢æˆ7å¤©ã€‚</li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¯”å½“å‰æ—¶åˆ»å°‘1å¤©5åˆ†é’Ÿ</span></span><br><span class="line">&gt; datetime.now() + timedelta(days=-<span class="number">1</span>, minutes=-<span class="number">5</span>)</span><br><span class="line">&gt; datetime.now() - timedelta(days=<span class="number">1</span>, minutes=<span class="number">5</span>)</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">41</span>, <span class="number">10</span>, <span class="number">557550</span>)</span><br></pre></td></tr></table></figure><h3 id="timezone-astimezone"><a href="#timezone-astimezone" class="headerlink" title="timezone/astimezone"></a>timezone/astimezone</h3><p>å°†UTCæ—¶é—´è½¬åŒ–ä¸ºæœ¬åœ°æ—¶é—´</p><blockquote><p>å‡å¦‚æ•°æ®åº“å­˜å‚¨çš„æ—¶é—´æˆ³éƒ½æ˜¯UTCæ—¶é—´ï¼Œå¦‚æœå®¢æˆ·ç«¯è·å–åˆ°åï¼Œè½¬åŒ–ä¸ºæœ¬åœ°æ—¶é—´ï¼Œå¯ä»¥å€ŸåŠ©timezoneå’Œastimezone</p><p>ç®€å•å¯ä»¥ä½¿ç”¨timedelta(hours=Â±8)è¿›è¡ŒåŒ—äº¬æ—¶é—´å’ŒUTCæ—¶é—´è½¬æ¢</p></blockquote><p>å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–ä¸€ä¸ªUTCæ—¶é—´</span></span><br><span class="line">&gt; date = datetime.utcnow()</span><br><span class="line">&gt; date</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">7</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">240199</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰è¶£çš„æ—¶ï¼Œå¦‚æœæ­¤æ—¶è·å–tzinfoï¼Œä¸æ˜¯utcï¼Œè€Œæ˜¯None</span></span><br><span class="line">&gt; date.tzinfo</span><br><span class="line"><span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å› æ­¤å…ˆç»™å®ƒèµ‹å€¼ä¸€ä¸ªUTC timezone</span></span><br><span class="line">&gt; new = date.replace(tzinfo=timezone.utc)</span><br><span class="line">&gt; new</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">7</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">240199</span>, tzinfo=datetime.timezone.utc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># astimezone æ¥å—ä¸€ä¸ªtzå‚æ•°ï¼Œé»˜è®¤ä¸ºNoneï¼Œä¸ºNoneæ—¶ï¼Œè½¬åŒ–ä¸ºæœ¬åœ°æ—¶é—´</span></span><br><span class="line"><span class="comment"># 28800 = 8h * 3600</span></span><br><span class="line">&gt; new.astimezone()</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">15</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">240199</span>, tzinfo=datetime.timezone(datetime.timedelta(seconds=<span class="number">28800</span>), <span class="string">&#x27;CST&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ¬åœ°æ—¶é—´è½¬åŒ–ä¸ºutcæ—¶é—´</p><blockquote><p>å†™å…¥åˆ°æ•°æ®åº“æ—¶ï¼Œéœ€è¦å°†å®é™…è½¬åŒ–ä¸ºUTCæ—¶é—´</p><p>æ–¹æ³•ä¸€ï¼šé€šè¿‡astimezoneè½¬æ¢ï¼Œæ­¤æ—¶tz=timezone.info</p><p>æ–¹æ³•äºŒï¼šå€ŸåŠ©äºfromtimestamp/utcfromtimestampè½¬æ¢</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–ä¸€ä¸ªæœ¬åœ°æ—¶é—´</span></span><br><span class="line">&gt; localdate = datetime.now()</span><br><span class="line">&gt; localdate</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">33</span>, <span class="number">974434</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•1ï¼Œç»™datetimeåŠ ä¸Šæ—¶åŒºä¿¡æ¯ï¼Œç„¶åé€šè¿‡astimezoneè½¬æ¢</span></span><br><span class="line">&gt; new_localdate = localdate.replace(tzinfo=timezone(timedelta(seconds=<span class="number">28800</span>)))</span><br><span class="line">&gt; new_localdate</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">33</span>, <span class="number">974434</span>, tzinfo=datetime.timezone(datetime.timedelta(seconds=<span class="number">28800</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬åŒ–æ—¶åŒº</span></span><br><span class="line">&gt; utc_date = new_localdate.astimezone(tz=timezone.utc)</span><br><span class="line">&gt; utc_date</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">33</span>, <span class="number">974434</span>, tzinfo=datetime.timezone.utc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•2ï¼Œå€ŸåŠ©äºtimestampè½¬æ¢</span></span><br><span class="line">&gt; timestamp = localdate.timestamp()</span><br><span class="line">&gt; utc_date = datetime.utcfromtimestamp(timestamp)</span><br><span class="line">&gt; utc_date</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">33</span>, <span class="number">974434</span>)</span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨fromtimestamp åŠ ä¸Šæ—¶åŒºå‚æ•°</span></span><br><span class="line">&gt; utc_date = datetime.fromtimestamp(timestamp, tz=timezone.utc)</span><br><span class="line">&gt; utc_date</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">33</span>, <span class="number">974434</span>, tzinfo=datetime.timezone.utc)</span><br></pre></td></tr></table></figure><h2 id="strä¸datetimeäº’è½¬"><a href="#strä¸datetimeäº’è½¬" class="headerlink" title="strä¸datetimeäº’è½¬"></a>strä¸datetimeäº’è½¬</h2><ul><li><p>datetime.strptime(string, format) å°†å­—ç¬¦ä¸²æ—¶é—´è½¬ä¸ºdatetime</p></li><li><p>datetime.strftime(format) å°†datetimeè½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶é—´</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># str --&gt; datetime</span></span><br><span class="line"><span class="comment"># &#x27;2021-03-25T13:59:39.001&#x27;</span></span><br><span class="line">&gt; datetime_str = datetime.isoformat(datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">1000</span>), timespec=<span class="string">&#x27;milliseconds&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># %f ç”¨äºæ ¼å¼åŒ–å¾®ç§’</span></span><br><span class="line">&gt; datetime.strptime(datetime_str, <span class="string">&quot;%Y-%m-%dT%H:%M:%S.%f&quot;</span>)</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime --&gt; str</span></span><br><span class="line"><span class="comment"># æ¨èç¬¬ä¸€ç§ç”¨ä¸Šé¢æåˆ°çš„isoformat</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§ä½¿ç”¨strftime</span></span><br><span class="line">&gt; datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">1000</span>).strftime(<span class="built_in">format</span>=<span class="string">&quot;%Y-%m-%dT%H:%M:%S.%f&quot;</span>)</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39.001000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å¾®ç§’è¾“å‡ºä¸º000</span></span><br><span class="line">&gt; datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">13</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">1000</span>).strftime(<span class="built_in">format</span>=<span class="string">&quot;%Y-%m-%dT%H:%M:%S.000&quot;</span>)</span><br><span class="line"><span class="string">&#x27;2021-03-25T13:59:39.000&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="strä¸timeäº’è½¬"><a href="#strä¸timeäº’è½¬" class="headerlink" title="strä¸timeäº’è½¬"></a>strä¸timeäº’è½¬</h2><ul><li><p>time.strftime(format[,t]) å°†timeæ¢ä½ä¸ºå­—ç¬¦ä¸²æ—¶é—´ï¼Œå¦‚æœt(time)æœªæä¾›ï¼Œåˆ™ä½¿ç”¨locatime()è·å–å½“å‰æ—¶é—´</p></li><li><p>time.strptime(string[,format]) å°†å­—ç¬¦ä¸²æ—¶é—´è½¬æ¢ä¸º struct time</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># local time</span></span><br><span class="line"><span class="comment"># time.struct_time(tm_year=2021, tm_mon=3, tm_mday=25, tm_hour=23, tm_min=12, tm_sec=10, tm_wday=3, tm_yday=84, tm_isdst=0)</span></span><br><span class="line">&gt; now = time.localtime()</span><br><span class="line"></span><br><span class="line"><span class="comment"># time --&gt; str</span></span><br><span class="line"><span class="comment"># è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶é—´, ä¸æ”¯æŒå¾®ç§’</span></span><br><span class="line">&gt; time.strftime( <span class="string">&quot;%Y-%m-%dT%H:%M:%S&quot;</span>, now)</span><br><span class="line"><span class="string">&#x27;2021-03-25T23:12:10&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># str --&gt; time</span></span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²æ—¶é—´è½¬æ¢ä¸º struct time</span></span><br><span class="line">&gt; time.strptime(time.strftime( <span class="string">&quot;%Y-%m-%dT%H:%M:%S&quot;</span>, now), <span class="string">&quot;%Y-%m-%dT%H:%M:%S&quot;</span>)</span><br><span class="line"></span><br><span class="line">time.struct_time(tm_year=<span class="number">2021</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">25</span>, tm_hour=<span class="number">23</span>, tm_min=<span class="number">12</span>, tm_sec=<span class="number">10</span>, tm_wday=<span class="number">3</span>, tm_yday=<span class="number">84</span>, tm_isdst=-<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="timeä¸datetimeäº’è½¬"><a href="#timeä¸datetimeäº’è½¬" class="headerlink" title="timeä¸datetimeäº’è½¬"></a>timeä¸datetimeäº’è½¬</h2><ul><li><p>datetime.timetuple(datetime) å°†datetimeè½¬åŒ–ä¸º struct time</p></li><li><p>datetime.fromtimestamp(unixæ—¶é—´æˆ³) å°†unixæ—¶é—´æˆ³è½¬åŒ–ä¸ºdatetime</p></li><li><p>datetime.timestamp() å°†datetimeè½¬åŒ–ä¸ºunix æ—¶é—´æˆ³</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># time --&gt; datetime</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ç§ unix æ—¶é—´æˆ³ è½¬åŒ–ä¸º datetime</span></span><br><span class="line">&gt; datetime.fromtimestamp(time.time())</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">23</span>, <span class="number">28</span>, <span class="number">33</span>, <span class="number">548042</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§ struct timeè½¬åŒ–ä¸º datetime</span></span><br><span class="line">&gt; datetime.fromtimestamp(time.mktime(time.localtime()))</span><br><span class="line">datetime.datetime(<span class="number">2021</span>, <span class="number">3</span>, <span class="number">25</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">23</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime --&gt; time</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ç§ä½¿ç”¨timetuple</span></span><br><span class="line">&gt; datetime.timetuple(datetime.now())</span><br><span class="line">time.struct_time(tm_year=<span class="number">2021</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">25</span>, tm_hour=<span class="number">23</span>, tm_min=<span class="number">33</span>, tm_sec=<span class="number">9</span>, tm_wday=<span class="number">3</span>, tm_yday=<span class="number">84</span>, tm_isdst=-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§ä½¿ç”¨Unixæ—¶é—´æˆ³</span></span><br><span class="line">&gt; time.localtime(datetime.timestamp(datetime.now()))</span><br><span class="line">time.struct_time(tm_year=<span class="number">2021</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">25</span>, tm_hour=<span class="number">23</span>, tm_min=<span class="number">34</span>, tm_sec=<span class="number">6</span>, tm_wday=<span class="number">3</span>, tm_yday=<span class="number">84</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p>[1] <a href="https://pythontic.com/datetime/datetime/isoformat">Isoformat() Method Of Datetime Class In Python</a></p><p>[2] <a href="https://docs.python.org/zh-cn/3.7/library/datetime.html">datetime â€” åŸºæœ¬çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹</a></p><p>[3] <a href="https://docs.python.org/zh-cn/3/library/time.html">time â€” æ—¶é—´çš„è®¿é—®å’Œè½¬æ¢</a></p><p>[4] <a href="https://docs.python.org/zh-cn/3.7/library/datetime.html#strftime-and-strptime-behavior">strftime() å’Œ strptime()çš„è¡Œä¸º</a></p><p>[5] <a href="https://stackoverflow.com/questions/4563272/convert-a-python-utc-datetime-to-a-local-datetime-using-only-python-standard-lib/13287083#13287083">Convert a python UTC datetime to a local datetime</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github actionsåˆè¯•ç‰›åˆ€</title>
      <link href="/posts/9f77/"/>
      <url>/posts/9f77/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å°†hexåšå®¢éƒ¨ç½²ç”±æ‰‹åŠ¨æ‰§è¡Œï¼Œæ”¹ä¸ºé€šè¿‡github actionsè‡ªåŠ¨éƒ¨ç½²ï¼Œè¿™é‡Œåšä¸‹è®°å½•</p></blockquote><h3 id="è‡ªåŠ¨éƒ¨ç½²åŸç†"><a href="#è‡ªåŠ¨éƒ¨ç½²åŸç†" class="headerlink" title="è‡ªåŠ¨éƒ¨ç½²åŸç†"></a>è‡ªåŠ¨éƒ¨ç½²åŸç†</h3><p>ä½¿ç”¨github actionsåŠŸèƒ½ï¼Œå°†hexoç”Ÿæˆçš„é™æ€æ–‡ä»¶åœ¨æ¯æ¬¡æäº¤ä»£ç æ—¶ï¼Œé€šè¿‡scpå°†æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨</p><h3 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h3><p><img src="https://oss.smart-lifestyle.cn/file/jl6ye.png" alt="image-20210326140634778"></p><p>åœ¨gitä»“åº“æ–°å¢actionsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This is a basic workflow to help you get started with Actions</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">CI</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls when the action will run. </span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># Triggers the workflow on push or pull request events but only for the master branch</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">master</span> ]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">master</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Allows you to run this workflow manually from the Actions tab</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="comment"># This workflow contains a single job called &quot;build&quot;</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="comment"># The type of runner that the job will run on</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Steps represent a sequence of tasks that will be executed as part of the job</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># Runs a single command using the runners shell</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">a</span> <span class="string">one-line</span> <span class="string">script</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">Hello,</span> <span class="string">world!</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># Runs a set of commands using the runners shell</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">a</span> <span class="string">multi-line</span> <span class="string">script</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          echo Add other actions to build,</span></span><br><span class="line"><span class="string">          echo test, and deploy your project.</span></span><br><span class="line"><span class="string">          ls</span></span><br><span class="line"><span class="string">          pwd</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">copy</span> <span class="string">file</span> <span class="string">via</span> <span class="string">ssh</span> <span class="string">password</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">appleboy/scp-action@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">port:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PORT</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">source:</span> <span class="string">&quot;public/*,!public/robots.txt&quot;</span></span><br><span class="line">          <span class="attr">target:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.TARGET_DIR</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯´æ˜</p><ul><li><p>on è§¦å‘æ¡ä»¶</p><ul><li>push æ¨é€ç›®æ ‡ä»“åº“</li><li>pull_request åˆå¹¶åˆ†æ”¯ä»“åº“</li></ul></li><li><p>steps æ­¥éª¤</p><ul><li>uses: actions/checkout@v2 è·å–ä»£ç </li><li>uses: appleboy/scp-action@master ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œé€šè¿‡scp ä¼ è¾“æ–‡ä»¶<ul><li>host: $</li><li>username: $</li><li> password: $</li><li>port: $</li><li> source: â€œpublic/*,!public/robots.txtâ€</li><li> target: $</li></ul></li></ul></li></ul><p>ä¸Šé¢çš„secretsä¿¡æ¯åœ¨githubä¸Šè¿›è¡Œé…ç½®</p><p><img src="https://oss.smart-lifestyle.cn/file/oydi5.png" alt="image-20210326141554880"></p><p>æ¯å½“pushä»£ç åˆ°ä»“åº“masteråˆ†æ”¯æ—¶ï¼Œä¼šè¿›è¡Œæ‰§è¡Œactionsï¼Œè¿›è¡Œåšå®¢éƒ¨ç½²</p><p><img src="https://oss.smart-lifestyle.cn/file/jbae5.png" alt="image-20210326141938875"></p><h3 id="ä¸è¶³"><a href="#ä¸è¶³" class="headerlink" title="ä¸è¶³"></a>ä¸è¶³</h3><ol><li>ç›®å‰æ²¡æœ‰é€šè¿‡github actionsç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ¨é€ä¹‹å‰éœ€è¦æ‰‹åŠ¨æ‰§è¡Œhexo gï¼Œè¿™ä¸ªåœ¨è¿›ä¸€æ­¥ç ”ç©¶ä¹‹åå†å°è¯•</li><li>github æœ¬èº«å¯ä»¥æ·»åŠ Deploy keysï¼Œä¸ºäº†å®‰å…¨ï¼Œscpåº”è¯¥é¿å…ä½¿ç”¨å¯†ç è¿›è¡Œæ“ä½œï¼Œä¹Ÿåœ¨ç ”ç©¶æ˜ç™½ä¹‹åå†å°è¯•</li><li>ç”±äºé—®é¢˜1ï¼Œå°¤ä¸ºhexo gä¼šé‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œæ¯æ¬¡pushçš„æ—¶å€™ä¼šæœ‰å¤§é‡å¸¦æäº¤æ–‡ä»¶ã€‚ã€‚ã€‚</li></ol><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>[1] <a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">GitHub Actions å…¥é—¨æ•™ç¨‹</a></p><p>[2] <a href="https://github.com/appleboy/scp-action">ğŸš€ SCP for GitHub Actions</a></p><p>[3] <a href="https://dev.to/miangame/how-to-automate-a-deploy-in-a-vps-with-github-actions-via-ssh-101e">How to automate a deploy in a VPS with GitHub actions via SSH</a></p>]]></content>
      
      
      <categories>
          
          <category> éƒ¨ç½² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github actions </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shellå˜é‡ä¸ç¯å¢ƒå˜é‡</title>
      <link href="/posts/77ae/"/>
      <url>/posts/77ae/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Shell å˜é‡åªåœ¨ä¸»shellæœ‰æ•ˆï¼Œå­è¿›ç¨‹æ— æ•ˆï¼Œç¯å¢ƒå˜é‡åœ¨ä¸»shellå’Œå­è¿›ç¨‹éƒ½æœ‰æ•ˆï¼Œå¯ä»¥é€šè¿‡exportå‘½ä»¤å°†shellå˜é‡å˜ä¸ºç¯å¢ƒå˜é‡</p><p>ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹shellå˜é‡</p><p>ä½¿ç”¨printenvå‘½ä»¤æŸ¥çœ‹ç¯å¢ƒå˜é‡</p></blockquote><span id="more"></span><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨pythonå·¥ç¨‹ä¸­ï¼Œæƒ³é€šè¿‡ç¯å¢ƒå˜é‡è·å–å‚æ•°å€¼ï¼Œå¹¶èµ‹å€¼ç»™pythonå˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;PID: <span class="subst">&#123;os.getpid()&#125;</span>, PPID: <span class="subst">&#123;os.getppid()&#125;</span>&quot;</span>)</span><br><span class="line">host = os.getenv(<span class="string">&#x27;REDIS_HOST&#x27;</span>)</span><br><span class="line">port = os.getenv(<span class="string">&#x27;REDIS_PORT&#x27;</span>)</span><br><span class="line">password = os.getenv(<span class="string">&#x27;REDIS_PASSWORD&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;password&#125;</span>@<span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è€Œå‚æ•°å€¼æ”¾åœ¨ä¸€ä¸ªenvæ–‡ä»¶é‡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REDIS_HOST=example.com</span><br><span class="line">REDIS_PORT=5432</span><br><span class="line">REDIS_PASSWORD=123456</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ‰§è¡Œ<code>source .env</code> ååœ¨ç»ˆç«¯æŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$REDIS_HOST</span> <span class="variable">$REDIS_PORT</span> <span class="variable">$REDIS_PASSWORD</span></span><br><span class="line">&gt; example.com 5432 123456</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰shell pid</span></span><br><span class="line"><span class="built_in">echo</span> $$</span><br><span class="line">&gt; 22650</span><br><span class="line"><span class="comment"># è¿è¡Œpython æ–‡ä»¶</span></span><br><span class="line">python variables.py</span><br><span class="line">&gt; PID: 23034, PPID: 22650</span><br><span class="line">&gt; None@None:None</span><br></pre></td></tr></table></figure><p>å‘ç°pythonå¹¶æœªè·å–åˆ°å­˜åœ¨shellç¯å¢ƒå˜é‡ä¸­çš„å€¼ï¼Œpythonè¿è¡Œçš„çˆ¶è¿›ç¨‹å·ä¸ºå½“å‰shellçš„è¿›ç¨‹å·ï¼Œè€Œå½“æ—¶pythonè¿è¡Œæ˜¯åœ¨å­è¿›ç¨‹ä¸­è¿è¡Œ</p><p>ä»¥ä¸Šçš„<code>souce .env</code>æ“ä½œæ˜¯å°†å˜é‡å­˜å…¥åˆ°shellå˜é‡ä¸­ï¼Œä½†æœªåœ¨ç¯å¢ƒå˜é‡ä¸­</p><h2 id="shellå˜é‡å’Œç¯å¢ƒå˜é‡"><a href="#shellå˜é‡å’Œç¯å¢ƒå˜é‡" class="headerlink" title="shellå˜é‡å’Œç¯å¢ƒå˜é‡"></a>shellå˜é‡å’Œç¯å¢ƒå˜é‡</h2><p>For <a href="http://www.ee.surrey.ac.uk/Teaching/Unix/unix8.html">Standard UNIX variables</a> , says:</p><blockquote><p>Standard UNIX variables are split into two categories, environment variables and shell variables. In broad terms, shell variables apply only to the current instance of the shell and are used to set short-term working conditions; environment variables have a farther reaching significance, and those set at login are valid for the duration of the session. By convention, environment variables have UPPER CASE and shell variables have lower case names.</p><p>æ ‡å‡†UNIXå˜é‡åˆ†ä¸ºä¸¤ç±»ï¼šç¯å¢ƒå˜é‡å’Œshellå˜é‡ï¼Œshellå˜é‡ä»…åœ¨å½“å‰shellï¼ˆä¸»è¿›ç¨‹ï¼‰æœ‰æ•ˆï¼Œç¯å¢ƒå˜é‡å¯ä»¥åœ¨å­è¿›ç¨‹æœ‰æ•ˆï¼Œé€šå¸¸ç¯å¢ƒå˜é‡ä¸ºå¤§å†™ï¼Œshellå˜é‡ä¸ºå°å†™</p></blockquote><p>For <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_05_03">POSIX-compatible shells</a> (including Bash), the standard says:</p><blockquote><p><strong>2.5.3 Shell Variables</strong><br>Variables shall be initialized from the environment <em>[â€¦]</em> If a variable is initialized from the environment, it shall be marked for export immediately; see the export special built-in. New variables can be defined and initialized with variable assignments, <em>[etc.]</em></p><p>å¦‚æœshellå˜é‡è¦è½¬åŒ–ä¸ºç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œexport å‘½ä»¤</p></blockquote><h3 id="æŸ¥çœ‹shellå˜é‡å’Œç¯å¢ƒå˜é‡"><a href="#æŸ¥çœ‹shellå˜é‡å’Œç¯å¢ƒå˜é‡" class="headerlink" title="æŸ¥çœ‹shellå˜é‡å’Œç¯å¢ƒå˜é‡"></a>æŸ¥çœ‹shellå˜é‡å’Œç¯å¢ƒå˜é‡</h3><ul><li>æŸ¥çœ‹shellå˜é‡ä½¿ç”¨<code>set</code>å‘½ä»¤</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br><span class="line"><span class="comment"># æˆªå–éƒ¨åˆ†</span></span><br><span class="line">&gt; ...</span><br><span class="line">&gt; status=0</span><br><span class="line">&gt; termcap</span><br><span class="line">&gt; terminfo</span><br><span class="line">&gt; userdirs</span><br><span class="line">&gt; usergroups</span><br><span class="line">&gt; watch=(  )</span><br><span class="line">&gt; widgets</span><br><span class="line">&gt; zle_bracketed_paste=( $<span class="string">&#x27;\C-[[?2004h&#x27;</span> $<span class="string">&#x27;\C-[[?2004l&#x27;</span> )</span><br><span class="line">&gt; zsh_eval_context=( toplevel )</span><br><span class="line">&gt; zsh_scheduled_events</span><br><span class="line">&gt; ...</span><br></pre></td></tr></table></figure><p>å¦å¤–å¯ä»¥é€šè¿‡set/unset æ¥è®¾ç½®/åˆ é™¤shellå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">  Display, <span class="built_in">set</span> or <span class="built_in">unset</span> values of shell attributes and positional parameters.</span><br><span class="line"></span><br><span class="line">  - Display the names and values of shell variables:</span><br><span class="line">    <span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">  - Mark variables that are modified or created <span class="keyword">for</span> <span class="built_in">export</span>:</span><br><span class="line">    <span class="built_in">set</span> -a</span><br><span class="line"></span><br><span class="line">  - Notify of job termination immediately:</span><br><span class="line">    <span class="built_in">set</span> -b</span><br><span class="line"></span><br><span class="line">  - Set various options, e.g. <span class="built_in">enable</span> vi style line editing:</span><br><span class="line">    <span class="built_in">set</span> -o vi</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span></span><br><span class="line"></span><br><span class="line">  Remove shell variables or <span class="built_in">functions</span>.</span><br><span class="line"></span><br><span class="line">  - Remove the variable foo, or <span class="keyword">if</span> the variable doesn<span class="string">&#x27;t exist, remove the function foo:</span></span><br><span class="line"><span class="string">    unset foo</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - Remove the variables foo and bar:</span></span><br><span class="line"><span class="string">    unset -v foo bar</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - Remove the function my_func:</span></span><br><span class="line"><span class="string">    unset -f my_func</span></span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ç¯å¢ƒå˜é‡ä½¿ç”¨envæˆ–è€…printenv</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">printenv</span><br><span class="line">&gt; VIRTUALENVWRAPPER_WORKON_CD=1</span><br><span class="line">&gt; VIRTUALENVWRAPPER_SCRIPT=/opt/anaconda3/bin/virtualenvwrapper.sh</span><br><span class="line">&gt; WORKON_HOME=/Users/simple/.virtualenvs</span><br><span class="line">&gt; VIRTUALENVWRAPPER_HOOK_DIR=/Users/simple/.virtualenvs</span><br><span class="line">&gt; ANDROID_HOME=/Users/simple/Library/Android/sdk</span><br><span class="line">&gt; _=/usr/bin/printenv</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">env</span><br><span class="line"></span><br><span class="line">  Show the environment or run a program <span class="keyword">in</span> a modified environment.</span><br><span class="line"></span><br><span class="line">  - Show the environment:</span><br><span class="line">    env</span><br><span class="line"></span><br><span class="line">  - Run a program. Often used <span class="keyword">in</span> scripts after the shebang (<span class="comment">#!) for looking up the path to the program:</span></span><br><span class="line">    env program</span><br><span class="line"></span><br><span class="line">  - Clear the environment and run a program:</span><br><span class="line">    env -i program</span><br><span class="line"></span><br><span class="line">  - Remove variable from the environment and run a program:</span><br><span class="line">    env -u variable program</span><br><span class="line"></span><br><span class="line">  - Set a variable and run a program:</span><br><span class="line">    env variable=value program</span><br><span class="line"></span><br><span class="line">  - Set multiple variables and run a program:</span><br><span class="line">    env variable1=value variable2=value variable3=value program</span><br></pre></td></tr></table></figure><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>æ–¹æ³•å°±æ¯”è¾ƒæ˜æ˜¾äº†</p><p>ç¬¬ä¸€ç§ï¼Œä¿®æ”¹.envæ–‡ä»¶ï¼ŒåŠ å…¥exportï¼Œç„¶åæ‰§è¡Œ<code>source .env</code>ï¼Œæœ€åè¿è¡Œpythonå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> REDIS_HOST=example.com</span><br><span class="line"><span class="built_in">export</span> REDIS_PORT=5432</span><br><span class="line"><span class="built_in">export</span> REDIS_PASSWORD=123456</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ï¼Œåœ¨è¿è¡Œpython å‘½ä»¤å‰é¢åŠ ä¸Šenvæ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">env REDIS_HOST=example.com REDIS_PORT=5432 REDIS_PASSWORD=123456 python variables.py</span><br><span class="line">&gt; PID: 23517, PPID: 22650</span><br><span class="line">&gt; 123456@example.com:5432</span><br></pre></td></tr></table></figure><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>åœ¨shellä¸­è·å–å½“å‰è¿›ç¨‹IDï¼Œçˆ¶è¿›ç¨‹IDä»¥åŠUID</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;PID of this script: $$&quot;</span></span><br><span class="line">&gt; 22650</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;PPID of this script: <span class="variable">$PPID</span>&quot;</span></span><br><span class="line">&gt; 22649</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UID of this script: <span class="variable">$UID</span>&quot;</span></span><br><span class="line">&gt; 501</span><br></pre></td></tr></table></figure><p>åœ¨pythonè„šæœ¬ä¸­è·å–å½“å‰è¿›ç¨‹IDä»¥åŠçˆ¶è¿›ç¨‹ID</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;PID: <span class="subst">&#123;os.getpid()&#125;</span>, PPID: <span class="subst">&#123;os.getppid()&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>[1] <a href="http://www.ee.surrey.ac.uk/Teaching/Unix/unix8.html">UNIX Tutorial Eight</a></p><p>[2] <a href="https://stackoverflow.com/questions/3341372/difference-between-shell-and-environment-variables">difference-between-shell-and-environment-variables</a></p><p>[3] <a href="https://unix.stackexchange.com/questions/364655/shell-variable-vs-environment-variable-which-one-is-preferred-if-both-have-the">shell-variable-vs-environment-variable-which-one-is-preferred-if-both-have-the-same-name</a></p><p>[4] <a href="https://linuxize.com/post/how-to-set-and-list-environment-variables-in-linux/">How to Set and List Environment Variables in Linux</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python</title>
      <link href="/posts/aaa7/"/>
      <url>/posts/aaa7/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒï¼š</p><ol><li><a href="https://github.com/python-poetry/poetry">https://github.com/python-poetry/poetry</a></li><li><a href="https://zhuanlan.zhihu.com/p/110721747">https://zhuanlan.zhihu.com/p/110721747</a></li><li><a href="https://blog.csdn.net/daihaoxin/article/details/109262807">https://blog.csdn.net/daihaoxin/article/details/109262807</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dependency </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python Type Checking</title>
      <link href="/posts/acc1/"/>
      <url>/posts/acc1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒï¼š</p><ol><li><p><a href="https://testdriven.io/blog/python-type-checking/">https://testdriven.io/blog/python-type-checking/</a></p></li><li><p><a href="https://testdriven.io/blog/python-code-quality/#running-code-quality-tools">https://testdriven.io/blog/python-code-quality/#running-code-quality-tools</a></p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python library package</title>
      <link href="/posts/205e/"/>
      <url>/posts/205e/</url>
      
        <content type="html"><![CDATA[<h2 id="è§†è§‰"><a href="#è§†è§‰" class="headerlink" title="è§†è§‰"></a>è§†è§‰</h2><ol><li></li></ol><img src="https://oss.smart-lifestyle.cn/blog/cc19h.jpg" /><blockquote><p>[<a href="https://github.com/bokeh/bokeh][1]">https://github.com/bokeh/bokeh][1]</a><br>Bokeh is an interactive visualization library for modern web browsers. It provides elegant, concise construction of versatile graphics, and affords high-performance interactivity over large or streaming datasets. Bokeh can help anyone who would like to quickly and easily make interactive plots, dashboards, and data applications.</p></blockquote><p>![][image-2]![][image-3]![][image-4]![][image-5]</p><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install bokeh</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿäº§åŠ›"><a href="#ç”Ÿäº§åŠ›" class="headerlink" title="ç”Ÿäº§åŠ›"></a>ç”Ÿäº§åŠ›</h2><ol><li><img src="https://oss.smart-lifestyle.cn/file/r7d0g.jpg"><blockquote><p>[<a href="https://github.com/PyCQA/isort][2]">https://github.com/PyCQA/isort][2]</a><br>isort your imports, so you donâ€™t have to.<br>isort is a Python utility / library to sort imports alphabetically, and automatically separated into sections and by type. It provides a command line utility, Python library and plugins for various editors to quickly sort all your imports. It requires Python 3.6+ to run but supports formatting Python 2 code too.</p></blockquote><h3 id="install-1"><a href="#install-1" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install isort</span><br></pre></td></tr></table></figure><h3 id="use"><a href="#use" class="headerlink" title="use"></a>use</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isort file.py</span><br></pre></td></tr></table></figure></li><li><img src="https://oss.smart-lifestyle.cn/file/4dv6l.jpg"><blockquote><p>[<a href="https://github.com/pypyr/pypyr][3]">https://github.com/pypyr/pypyr][3]</a><br>pypyr is a free &amp; open-source task-runner that lets you define and run sequential steps in a pipeline.</p></blockquote><h3 id="install-2"><a href="#install-2" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade pypyr</span><br></pre></td></tr></table></figure><h2 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h2><h3 id="äº‹ä»¶é©±åŠ¨ï¼Œè§‚å¯Ÿè€…æ¨¡å¼"><a href="#äº‹ä»¶é©±åŠ¨ï¼Œè§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="äº‹ä»¶é©±åŠ¨ï¼Œè§‚å¯Ÿè€…æ¨¡å¼"></a>äº‹ä»¶é©±åŠ¨ï¼Œè§‚å¯Ÿè€…æ¨¡å¼</h3></li><li>RxPY v3.0<blockquote><p>[<a href="https://github.com/ReactiveX/RxPY][4]">https://github.com/ReactiveX/RxPY][4]</a><br>A library for composing asynchronous and event-based programs using observable collections and query operator functions in Python</p></blockquote><h3 id="install-3"><a href="#install-3" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install rx</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python library </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockeréƒ¨ç½²è®°å½•</title>
      <link href="/posts/c5ac/"/>
      <url>/posts/c5ac/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="">x</a> ç£ç›˜åˆå§‹åŒ–</li><li><a href="">x</a> ä¿®æ”¹ç³»ç»Ÿæ—¶åŒºä¸ºUTC+8</li><li><a href="">x</a> éƒ¨ç½²dockerç¯å¢ƒï¼Œä¿®æ”¹dockerå®‰è£…ä½ç½®</li><li><a href="">x</a> ä¼˜åŒ–dockerç¯å¢ƒï¼Œé€‚é…china</li><li><a href="">x</a> ä¿®æ”¹ä»£ç é…ç½®æ–‡ä»¶ï¼Œé€‚é…æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ</li><li><a href="">x</a> ä»£ç mergeåˆ°masteråˆ†æ”¯</li><li><a href="">x</a> å®‰è£…dockeré•œåƒ</li><li><a href="">x</a> ä»gitè·å–ä»£ç ï¼Œéƒ¨ç½²</li><li><a href="">Â </a> é…ç½®https</li><li><a href="">Â </a> æµ‹è¯•</li></ul><blockquote><p>æœ¬æ–‡è®°å½•åœ¨Azure ä¸Šéƒ¨ç½²dockeråº”ç”¨çš„è¿‡ç¨‹</p></blockquote><h2 id="ç£ç›˜åˆå§‹åŒ–"><a href="#ç£ç›˜åˆå§‹åŒ–" class="headerlink" title="ç£ç›˜åˆå§‹åŒ–"></a>ç£ç›˜åˆå§‹åŒ–</h2><p>Azureæä¾›çš„ç£ç›˜ä¸ºç³»ç»Ÿç›˜+æ•°æ®ç›˜ï¼Œæ•°æ®ç›˜çš„å¤§å°åœ¨æ–°å»ºè™šæ‹Ÿæœºçš„æ—¶å€™å¯ä»¥é€‰ï¼Œé»˜è®¤æ•°æ®ç›˜æ˜¯æœªæŒ‚è½½åˆ°ç³»ç»Ÿä¸Šçš„ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‚è½½ï¼ŒæŒ‚è½½æ•°æ®ç›˜å¯ä»¥å‚è€ƒï¼š<br><a href="https://docs.azure.cn/zh-cn/virtual-machines/linux/add-disk">https://docs.azure.cn/zh-cn/virtual-machines/linux/add-disk</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡dh -hå‘½ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿç£ç›˜çš„å¤§å°å’Œä½¿ç”¨æƒ…å†µï¼Œç›®å‰æ²¡æœ‰æ•°æ®ç›˜</span></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            3.9G     0  3.9G   0% /dev</span><br><span class="line">tmpfs           796M  676K  795M   1% /run</span><br><span class="line">/dev/sda1        29G  1.5G   28G   5% /</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /dev/shm</span><br><span class="line">tmpfs           5.0M     0  5.0M   0% /run/lock</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda15      105M  3.6M  101M   4% /boot/efi</span><br><span class="line">/dev/sdb1        16G   45M   15G   1% /mnt</span><br><span class="line">tmpfs           796M     0  796M   0% /run/user/1000</span><br><span class="line">........</span><br><span class="line"><span class="comment"># æ“ä½œå®Œä¹‹åï¼Œ df -hï¼Œæœ€åä¸€è¡Œå·²ç»æŒ‚åœ¨åˆ°/datadriveä¸Š</span></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            3.9G     0  3.9G   0% /dev</span><br><span class="line">tmpfs           796M  680K  795M   1% /run</span><br><span class="line">/dev/sda1        29G  1.5G   28G   5% /</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /dev/shm</span><br><span class="line">tmpfs           5.0M     0  5.0M   0% /run/lock</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda15      105M  3.6M  101M   4% /boot/efi</span><br><span class="line">/dev/sdb1        16G   45M   15G   1% /mnt</span><br><span class="line">tmpfs           796M     0  796M   0% /run/user/1000</span><br><span class="line">/dev/sdc1       196G   61M  186G   1% /datadrive</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¹‹åçš„æ‰€æœ‰æ–‡ä»¶æ“ä½œéƒ½æ˜¯åœ¨/datadriveä¸‹</strong><br>é»˜è®¤datadriveçš„æƒé™ä¸ºrootæƒé™ï¼Œä¿®æ”¹æ‰€æœ‰è€…ä¸ºå½“å‰ç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R cniabservice:cniabservice /datadrive/</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ç³»ç»Ÿæ—¶åŒº"><a href="#ä¿®æ”¹ç³»ç»Ÿæ—¶åŒº" class="headerlink" title="ä¿®æ”¹ç³»ç»Ÿæ—¶åŒº"></a>ä¿®æ”¹ç³»ç»Ÿæ—¶åŒº</h2><p>Azureæä¾›çš„linuxé»˜è®¤æ—¶åŒºä¸ºUTCï¼Œéœ€è¦æ”¹ä¸ºä¸­å›½UTC+8æ—¶åŒº<br>ç®€å•æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime </span><br></pre></td></tr></table></figure><p><strong>!docker å†…æ—¶åŒºé»˜è®¤ä¹Ÿä¸ºUTCï¼Œè·Ÿä¸»æœºå¹¶ä¸åŒæ­¥ï¼Œéœ€è¦ä¿®æ”¹ä¸ºUTC+8ï¼Œä¸‹é¢ä¼šè¯´æ˜ï¼Œä¸åœ¨è¿™é‡Œä»‹ç»</strong></p><h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><h3 id="1-ä½¿ç”¨Ubuntu-æºè¿›è¡Œå®‰è£…"><a href="#1-ä½¿ç”¨Ubuntu-æºè¿›è¡Œå®‰è£…" class="headerlink" title="1. ä½¿ç”¨Ubuntu æºè¿›è¡Œå®‰è£…"></a>1. ä½¿ç”¨Ubuntu æºè¿›è¡Œå®‰è£…</h3><p>å‚è€ƒ <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install \</span><br><span class="line">apt-transport-https \</span><br><span class="line">ca-certificates \</span><br><span class="line">curl \</span><br><span class="line">gnupg-agent \</span><br><span class="line">software-properties-common</span><br><span class="line"></span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line">sudo apt-key fingerprint 0EBFCD88</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">   <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="subst">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable&quot;</span></span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br><span class="line">sudo apt-get install docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>apt-getæ˜¯ä»å›½å¤–ç½‘ç«™ä¸‹è½½ï¼Œå¯èƒ½é€Ÿåº¦ä¼šéå¸¸æ…¢</strong>ï¼Œå¯ä»¥ä¸‹è½½debç¦»çº¿åŒ…ï¼š<br><a href="https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/" title="é’ˆå¯¹äºubuntu 18.04">https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/</a></p><blockquote><p>Go to <a href="https://download.docker.com/linux/ubuntu/dists/">https://download.docker.com/linux/ubuntu/dists/</a>, choose your Ubuntu version, browse to pool/stable/, choose amd64, armhf, arm64, ppc64el, or s390x, and download the .deb file for the Docker Engine - Community version you want to install.<br>ä½¿ç”¨dpkg -i *.deb å®‰è£…é¡ºåºä¸ºï¼š</p></blockquote><ol><li>containerd.io</li><li>docker-ce</li><li>docker-ce-cli</li><li>æœ€å apt-get install docker-compose</li></ol><p>dockeré»˜è®¤rootæƒé™æ“ä½œï¼Œå°†å½“å‰ç”¨æˆ·åŠ å…¥rootç»„ï¼Œå…æ¯æ¬¡æ“ä½œè¾“å…¥å¯†ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If you would like to use Docker as a non-root user, you should now consider adding your user to the â€œdockerâ€ group with something like:</span></span><br><span class="line">sudo usermod -aG docker your-user</span><br></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹dockeré•œåƒå­˜å‚¨ç­‰å­˜å‚¨ä½ç½®"><a href="#2-ä¿®æ”¹dockeré•œåƒå­˜å‚¨ç­‰å­˜å‚¨ä½ç½®" class="headerlink" title="2. ä¿®æ”¹dockeré•œåƒå­˜å‚¨ç­‰å­˜å‚¨ä½ç½®"></a>2. ä¿®æ”¹dockeré•œåƒå­˜å‚¨ç­‰å­˜å‚¨ä½ç½®</h3><p>é»˜è®¤å­˜å‚¨ä½ç½®åœ¨ç³»ç»Ÿç›˜ï¼Œè¦å°†å…¶è¿ç§»è‡³æ•°æ®ç›˜<br>åœ¨æ§åˆ¶å°è¾“å…¥docker infoï¼ŒæŸ¥çœ‹å½“å‰docker å­˜å‚¨ä½ç½®<br><img src="https://oss.smart-lifestyle.cn/blog/qx062.jpg"><br>åœ¨/etc/docker/ä¸‹æ–°å»ºdaemon.jsonæ–‡ä»¶, graphä¸ºå­˜å‚¨ä½ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://1x2ypu6h.mirror.aliyuncs.com&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;hosts&quot;</span>:[</span><br><span class="line">    <span class="string">&quot;tcp://0.0.0.0:2375&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unix:///var/run/docker.sock&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;graph&quot;</span>: <span class="string">&quot;/datadrive/dockerdata&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯dockerï¼Œsudo service docker restartï¼Œå†æ¬¡docker infoæŸ¥çœ‹é…ç½®<br><img src="https://oss.smart-lifestyle.cn/blog/7rvdj.jpg"><br><strong>ä¿®æ”¹æˆåŠŸï¼</strong></p><h2 id="ä»ä»£ç ä»“åº“è·å–ä»£ç "><a href="#ä»ä»£ç ä»“åº“è·å–ä»£ç " class="headerlink" title="ä»ä»£ç ä»“åº“è·å–ä»£ç "></a>ä»ä»£ç ä»“åº“è·å–ä»£ç </h2><h3 id="1-pull-request-to-Master"><a href="#1-pull-request-to-Master" class="headerlink" title="1. pull request to Master"></a>1. pull request to Master</h3><p>é‡åˆ°é—®é¢˜ï¼Œæ²¡æœ‰æƒé™è¿›è¡Œåˆå¹¶æ“ä½œï¼Œåªæœ‰å®¡æ‰¹åŠŸèƒ½ï¼Œä¿®æ”¹å¦‚ä¸‹åœ°æ–¹<br><img src="https://oss.smart-lifestyle.cn/blog/98qaq.jpg"></p><h3 id="2-åœ¨è¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨git-cloneè·å–ä»£ç "><a href="#2-åœ¨è¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨git-cloneè·å–ä»£ç " class="headerlink" title="2. åœ¨è¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨git cloneè·å–ä»£ç "></a>2. åœ¨è¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨git cloneè·å–ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å¦‚ä¸‹ç”¨æˆ·åå¯†ç </span></span><br><span class="line"><span class="comment"># ç”¨æˆ·åï¼šjenkins å¯†ç ï¼š***************</span></span><br><span class="line">git <span class="built_in">clone</span> https://dev.azure.com/ds-rnd/*************</span><br></pre></td></tr></table></figure><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir redisdb</span><br><span class="line">mkdir mysqldb</span><br><span class="line">mkdir ssl_key</span><br><span class="line">mkdir conf</span><br><span class="line"><span class="comment"># ä¿®æ”¹nginx.confæ–‡ä»¶</span></span><br><span class="line">mkdir -p static/.well-known</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.0.0&quot;</span> \&gt; version</span><br></pre></td></tr></table></figure><h3 id="1-æ„å»ºdocker"><a href="#1-æ„å»ºdocker" class="headerlink" title="1. æ„å»ºdocker"></a>1. æ„å»ºdocker</h3><p>åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹æ‰§è¡Œ docker-compose up è¿›è¡Œé¦–æ¬¡ç¼–è¯‘é•œåƒå’Œå¯åŠ¨å®¹å™¨</p><h3 id="2-åˆå§‹åŒ–æ•°æ®åº“"><a href="#2-åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="2. åˆå§‹åŒ–æ•°æ®åº“"></a>2. åˆå§‹åŒ–æ•°æ®åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºabbdriveæ•°æ®åº“</span></span><br><span class="line">python manage.py makemigrations abbdrivemodel</span><br><span class="line">python manage.py migrate</span><br><span class="line">æ‰§è¡Œ</span><br><span class="line">http://g*************.cloudapp.chinacloudapi.cn/**********</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git commitè§„èŒƒ</title>
      <link href="/posts/76bd/"/>
      <url>/posts/76bd/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æäº¤git æ—¶ï¼Œå¦‚ä½•èƒ½å°†æäº¤çš„ä¿¡æ¯å†™æ¸…æ™°æ˜äº†ï¼Œé¿å…ä¸è§„èŒƒçš„ä»£ç æäº¤</p><p>git æ¯æ¬¡æäº¤éƒ½éœ€è¦å†™commit messageï¼Œå¦åˆ™å°±ä¸å…è®¸æäº¤ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œcommit messageåº”è¯¥æ¸…æ™°æ˜äº†ï¼Œè¯´æ˜æœ¬æ¬¡æäº¤çš„ç›®çš„ï¼Œå…·ä½“åšäº†ä»€ä¹ˆæ“ä½œï¼Œä½†æ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¤§å®¶çš„commit messageåƒå¥‡ç™¾æ€ªï¼Œä¸­è‹±æ–‡æ··åˆä½¿ç”¨ï¼Œfix bugç­‰å„ç§ç¬¼ç»Ÿçš„messageå¸ç©ºè§æ€ªï¼Œè§„èŒƒgit commit messageå¾ˆé‡è¦</p></blockquote><p>æ¯”è¾ƒæµè¡Œçš„è§„èŒƒæ•´ç†å¦‚ä¸‹ã€‚</p><h2 id="commit-message-æ ¼å¼"><a href="#commit-message-æ ¼å¼" class="headerlink" title="commit message æ ¼å¼"></a>commit message æ ¼å¼</h2><p>å»ºè®®æ¯è¡Œä¸è¶…è¿‡100ä¸ªå­—ç¬¦</p><p><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure><ul><li><p>type(å¿…é¡»)</p><p>ç”¨äºè¯´æ˜git commitçš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢çš„æ ‡è¯†ã€‚</p><p>feat: æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</p><p>fix: ä¿®å¤bugï¼Œå¯ä»¥æ˜¯QAå‘ç°çš„BUGï¼Œä¹Ÿå¯ä»¥æ˜¯ç ”å‘è‡ªå·±å‘ç°çš„BUG</p><p>docs: æ–‡æ¡£ï¼ˆdocumentï¼‰</p><p>style: æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨, æ¯”å¦‚åˆ é™¤å¤šä½™çš„ç©ºè¡Œï¼‰</p><p>refactor: é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç è¿åŠ¨ï¼‰</p><p>perf: ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ</p><p>test: å¢åŠ æµ‹è¯•</p><p>chore: æ„å»ºè¿‡ç¨‹æˆ–è€…è¾…åŠ©å·¥å…·çš„å˜åŠ¨</p><p>revert: å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œéœ€è¦åœ¨bodyä¸­å†™ä¸Šä»å“ªä¸€ä¸ªç‰ˆæœ¬revertçš„</p><p>merge: ä»£ç åˆå¹¶</p><p>sync: åŒæ­¥ä¸»çº¿æˆ–è€…åˆ†å¸ƒçš„bug</p></li><li><p>scopeï¼ˆå¯é€‰ï¼‰</p><p>scopeç”¨äºè¯´æ˜å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®çš„ä¸åŒè€Œä¸åŒ</p><p>å¦‚æœä¿®æ”¹å½±å“äº†ä¸æ­¢ä¸€ä¸ªsocopeï¼Œä½ å¯ä»¥ä½¿ç”¨*ä»£æ›¿</p></li><li><p>subjectï¼ˆå¿…é¡»ï¼‰</p><p>subjectæ˜¯commitç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50å­—ç¬¦ã€‚</p><p>å»ºè®®ä½¿ç”¨ä¸­æ–‡ã€‚</p><p>ç»“å°¾ä¸åŠ å¥å·æˆ–è€…å…¶ä»–æ ‡ç‚¹ç¬¦å·</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸¾ä¾‹</span></span><br><span class="line">docs(api): æ¥å£è¯´æ˜å®Œå–„</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">feat($</span><span class="bash">browser): onUrlChange event (popstate/hashchange/polling)</span></span><br><span class="line"></span><br><span class="line">Added new event to $browser:</span><br><span class="line">- forward popstate event if available</span><br><span class="line">- forward hashchange event if popstate not available</span><br><span class="line">- do polling when neither popstate nor hashchange available</span><br><span class="line"></span><br><span class="line">Breaks $browser.onHashChange, which was removed (use onUrlChange instead)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">fix($</span><span class="bash">compile): couple of unit tests <span class="keyword">for</span> IE9</span></span><br><span class="line"></span><br><span class="line">Older IEs serialize html uppercased, but IE9 does not...</span><br><span class="line">Would be better to expect case insensitive, unfortunately jasmine does</span><br><span class="line">not allow to user regexps for throw expectations.</span><br><span class="line"></span><br><span class="line">Closes #392</span><br><span class="line">Breaks foo.bar api, foo.baz should be used instead</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">feat($</span><span class="bash">compile): simplify isolate scope bindings</span></span><br><span class="line"></span><br><span class="line">Changed the isolate scope binding options to:</span><br><span class="line">  - @attr - attribute binding (including interpolation)</span><br><span class="line">  - =model - by-directional model binding</span><br><span class="line">  - &amp;expr - expression execution binding</span><br><span class="line"></span><br><span class="line">This change simplifies the terminology as well as</span><br><span class="line">number of choices available to the developer. It</span><br><span class="line">also supports local name aliasing from the parent.</span><br><span class="line"></span><br><span class="line">BREAKING CHANGE: isolate scope bindings definition has changed and</span><br><span class="line">the inject option for the directive controller injection was removed.</span><br><span class="line"></span><br><span class="line">To migrate the code follow the example below:</span><br><span class="line"></span><br><span class="line">Before:</span><br><span class="line"></span><br><span class="line">scope: &#123;</span><br><span class="line">  myAttr: &#x27;attribute&#x27;,</span><br><span class="line">  myBind: &#x27;bind&#x27;,</span><br><span class="line">  myExpression: &#x27;expression&#x27;,</span><br><span class="line">  myEval: &#x27;evaluate&#x27;,</span><br><span class="line">  myAccessor: &#x27;accessor&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">After:</span><br><span class="line"></span><br><span class="line">scope: &#123;</span><br><span class="line">  myAttr: &#x27;@&#x27;,</span><br><span class="line">  myBind: &#x27;@&#x27;,</span><br><span class="line">  myExpression: &#x27;&amp;&#x27;,</span><br><span class="line">  // myEval - usually not useful, but in cases where the expression is assignable, you can use &#x27;=&#x27;</span><br><span class="line">  myAccessor: &#x27;=&#x27; // in directive&#x27;s template change myAccessor() to myAccessor</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">The removed `inject` wasn&#x27;t generaly useful for directives so there should be no code using it.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨git-commit-è§„èŒƒçš„å¥½å¤„"><a href="#ä½¿ç”¨git-commit-è§„èŒƒçš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨git commit è§„èŒƒçš„å¥½å¤„"></a>ä½¿ç”¨git commit è§„èŒƒçš„å¥½å¤„</h3><ol><li>ä¾¿äºè¿½æº¯æäº¤å†å²è¿›è¡Œè¿½æº¯</li><li>ä¸€æ—¦çº¦æŸäº†commit messageï¼Œå°±ä¸èƒ½å†ä¸€è‚¡è„‘çš„æŠŠå„ç§å„æ ·çš„æ”¹åŠ¨éƒ½æ”¾åœ¨ä¸€ä¸ªgit commité‡Œé¢</li><li>ä¾¿äºè‡ªåŠ¨åŒ–è¾“å‡ºchange log(CHANGELOG.md)</li></ol><p>[1] <a href="https://developer.aliyun.com/article/770277?accounttraceid=d4154093542c440aa51196b76d1ccbe3eyfz">https://developer.aliyun.com/article/770277?accounttraceid=d4154093542c440aa51196b76d1ccbe3eyfz</a></p><p>[2] <a href="https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#">https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git commit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.gitignoreæ¨¡å¼åŒ¹é…</title>
      <link href="/posts/4da0/"/>
      <url>/posts/4da0/</url>
      
        <content type="html"><![CDATA[<ul><li>åŒ¹é…æ¨¡å¼å‰ä½¿ç”¨ <code>/</code> è¡¨ç¤ºæ ¹ç›®å½•<pre><code>  /filename è¡¨ç¤ºåŒ¹é…æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶filename</code></pre></li><li>åŒ¹é…æ¨¡å¼åä½¿ç”¨ <code>/</code> ä»£è¡¨æ˜¯ç›®å½•ï¼ˆä¸æ˜¯æ–‡ä»¶ï¼‰<pre><code>  dirname/ è¡¨ç¤ºåŒ¹é…çš„æ˜¯dirnameæ–‡ä»¶å¤¹</code></pre></li><li>åŒ¹é…æ¨¡å¼å‰åŠ  <code>ï¼</code> è¡¨ç¤ºå–å</li><li><code>*</code> ä»£è¡¨ä»»æ„ä¸ªå­—ç¬¦<pre><code>  db*.json è¡¨ç¤ºåŒ¹é…ä»¥dbå¼€å¤´çš„jsonæ–‡ä»¶</code></pre></li><li><code>?</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦<pre><code>  db?.json è¡¨ç¤ºä»¥dbå¼€å¤´å¹¶ä¸”æ–‡ä»¶åä¸ºä¸‰ä¸ªå­—ç¬¦çš„jsonæ–‡ä»¶</code></pre></li><li> <code>**</code> åŒ¹é…ä»»æ„çº§ç›®å½•</li></ul>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> gitignore </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡ftplibè·å–ftpæŒ‡å®šæ—¥æœŸé—´çš„æ–‡ä»¶</title>
      <link href="/posts/e530/"/>
      <url>/posts/e530/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨python-ftplib-åº“è·å–-æŸä¸€å¤©çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸‹è½½åˆ°æœ¬åœ°"><a href="#ä½¿ç”¨python-ftplib-åº“è·å–-æŸä¸€å¤©çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸‹è½½åˆ°æœ¬åœ°" class="headerlink" title="ä½¿ç”¨python ftplib åº“è·å– æŸä¸€å¤©çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸‹è½½åˆ°æœ¬åœ°"></a>ä½¿ç”¨python ftplib åº“è·å– æŸä¸€å¤©çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸‹è½½åˆ°æœ¬åœ°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ftp è®¾ç½®</span></span><br><span class="line">ftp_server = <span class="string">&quot;******&quot;</span></span><br><span class="line">ftp_user = <span class="string">&quot;*****&quot;</span></span><br><span class="line">ftp_password = <span class="string">&quot;******&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ftplib <span class="keyword">import</span> FTP</span><br><span class="line"></span><br><span class="line">ftp = FTP(host=ftp_server, user=ftp_user, passwd=ftp_password)</span><br><span class="line"><span class="comment"># é€šè¿‡nlstè·å–æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">file_list = ftp.nlst()</span><br><span class="line"><span class="comment"># é€šè¿‡voidcmd è·å–æ–‡ä»¶æ›´æ–°ï¼ˆä¸Šä¼ ï¼‰æ—¶é—´</span></span><br><span class="line">date = ftp.voidcmd(<span class="string">f&quot;MDTM 202002190502.csv&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(date)</span><br></pre></td></tr></table></figure><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 213 20200219170403</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ–‡ä»¶</span></span><br><span class="line">filter_date = <span class="string">&#x27;20200520&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†æ‰€æœ‰æ–‡ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line">items = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x: ftp.voidcmd(<span class="string">f&quot;MDTM <span class="subst">&#123;x&#125;</span>&quot;</span>)[<span class="number">4</span>:<span class="number">12</span>] == filter_date, file_list)</span><br><span class="line"><span class="comment"># éå†è¿­ä»£å™¨, é€šè¿‡retrbinaryä¸‹è½½æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;file name: <span class="subst">&#123;item&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&#x27;temp/<span class="subst">&#123;item&#125;</span>&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        ftp.retrbinary(<span class="string">f&#x27;RETR <span class="subst">&#123;item&#125;</span>&#x27;</span>, fp.write)</span><br><span class="line"><span class="comment"># å…³é—­ftp</span></span><br><span class="line">ftp.quit()</span><br></pre></td></tr></table></figure><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">file</span> <span class="keyword">name</span>: HMI123456789_20200508.csv</span><br><span class="line"><span class="keyword">file</span> <span class="keyword">name</span>: HMI123456789_20200509.csv</span><br><span class="line"><span class="keyword">file</span> <span class="keyword">name</span>: HMI123456789_20200514.csv</span><br><span class="line"><span class="keyword">file</span> <span class="keyword">name</span>: HMI123456789_20200520.csv</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;221 Goodbye.&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å½“ftp æœåŠ¡å™¨å…³é—­æ˜¯ï¼Œå†éå†è¿‡æ»¤åçš„è¿­ä»£å™¨å°†ä¸ºç©º</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    <span class="built_in">print</span>(itme)</span><br><span class="line">    </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>å¦å¤–è¿˜å¯ä»¥é€šè¿‡ftp.dirè·å–ï¼Œå…·ä½“å®ç°å‚è€ƒæ–‡æ¡£ï¼š<a href="https://www.semicolonworld.com/question/57790/how-to-get-ftp-file-39-s-modify-time-using-python-ftplib">https://www.semicolonworld.com/question/57790/how-to-get-ftp-file-39-s-modify-time-using-python-ftplib</a></p><p>å‚è€ƒï¼š</p><ol><li><a href="https://docs.python.org/3/library/ftplib.html" title="ftplib">https://docs.python.org/3/library/ftplib.html</a></li><li><a href="https://stackoverflow.com/questions/8990598/python-ftp-get-the-most-recent-file-by-date?answertab=votes#tab-top" title="Python FTP get the most recent file by date">https://stackoverflow.com/questions/8990598/python-ftp-get-the-most-recent-file-by-date?answertab=votes#tab-top</a></li><li><a href="https://stackoverflow.com/questions/29026709/how-to-get-ftp-files-modify-time-using-python-ftplib" title="How to get FTP file&#39;s modify time using Python ftplib">https://stackoverflow.com/questions/29026709/how-to-get-ftp-files-modify-time-using-python-ftplib</a></li><li><a href="https://tools.ietf.org/html/rfc3659#section-3" title="rfc3659">https://tools.ietf.org/html/rfc3659#section-3</a></li><li><a href="https://www.semicolonworld.com/question/57790/how-to-get-ftp-file-39-s-modify-time-using-python-ftplib">Â https://www.semicolonworld.com/question/57790/how-to-get-ftp-file-39-s-modify-time-using-python-ftplibÂ </a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> ftplib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ZSHä¸‹ä½¿ç”¨Anaconda</title>
      <link href="/posts/e37f/"/>
      <url>/posts/e37f/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨zshä¸‹é¢æ‰¾ä¸åˆ°condaæˆ–è€…æŸ¥çœ‹pythonï¼Œå¹¶ä¸æ˜¯ç”¨çš„anacondaç‰ˆæœ¬çš„<br>anacondaçš„å®‰è£…å‚è€ƒï¼š<a href="https://docs.anaconda.com/anaconda/install/">https://docs.anaconda.com/anaconda/install/</a></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘zshrcæ–‡ä»¶ï¼Œå°†ä¸‹é¢è¿™å¥åŠ åˆ°zshrcä¸­ï¼›anaconda_homeä¸ºanacondaçš„å®‰è£…ç›®å½•</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;[anaconda_home]/bin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><ol><li><a href="https://www.jianshu.com/p/74b1c60148e8">https://www.jianshu.com/p/74b1c60148e8</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Anaconda </tag>
            
            <tag> ZSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jupyterlab + jupyterhub + supervisor</title>
      <link href="/posts/93be/"/>
      <url>/posts/93be/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è®°å½•åœ¨jupyterhub ä¸­ä½¿ç”¨jupyterlabï¼Œå¹¶ä¸”ä½¿ç”¨supervisorç®¡ç†è¿›ç¨‹è¿è¡Œ<br>supervisor åœ¨érootç”¨æˆ·ä¸‹è¿è¡Œå’Œç®¡ç†è¿›ç¨‹</p></blockquote><h3 id="å®‰è£…jupyterhub"><a href="#å®‰è£…jupyterhub" class="headerlink" title="å®‰è£…jupyterhub"></a>å®‰è£…jupyterhub</h3><blockquote><p>å‰ææ¡ä»¶</p><ol><li>python 3.5+</li><li>nodejs/npm</li></ol></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… http-proxyï¼Œå¹¶ä½¿ç”¨æ·˜å®é•œåƒ</span></span><br><span class="line">npm install -g configurable-http-proxy --registry=https://registry.npm.taobao.org</span><br><span class="line"><span class="comment"># å®‰è£… jupyterhubï¼Œå¹¶ä½¿ç”¨è±†ç“£é•œåƒ</span></span><br><span class="line">python3 -m pip install jupyterhub -i https://pypi.douban.com/simple/</span><br><span class="line"><span class="comment"># åœ¨ç»ˆç«¯ä¸­è¾“å…¥jupyterhub çœ‹æ˜¯å¦è¿è¡Œ</span></span><br><span class="line">jupyterhub</span><br><span class="line"><span class="comment"># Visit https://localhost:8000 in your browser, and sign in with your unix PAM credentials.</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-jupyterlabï¼Œå¹¶é…ç½®åˆ°-jupyterhubä¸­"><a href="#å®‰è£…-jupyterlabï¼Œå¹¶é…ç½®åˆ°-jupyterhubä¸­" class="headerlink" title="å®‰è£… jupyterlabï¼Œå¹¶é…ç½®åˆ° jupyterhubä¸­"></a>å®‰è£… jupyterlabï¼Œå¹¶é…ç½®åˆ° jupyterhubä¸­</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… jupyterlab</span></span><br><span class="line">python3 -m pip install jupyterlab -i https://pypi.douban.com/simple/</span><br><span class="line"><span class="comment"># é€šè¿‡ jupyterhubç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå¹¶å­˜æ”¾åœ¨ $HOME/jupyterhubä¸­</span></span><br><span class="line">jupyterhub --generate-config</span><br><span class="line"><span class="comment"># ç¼–è¾‘ jupyterhub_config.py</span></span><br><span class="line"><span class="comment"># è®¾å®šä½ çš„å¯åŠ¨æ‰“å¼€ç›®å½•</span></span><br><span class="line">c.Spawner.notebook_dir = <span class="string">&#x27;/home/simple/develop/jupyter_home&#x27;</span></span><br><span class="line"><span class="comment"># è®¾å®šä»¥ jupyterlabè¿è¡Œ</span></span><br><span class="line">c.Spawner.default_url = <span class="string">&#x27;/lab&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…supervisorï¼Œå¹¶å°†-jupyterhubç®¡ç†åŠ å…¥å…¶ä¸­"><a href="#å®‰è£…supervisorï¼Œå¹¶å°†-jupyterhubç®¡ç†åŠ å…¥å…¶ä¸­" class="headerlink" title="å®‰è£…supervisorï¼Œå¹¶å°† jupyterhubç®¡ç†åŠ å…¥å…¶ä¸­"></a>å®‰è£…supervisorï¼Œå¹¶å°† jupyterhubç®¡ç†åŠ å…¥å…¶ä¸­</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…supervisor</span></span><br><span class="line">python -m pip install supervisor</span><br><span class="line"><span class="comment"># ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œæ”¾åœ¨/etc/ ä¸­</span></span><br><span class="line">echo_supervisord_conf &gt; /etc/supervisord.conf </span><br><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶å¤¹</span></span><br><span class="line">sudo mkdir -p /etc/supervisor/conf.d/</span><br><span class="line"><span class="comment"># ç¼–è¾‘ supervisord.conf ï¼Œåœ¨æœ€åå–æ¶ˆæ³¨é‡Šï¼ŒåŠ å…¥f iles = /etc/supervisor/conf.d/*.conf</span></span><br><span class="line">[include]</span><br><span class="line">;files = relative/directory/*.ini</span><br><span class="line">files = /etc/supervisor/conf.d/*.conf</span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯åŠ¨ç”¨æˆ·ä¸ºå½“å‰ç”¨æˆ·ï¼Œå¦‚æœæ˜¯rootï¼Œè¯·å¿½ç•¥</span></span><br><span class="line">[supervisord]</span><br><span class="line">user=simple</span><br></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨ /etc/supervisor/<span class="keyword">conf</span>.d/ æ–°å»º jupyterhub.<span class="keyword">conf</span>ï¼Œ å†…å®¹å¦‚ä¸‹</span><br><span class="line">[program:jupyterhub]</span><br><span class="line"><span class="keyword">command</span>=jupyterhub -<span class="keyword">f</span> /home/simple/jupyterhub/jupyterhub_config.<span class="keyword">py</span></span><br><span class="line">directory=/home/simple/jupyterhub</span><br><span class="line">autostart=true</span><br><span class="line">autorestart=true</span><br><span class="line">startretries=<span class="number">3</span></span><br><span class="line">exitcodes=<span class="number">0</span>,<span class="number">2</span></span><br><span class="line">stopsignal=TERM</span><br><span class="line">redirect_stderr=true</span><br><span class="line">stdout_logfile=/home/simple/jupyterhub/<span class="built_in">log</span>/jupyterhub.<span class="built_in">log</span></span><br><span class="line">stdout_logfile_maxbytes=<span class="number">1</span>MB</span><br><span class="line">stdout_logfile_backups=<span class="number">10</span></span><br><span class="line">user=simple</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ä»»æ„ä½ç½®è¿è¡Œ supervisordï¼Œå¯åŠ¨ supervisor ä¸»è¿›ç¨‹</span></span><br><span class="line">supervisord</span><br><span class="line"><span class="comment"># é€šè¿‡supervisorctl status æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">supervisorctl status</span><br><span class="line">$ jupyterhub                       RUNNING   pid 16161, uptime 0:24:15</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ip:8000ï¼Œè¾“å…¥ç³»ç»Ÿçš„è®¾ç½®çš„ç”¨æˆ·åå¯†ç è¿›è¡Œç™»å½•</p><h3 id="é…ç½®https"><a href="#é…ç½®https" class="headerlink" title="é…ç½®https"></a>é…ç½®https</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘ jupyterhub_config.pyï¼Œ é…ç½®ssl_cert å’Œ ssl_key</span></span><br><span class="line">c.JupyterHub.ssl_cert = <span class="string">&#x27;/****/*****/ssl_file/full_chain.pem&#x27;</span></span><br><span class="line">c.JupyterHub.ssl_key = <span class="string">&#x27;/****/****/ssl_file/private.key&#x27;</span></span><br><span class="line"><span class="comment"># ä¿å­˜åé‡å¯supervisor</span></span><br><span class="line">supervisorctl restart jupyterhub</span><br></pre></td></tr></table></figure><p><em>ssl è¯ä¹¦ç”³è¯·å¯ä»¥å‚è€ƒï¼š<a href="https://freessl.cn/">https://freessl.cn/</a></em><br>æœ€ç»ˆæ•ˆæœï¼š<br><img src="https://oss.smart-lifestyle.cn/blog/mrwzk.png" alt="æ•ˆæœ"></p><h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ul><li>å¯ç”¨jupyterlab æ’ä»¶ç®¡ç†</li></ul><ul><li>Settings â€“&gt; Enable Extension Manager å¯ç”¨</li><li>åœ¨ Extension Managerä¸­æœç´¢managerï¼Œé€‰æ‹©@jupyter-widgets/jupyterlab-managerï¼Œç‚¹å‡»å®‰è£…</li></ul><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ol><li><a href="https://juejin.im/post/5d80da83e51d45620c1c5471">å¦‚ä½•å®‰è£…supervisor</a></li><li><a href="https://developer.aliyun.com/mirror/NPM">npmæ·˜å®é•œåƒ</a></li><li><a href="https://www.jianshu.com/p/c5b7c619dd0b">è±†ç“£pythonæº</a></li><li><a href="https://github.com/jupyterhub/jupyterhub-tutorial/tree/master/supervisor">jupyterhubå®˜ç½‘ supervisorå‚è€ƒ</a></li><li><a href="https://jupyterlab.readthedocs.io/en/latest/user/jupyterhub.html">é…ç½®jupyterhub ä½¿ç”¨jupyterlab</a></li><li><a href="https://jupyter.org/install">jupyterlabå®‰è£…</a></li><li><a href="https://github.com/jupyterhub/jupyterhub">jupyterhubå®‰è£…</a></li><li><a href="https://jupyterhub.readthedocs.io/en/stable/getting-started/security-basics.html">ssl åŠ å¯† httpsåŒ–</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jupyterlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨linuxä¸­å®‰è£…oh-my-zsh</title>
      <link href="/posts/ea0a/"/>
      <url>/posts/ea0a/</url>
      
        <content type="html"><![CDATA[<blockquote><p>oh-my-zsh æ˜¯zshçš„ç®¡ç†é…ç½®å·¥å…·ï¼Œå› æ­¤åœ¨ä½¿ç”¨oh-my-zshä¹‹å‰å®‰è£…zsh</p></blockquote><p><img src="https://oss.smart-lifestyle.cn/blog/w5ahz.jpg" alt="zsh"></p><ol><li>åˆ¤æ–­å½“å‰ç³»ç»Ÿä½¿ç”¨çš„shell<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å°å½“å‰ç³»ç»Ÿä½¿ç”¨çš„shell</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br><span class="line"><span class="comment"># å¯èƒ½ä¼šè¾“å‡º</span></span><br><span class="line"><span class="comment"># /bin/bash</span></span><br><span class="line"><span class="comment"># /bin/sh</span></span><br><span class="line"><span class="comment"># /bin/zsh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„shell</span></span><br><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure></li><li>å®‰è£…zsh<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæœªå®‰è£…zsh</span></span><br><span class="line">sudo apt-get install zsh</span><br></pre></td></tr></table></figure></li><li>åˆ‡æ¢shellä¸ºzsh<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># éœ€è¦é‡å¯</span></span><br><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure></li><li>å®‰è£… oh my zsh<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># via curl</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line"><span class="comment"># via wget</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>å‚è€ƒï¼š</li><li><a href="https://www.jianshu.com/p/d194d29e488c">https://www.jianshu.com/p/d194d29e488c</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> zsh </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oh-my-zsh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Ubuntuä¸­åˆ›å»ºsudo user</title>
      <link href="/posts/c222/"/>
      <url>/posts/c222/</url>
      
        <content type="html"><![CDATA[<ul><li>åˆ›å»ºç”¨æˆ·<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç”¨æˆ·ä¸ºusernameçš„ç”¨æˆ·ï¼Œå¹¶æŒ‡å®šä¸»ç›®å½•home</span></span><br><span class="line">sudo user add [username] --home [home]</span><br><span class="line"><span class="comment"># ä¸ºåˆ›å»ºçš„ç”¨æˆ·è®¾å®šå¯†ç </span></span><br><span class="line">passwd [username]</span><br></pre></td></tr></table></figure></li><li>é€šè¿‡usermodå‘½ä»¤å°†ç”¨æˆ·æ·»åŠ åˆ°sudo groupï¼ˆéƒ¨ç½²rootç»„ï¼‰<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo usermode -aG sudo [username]</span><br><span class="line"><span class="comment"># ä¹‹åå°±å¯ä»¥ä½¿ç”¨sudo å°†å½“å‰ç”¨æˆ·æƒé™æå‡åˆ°ç®¡ç†å‘˜æƒé™</span></span><br><span class="line">su [username]</span><br><span class="line"><span class="comment"># è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment"># sudo + command æ‰§è¡Œå‘½ä»¤</span></span><br></pre></td></tr></table></figure>å‚è€ƒï¼š</li></ul><ol><li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart">https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart</a></p></li><li><p><a href="https://ohmyz.sh/">https://ohmyz.sh/</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºä¸‹æ‹‰åˆ·æ–°æ“ä½œ</title>
      <link href="/posts/1ea1/"/>
      <url>/posts/1ea1/</url>
      
        <content type="html"><![CDATA[<ul><li>åŠŸèƒ½ï¼š å®ç°æ‰‹åŠ¨ä¸‹æ‹‰åˆ·æ–°è§¦å‘äº‹ä»¶</li></ul><ul><li>åœ¨éœ€è¦åŠ è½½ä¸‹æ‹‰åˆ·æ–°é¡µé¢çš„jsonæ–‡ä»¶ä¸­åŠ å…¥ <strong>â€œenablePullDownRefreshâ€: true, â€œbackgroundTextStyleâ€: â€œdarkâ€</strong>, <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;enablePullDownRefresh&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span>: <span class="string">&quot;dark&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;mp-dialog&quot;</span>: <span class="string">&quot;../../weui-miniprogram/dialog/dialog&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;mp-navigation-bar&quot;</span>: <span class="string">&quot;../../weui-miniprogram/navigation-bar/navigation-bar&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>åœ¨å¯¹åº”çš„jsæ–‡ä»¶ä¸­é…ç½®æ–¹æ³•<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onPullDownRefresh: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      wx.showNavigationBarLoading();</span><br><span class="line">      <span class="comment">// ä½ è¦è§¦å‘çš„å‡½æ•°</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;refresh&#x27;</span>);</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ ‡é¢˜æ éšè—åˆ·æ–°è½¬åœˆåœˆå›¾æ ‡</span></span><br><span class="line">        wx.hideNavigationBarLoading();</span><br><span class="line">        wx.stopPullDownRefresh(&#123;</span><br><span class="line">          <span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;&#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">  </span><br><span class="line">        &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure></li><li>åœ¨onShowä¸­åŠ å…¥startPullDownRefreshï¼Œä¼šæ¯æ¬¡show é¡µé¢æ—¶è°ƒç”¨åˆ·æ–°å‡½æ•°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onShow: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      wx.startPullDownRefresh(&#123;</span><br><span class="line">         <span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&#x27;===============onshow resfrsh use info&#x27;</span>)</span><br><span class="line">         &#125;,</span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>å‚è€ƒï¼š</li><li><a href="https://blog.csdn.net/weichen913/article/details/79360658">å°ç¨‹åºä¸Šæ‹‰åŠ è½½å’Œä¸‹æ‹‰åˆ·æ–°é—®é¢˜æ€»ç»“</a></li></ol><hr><p>æœ€åæ•ˆæœ<br><img src="https://oss.smart-lifestyle.cn/blog/yqv6s.gif" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå…¨å±€å˜é‡</title>
      <link href="/posts/b9a0/"/>
      <url>/posts/b9a0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é€šè¿‡åœ¨app.jsä¸­å£°æ˜globalDataï¼Œå°†æ‰€éœ€è¦çš„å˜é‡åŠå…¶å€¼æ”¾åœ¨è¿™é‡Œ</p></blockquote><ol><li>å®šä¹‰å£°æ˜<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">globalData: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// dev or prod</span></span><br><span class="line">    <span class="attr">platform</span>: <span class="string">&quot;dev&quot;</span>,</span><br><span class="line">    <span class="attr">dev_server</span>: <span class="string">&quot;xxxx&quot;</span>,</span><br><span class="line">    <span class="attr">prod_server</span>: <span class="string">&quot;xxxxxx&quot;</span>,</span><br><span class="line">    <span class="attr">feedback_server</span>: <span class="string">&quot;xxxxx&quot;</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li>å¼•ç”¨<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨éœ€è¦ä½¿ç”¨å…¨å±€å˜é‡çš„åœ°æ–¹ï¼Œå£°æ˜å˜é‡</span></span><br><span class="line"><span class="keyword">const</span> app = getApp();</span><br><span class="line"><span class="comment">// å¼•ç”¨</span></span><br><span class="line"><span class="keyword">var</span> paltform = app.globalData.platform</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>å‚è€ƒï¼š</li><li><a href="https://www.jianshu.com/p/925aad432874">å¾®ä¿¡å°ç¨‹åº å…¨å±€å˜é‡</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>virtualenvwrapperçš„å®‰è£…å’Œä½¿ç”¨</title>
      <link href="/posts/9fc5/"/>
      <url>/posts/9fc5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>virtualenvwrapper æ˜¯pythonè™šæ‹Ÿè¿è¡Œç¯å¢ƒçš„ç®¡ç†å·¥å…·ï¼Œåœ¨å¤šä¸ªé¡¹ç›®æ—¶ï¼Œé˜²æ­¢åŒ…ç‰ˆæœ¬ä¸åŒé€ æˆå†²çªç­‰éº»çƒ¦<br>ä¹Ÿå¯ä»¥åœ¨å…±äº«é¡¹ç›®æ—¶ï¼Œä¸å¼•å…¥ä¸å¿…è¦çš„pythonåŒ…<br>â€‹</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install virtualenvwrapper</span><br><span class="line"><span class="comment"># æ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/bin/virtualenvwrapper.sh</span><br><span class="line">â€‹</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å®‰è£…å®Œ virtualenvwrapperï¼Œé»˜è®¤æ²¡æœ‰ç”Ÿæ•ˆï¼Œéœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ <code>source /usr/local/bin/virtualenvwrapper.sh</code> æ‰èƒ½ç”Ÿæ•ˆï¼Œè€Œä¸”æ¯æ¬¡è¿è¡Œå‰éƒ½éœ€è¦æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå› æ­¤éœ€è¦å°†å…¶é…ç½®åˆ° ç»ˆç«¯çš„.* shrc æ–‡ä»¶ä¸­</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®ç»ˆç«¯ç±»å‹ï¼Œä¿®æ”¹ å¯¹åº”çš„.zshrc .bashrcæ–‡ä»¶ï¼ŒåŠ å…¥ä¸‹é¢è¿™å¥è¯</span></span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/bin/virtualenvwrapper.sh</span><br><span class="line"><span class="comment"># åº”ç”¨æ–°çš„é…ç½®æ–‡ä»¶ï¼Œä»¥zshrcä¸ºä¾‹</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p>â€‹</p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿè™šæ‹Ÿç¯å¢ƒåˆ—è¡¨</span></span><br><span class="line">lsvirtualenv</span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„è™šæ‹Ÿç¯å¢ƒ, [name] ä¸ºè™šæ‹Ÿç¯å¢ƒåå­—</span></span><br><span class="line">mkvirtualenv [name]</span><br><span class="line"><span class="comment"># åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">rmvirtualenv [name]</span><br><span class="line"><span class="comment"># åº”ç”¨æŸä¸ªè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">workon [name]</span><br></pre></td></tr></table></figure><p>â€‹</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ol><li><a href="https://virtualenvwrapper.readthedocs.io/en/latest/install.html">virtualenvwrapper.readthedocs.io</a><br>  â€‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> virtualenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°·æ­Œå·¥ç¨‹å®è·µ â€” code review å¼€å‘è€…æŒ‡å—</title>
      <link href="/posts/3c88/"/>
      <url>/posts/3c88/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ›´å¥½çš„é€šè¿‡Code review<br>å‚è€ƒåœ°å€ï¼š<a href="https://xindoo.github.io/eng-practices-cn/" title="è°·æ­Œå·¥ç¨‹å®è·µ">https://xindoo.github.io/eng-practices-cn/</a></p></blockquote><h2 id="å†™ä¸€ä¸ªå¥½çš„CL-1-æè¿°"><a href="#å†™ä¸€ä¸ªå¥½çš„CL-1-æè¿°" class="headerlink" title="å†™ä¸€ä¸ªå¥½çš„CL[^1]æè¿°"></a>å†™ä¸€ä¸ªå¥½çš„CL[^1]æè¿°</h2><blockquote><p>ä¸€ä¸ªCLæè¿°è®°å½•äº†åšäº†ä»€ä¹ˆæ›´æ”¹ä»¥åŠä¸ºä»€ä¹ˆåšè¿™ä¸ªæ›´æ”¹</p></blockquote><h3 id="ç¬¬ä¸€è¡Œ"><a href="#ç¬¬ä¸€è¡Œ" class="headerlink" title="ç¬¬ä¸€è¡Œ"></a>ç¬¬ä¸€è¡Œ</h3><p>CLæè¿°çš„ç¬¬ä¸€è¡Œï¼Œåº”è¯¥æ˜¯å¯¹CLæ­£åœ¨åšçš„å…·ä½“å·¥ä½œçš„çŸ­ç®€æ€»ç»“ï¼Œè¦åšåˆ°ï¼š</p><ul><li>è¨€ç®€æ„èµ…</li><li>è¯­ä¹‰å®Œæ•´</li><li>ç©ºè¡Œéš”å¼€</li></ul><h3 id="æ­£æ–‡å†…å®¹ä¸°å¯Œ"><a href="#æ­£æ–‡å†…å®¹ä¸°å¯Œ" class="headerlink" title="æ­£æ–‡å†…å®¹ä¸°å¯Œ"></a>æ­£æ–‡å†…å®¹ä¸°å¯Œ</h3><p>å…¶ä½™æè¿°åº”è¯¥å…·ä½“ä¸°å¯Œï¼Œå¯èƒ½åŒ…æ‹¬æ­£åœ¨è§£å†³é—®é¢˜çš„ç®€è¦æ¦‚è¿°ã€ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œå¦‚æœå­˜åœ¨ç¼ºç‚¹ï¼Œåº”è¯¥æåŠåˆ°ã€‚ä¹Ÿåº”è¯¥åŒ…æ‹¬ç›¸å…³çš„èƒŒæ™¯ä¿¡æ¯</p><h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><h4 id="åä¾‹"><a href="#åä¾‹" class="headerlink" title="åä¾‹"></a>åä¾‹</h4><ul><li>ä¿®å¤bug</li><li>æ·»åŠ è¡¥ä¸</li><li>é˜¶æ®µ1<br>ä»¥ä¸Šæè¿°ä¸å¤Ÿå……åˆ†ï¼Œä¸çŸ¥é“ç©¶ç«Ÿåœ¨å¹²ä»€ä¹ˆ<h4 id="å¥½çš„CLæè¿°"><a href="#å¥½çš„CLæè¿°" class="headerlink" title="å¥½çš„CLæè¿°"></a>å¥½çš„CLæè¿°</h4><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é‡æ„ï¼Œå°†modbusé‡‡é›†ç”±åŒæ­¥æ–¹å¼æ”¹ä¸ºå¼‚æ­¥æ–¹å¼</span><br><span class="line"></span><br><span class="line">å¤šè·¯modbusé‡‡é›†æ—¶ï¼ŒåŒæ­¥æ–¹å¼å¯¼è‡´é‡‡é›†æ—¶é—´è¿‡é•¿ï¼Œå½±å“åç»­çš„æ•°æ®å¤„ç†ï¼Œæ”¹ä¸ºå¼‚æ­¥æ–¹å¼åï¼Œå¢åŠ å¹¶å‘æ•°ï¼Œæé«˜é‡‡é›†é€Ÿåº¦ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="CLåº”è¯¥å°½å¯èƒ½ç®€çŸ­"><a href="#CLåº”è¯¥å°½å¯èƒ½ç®€çŸ­" class="headerlink" title="CLåº”è¯¥å°½å¯èƒ½ç®€çŸ­"></a>CLåº”è¯¥å°½å¯èƒ½ç®€çŸ­</h2><blockquote><p>ç®€çŸ­çš„CLæŒ‡çš„æ˜¯å°½å¯èƒ½åœ¨ä¸€æ¬¡å‡å°‘æäº¤å˜æ›´ï¼Œé¿å…å·¨å¤§æ”¹åŠ¨<br>å¦‚æœä½ æä¾›ä¸äº†ç®€çŸ­çš„CLï¼Œè¯´æ˜ä½ çš„ä»£ç å¯èƒ½éœ€è¦é‡æ„äº†<br>CLæ›´ç®€çŸ­ï¼Œæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p></blockquote><ul><li>code review æ›´å¿«</li><li>å‡å°‘å¯¼è‡´bugçš„å¯èƒ½æ€§</li><li>è¾ƒå°‘ä¸å¿…è¦çš„å·¥ä½œ</li><li>æ›´æ–¹ä¾¿çš„åˆå¹¶ä»£ç </li><li>æœ‰åŠ©äºåšå‡ºæ›´å¥½çš„è®¾è®¡</li><li>é™ä½å®¡æŸ¥è€…çš„éš¾åº¦</li></ul><h3 id="æ€ä¹ˆç®—ç®€çŸ­"><a href="#æ€ä¹ˆç®—ç®€çŸ­" class="headerlink" title="æ€ä¹ˆç®—ç®€çŸ­"></a>æ€ä¹ˆç®—ç®€çŸ­</h3><p>é€šå¸¸CLçš„æ­£ç¡®å¤§å°æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ›´æ”¹ï¼Œè¿™æ„å‘³ç€ï¼šCLæ‰€åšçš„æœ€å°æ›´æ”¹ä»…è§£å†³äº†ä¸€ä»¶äº‹æƒ…ï¼Œæ¯”å¦‚ä½ éœ€è¦å¢åŠ ä¸¤ä¸ªç‹¬ç«‹çš„APIæ¥å£ï¼Œåº”è¯¥åˆ†åˆ«æäº¤APIã€‚</p><h3 id="æŠŠä»£ç é‡æ„åˆ†ç¦»å‡ºæ¥"><a href="#æŠŠä»£ç é‡æ„åˆ†ç¦»å‡ºæ¥" class="headerlink" title="æŠŠä»£ç é‡æ„åˆ†ç¦»å‡ºæ¥"></a>æŠŠä»£ç é‡æ„åˆ†ç¦»å‡ºæ¥</h3><p>é‡æ„æœ€å¥½ä¸è¦å’ŒåŠŸèƒ½ä¿®æ”¹æˆ–è€…bug fixä¸€èµ·æCLï¼Œæ¯”å¦‚é‡å‘½åä¸€ä¸ªClassï¼Œæœ€å¥½å’Œè¿™ä¸ªCLassçš„bug fixåˆ†å¼€æCLï¼Œè¿™æ ·å¯¹äºè¯„å®¡è€…æ¥è¯´ï¼Œæ›´å®¹æ˜“ç†è§£</p><h3 id="å°†ç›¸å…³æµ‹è¯•ä»£ç ä¿å­˜åœ¨åŒä¸€CLä¸­"><a href="#å°†ç›¸å…³æµ‹è¯•ä»£ç ä¿å­˜åœ¨åŒä¸€CLä¸­" class="headerlink" title="å°†ç›¸å…³æµ‹è¯•ä»£ç ä¿å­˜åœ¨åŒä¸€CLä¸­"></a>å°†ç›¸å…³æµ‹è¯•ä»£ç ä¿å­˜åœ¨åŒä¸€CLä¸­</h3><p>åº”è¯¥é¿å…å°†æµ‹è¯•ä»£ç æ‹†åˆ†ä¸ºå•ç‹¬çš„CLï¼ŒéªŒè¯ä»£ç ä¿®æ”¹çš„æµ‹è¯•ä¹Ÿåº”è¯¥è¿›å…¥ç›¸åŒçš„CL</p><p>[^1]:    CL is ChangeList</p>]]></content>
      
      
      <categories>
          
          <category> book </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code review </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World 201903080551</title>
      <link href="/posts/59f6/"/>
      <url>/posts/59f6/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> book </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Testing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„ä»¶åŒ–å®æˆ˜</title>
      <link href="/posts/9b54/"/>
      <url>/posts/9b54/</url>
      
        <content type="html"><![CDATA[<p>ç›®å‰å‰ç«¯ä¸‰å¤§æ¡†æ¶ï¼ˆVue.js, Angular.js, React.jsï¼‰éƒ½åœ¨å¼•é¢†ç€å‰ç«¯çš„ç»„ä»¶åŒ–å¼€å‘æ–¹å‘ï¼Œç»„ä»¶åŒ–çš„å‰ç«¯å¼€å‘æ–¹å¼çš„ç¡®ä¸ºä¸šåŠ¡å®ç°å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æ–¹ä¾¿ï¼Œä½†å¦‚ä½•å°è£…ä¸€ä¸ªä¼˜ç§€çš„ç»„ä»¶ï¼Œå¯èƒ½å¹¶ä¸æ˜¯æ¯ä½å‰ç«¯å¼€å‘è€…éƒ½èƒ½å¤Ÿåšå¥½çš„ã€‚</p><h2 id="ç»„ä»¶åŒ–çš„ç‰¹ç‚¹"><a href="#ç»„ä»¶åŒ–çš„ç‰¹ç‚¹" class="headerlink" title="ç»„ä»¶åŒ–çš„ç‰¹ç‚¹"></a>ç»„ä»¶åŒ–çš„ç‰¹ç‚¹</h2><ul><li>ç»„ä»¶åŒ–æ˜¯å¯¹å®ç°çš„åˆ†å±‚ï¼Œæ˜¯æ›´æœ‰æ•ˆåœ°ä»£ç ç»„åˆæ–¹å¼</li><li>ç»„ä»¶åŒ–æ˜¯å¯¹èµ„æºçš„é‡ç»„å’Œä¼˜åŒ–ï¼Œä»è€Œä½¿é¡¹ç›®èµ„æºç®¡ç†æ›´åˆç†</li><li>ç»„ä»¶åŒ–æœ‰åˆ©äºå•å…ƒæµ‹è¯•</li><li>ç»„ä»¶åŒ–å¯¹é‡æ„è¾ƒå‹å¥½<h3 id="ç»„ä»¶ä¸æ¨¡å—"><a href="#ç»„ä»¶ä¸æ¨¡å—" class="headerlink" title="ç»„ä»¶ä¸æ¨¡å—"></a>ç»„ä»¶ä¸æ¨¡å—</h3>æ¨¡å—(Module)é€šå¸¸å¼ºè°ƒçš„æ˜¯èŒè´£ï¼ˆåˆ†ç¦»ã€å†…èšï¼‰ï¼Œç»„ä»¶æ˜¯å¯å¤ç”¨æ¨¡å—å’Œç›¸å…³ä¾èµ–çš„å°è£…ã€‚<blockquote><p>In my view, Module and Component are all just a couple of functions and assets.<br>And the different between them is:<br><strong>Component has business logical and module not.</strong><br>For example,this text input area is just a Module, but when there was some post api called,it become a Component. you can put a module everywhere and it will work fine, but Componet just can be used in a specific page or view(coz it has a specific api call)</p></blockquote></li></ul><h3 id="ç»„ä»¶åŒ–ç»“æ„"><a href="#ç»„ä»¶åŒ–ç»“æ„" class="headerlink" title="ç»„ä»¶åŒ–ç»“æ„"></a>ç»„ä»¶åŒ–ç»“æ„</h3><p>ä¸€ä¸ªç»„ä»¶åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ul><li>Attribute</li><li> Config &amp; State</li><li>Event</li><li>Lifecycle</li><li>Children</li><li>Properties</li><li>Methods</li><li>Inherit<br><img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-170957.png"></li></ul><h2 id="Webpackèµ„æºç»„ä»¶åŒ–"><a href="#Webpackèµ„æºç»„ä»¶åŒ–" class="headerlink" title="Webpackèµ„æºç»„ä»¶åŒ–"></a>Webpackèµ„æºç»„ä»¶åŒ–</h2><blockquote><p>webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle<br><img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-160837.jpg"><br>ä»å›¾ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œwebpackå°†å¤šç§é™æ€èµ„æºjsã€cssã€lessç­‰è½¬åŒ–æˆä¸€ä¸ªé™æ€æ–‡ä»¶ï¼Œå‡å°‘é¡µé¢çš„è¯·æ±‚<br>WebpackåŒ…æ‹¬å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šå…¥å£ã€è¾“å‡ºã€loaderã€æ’ä»¶</p></blockquote><h3 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h3><p>å…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ï¼Œå¯ä»¥é€šè¿‡åœ¨ webpack é…ç½®ä¸­é…ç½® entry å±æ€§ï¼Œæ¥æŒ‡å®šä¸€ä¸ªå…¥å£èµ·ç‚¹ï¼ˆæˆ–å¤šä¸ªå…¥å£èµ·ç‚¹ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mode: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="å‡ºå£"><a href="#å‡ºå£" class="headerlink" title="å‡ºå£"></a>å‡ºå£</h3><p>output å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º ./distã€‚ä½ å¯ä»¥é€šè¿‡åœ¨é…ç½®ä¸­æŒ‡å®šä¸€ä¸ª output å­—æ®µï¼Œæ¥é…ç½®è¿™äº›å¤„ç†è¿‡ç¨‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mode: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="LOADER"><a href="#LOADER" class="headerlink" title="LOADER"></a>LOADER</h3><p>loader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚<br>æœ¬è´¨ä¸Šï¼Œwebpack loader å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºåº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾ï¼ˆå’Œæœ€ç»ˆçš„ bundleï¼‰å¯ä»¥ç›´æ¥å¼•ç”¨çš„æ¨¡å—ã€‚<br>åœ¨æ›´é«˜å±‚é¢ï¼Œåœ¨ webpack çš„é…ç½®ä¸­ loader æœ‰ä¸¤ä¸ªç›®æ ‡ï¼š</p><ol><li>test å±æ€§ï¼Œç”¨äºæ ‡è¯†å‡ºåº”è¯¥è¢«å¯¹åº”çš„ loader è¿›è¡Œè½¬æ¢çš„æŸä¸ªæˆ–æŸäº›æ–‡ä»¶ã€‚</li><li>use å±æ€§ï¼Œè¡¨ç¤ºè¿›è¡Œè½¬æ¢æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å“ªä¸ª loaderã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, exclude: <span class="regexp">/node_modules/</span>, loader: <span class="string">&quot;babel-loader&quot;</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="comment">// Prefer `dart-sass`</span></span><br><span class="line">              <span class="attr">implementation</span>: <span class="built_in">require</span>(<span class="string">&#x27;sass&#x27;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">     </span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3>loader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œä½ åªéœ€è¦ require() å®ƒï¼Œç„¶åæŠŠå®ƒæ·»åŠ åˆ° plugins æ•°ç»„ä¸­ã€‚å¤šæ•°æ’ä»¶å¯ä»¥é€šè¿‡é€‰é¡¹(option)è‡ªå®šä¹‰ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­å› ä¸ºä¸åŒç›®çš„è€Œå¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ’ä»¶ï¼Œè¿™æ—¶éœ€è¦é€šè¿‡ä½¿ç”¨ new æ“ä½œç¬¦æ¥åˆ›å»ºå®ƒçš„ä¸€ä¸ªå®ä¾‹ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> CopyPlugin([</span><br><span class="line">      &#123; <span class="attr">from</span>: <span class="string">&#x27;./static/&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;static/&#x27;</span>, <span class="attr">force</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">from</span>: <span class="string">&#x27;./index.html&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;index.html&#x27;</span>, <span class="attr">force</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    ]),</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure>æœ¬é¡¹ç›®ä¸­å®Œæ•´webpackå®ä¾‹<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># webpack.config.js</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> CopyPlugin = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, exclude: <span class="regexp">/node_modules/</span>, loader: <span class="string">&quot;babel-loader&quot;</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="comment">// Prefer `dart-sass`</span></span><br><span class="line">              <span class="attr">implementation</span>: <span class="built_in">require</span>(<span class="string">&#x27;sass&#x27;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">     </span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> CopyPlugin([</span><br><span class="line">      &#123; <span class="attr">from</span>: <span class="string">&#x27;./static/&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;static/&#x27;</span>, <span class="attr">force</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">from</span>: <span class="string">&#x27;./index.html&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;index.html&#x27;</span>, <span class="attr">force</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    ]),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;inline-source-map&#x27;</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: <span class="string">&#x27;./dist&#x27;</span>,</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;8000&#x27;</span>,</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶å®æˆ˜"><a href="#ç»„ä»¶å®æˆ˜" class="headerlink" title="ç»„ä»¶å®æˆ˜"></a>ç»„ä»¶å®æˆ˜</h2><h3 id="Tabç»„ä»¶"><a href="#Tabç»„ä»¶" class="headerlink" title="Tabç»„ä»¶"></a>Tabç»„ä»¶</h3><h4 id="é€šè¿‡ç‚¹å‡»Tab-Headerå®ç°"><a href="#é€šè¿‡ç‚¹å‡»Tab-Headerå®ç°" class="headerlink" title="é€šè¿‡ç‚¹å‡»Tab Headerå®ç°"></a>é€šè¿‡ç‚¹å‡»Tab Headerå®ç°</h4></li><li>Display åˆ‡æ¢<br><img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-165152.png"></li><li>Animationåˆ‡æ¢<br> ï¿¼<img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-165231.png"><h4 id="é€šè¿‡æ‰‹åŠ¿åˆ‡æ¢"><a href="#é€šè¿‡æ‰‹åŠ¿åˆ‡æ¢" class="headerlink" title="é€šè¿‡æ‰‹åŠ¿åˆ‡æ¢"></a>é€šè¿‡æ‰‹åŠ¿åˆ‡æ¢</h4>è·Ÿ Carousel åŒä¸€åŸç†<br><img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-165814.png"><h4 id="Scrollç»„ä»¶"><a href="#Scrollç»„ä»¶" class="headerlink" title="Scrollç»„ä»¶"></a>Scrollç»„ä»¶</h4></li><li>ScrollTop<br> ï¿¼<img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-165949.png"></li><li>é€šè¿‡ç«™ä½å…ƒç´ å®ç°<br> <img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-170030.png"><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><img src="https://oss.smart-lifestyle.cn/blog/2019-11-16-2019-11-17%2001.21.51.gif"><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2>é€šè¿‡ä¸‰ä¸ªæœˆè·Ÿç€æå®¢å¤§å­¦å‰ç«¯è®­ç»ƒè¥å’Œwinterè€å¸ˆçš„å­¦ä¹ ï¼Œä»åŸºæœ¬åŠŸèƒ½å®ç°ä¸€ä¸ªç®€å•çš„æœ‰å¥½è´§é¡µé¢ã€‚<br>ç»„ä»¶åŒ–åŒ–æ€æƒ³å¾ˆé‡è¦ï¼Œé¿å…äº†é‡å¤é€ è½®å­ï¼Œä½¿è‡ªå·±çš„ä»£ç æ›´åŠ å¥å…¨ï¼Œéœ€è¦ä¹‹åçš„å·¥ä½œä¸­å¤šå¤šå®è·µï¼Œæ·±åˆ»ä½“ä¼šç»„ä»¶åŒ–æ€æƒ³ï¼Œç›®å‰æˆ‘è¿˜éœ€è¦å¤šç»ƒå¤šä½“ä¼šã€‚<br>é©å‘½å°šæœªæˆåŠŸï¼ŒåŒå¿—è¿˜éœ€åŠªåŠ›ã€‚</li></ol><p><strong>æœªå®Œç»“</strong><br>å®Œæ•´ä»£ç åœ°å€ï¼š<br><a href="https://github.com/simplezhao/Front-end" title="å‰æ®µè®­ç»ƒè¥"></a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
